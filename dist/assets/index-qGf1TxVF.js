(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var Bm={exports:{}},Jl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l0;function LA(){if(l0)return Jl;l0=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var g in o)g!=="key"&&(c[g]=o[g])}else c=o;return o=c.ref,{$$typeof:i,type:a,key:d,ref:o!==void 0?o:null,props:c}}return Jl.Fragment=e,Jl.jsx=n,Jl.jsxs=n,Jl}var c0;function UA(){return c0||(c0=1,Bm.exports=LA()),Bm.exports}var u=UA(),Fm={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0;function zA(){if(u0)return Ce;u0=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),A=Symbol.iterator;function C(k){return k===null||typeof k!="object"?null:(k=A&&k[A]||k["@@iterator"],typeof k=="function"?k:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,F={};function te(k,J,ce){this.props=k,this.context=J,this.refs=F,this.updater=ce||L}te.prototype.isReactComponent={},te.prototype.setState=function(k,J){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,J,"setState")},te.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function ne(){}ne.prototype=te.prototype;function Q(k,J,ce){this.props=k,this.context=J,this.refs=F,this.updater=ce||L}var le=Q.prototype=new ne;le.constructor=Q,G(le,te.prototype),le.isPureReactComponent=!0;var ye=Array.isArray;function se(){}var N={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function R(k,J,ce){var he=ce.ref;return{$$typeof:i,type:k,key:J,ref:he!==void 0?he:null,props:ce}}function M(k,J){return R(k.type,J,k.props)}function O(k){return typeof k=="object"&&k!==null&&k.$$typeof===i}function P(k){var J={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(ce){return J[ce]})}var I=/\/+/g;function Ye(k,J){return typeof k=="object"&&k!==null&&k.key!=null?P(""+k.key):J.toString(36)}function Oe(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(se,se):(k.status="pending",k.then(function(J){k.status==="pending"&&(k.status="fulfilled",k.value=J)},function(J){k.status==="pending"&&(k.status="rejected",k.reason=J)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function Y(k,J,ce,he,ae){var fe=typeof k;(fe==="undefined"||fe==="boolean")&&(k=null);var _e=!1;if(k===null)_e=!0;else switch(fe){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(k.$$typeof){case i:case e:_e=!0;break;case T:return _e=k._init,Y(_e(k._payload),J,ce,he,ae)}}if(_e)return ae=ae(k),_e=he===""?"."+Ye(k,0):he,ye(ae)?(ce="",_e!=null&&(ce=_e.replace(I,"$&/")+"/"),Y(ae,J,ce,"",function(ja){return ja})):ae!=null&&(O(ae)&&(ae=M(ae,ce+(ae.key==null||k&&k.key===ae.key?"":(""+ae.key).replace(I,"$&/")+"/")+_e)),J.push(ae)),1;_e=0;var dt=he===""?".":he+":";if(ye(k))for(var ct=0;ct<k.length;ct++)he=k[ct],fe=dt+Ye(he,ct),_e+=Y(he,J,ce,fe,ae);else if(ct=C(k),typeof ct=="function")for(k=ct.call(k),ct=0;!(he=k.next()).done;)he=he.value,fe=dt+Ye(he,ct++),_e+=Y(he,J,ce,fe,ae);else if(fe==="object"){if(typeof k.then=="function")return Y(Oe(k),J,ce,he,ae);throw J=String(k),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return _e}function re(k,J,ce){if(k==null)return k;var he=[],ae=0;return Y(k,he,"","",function(fe){return J.call(ce,fe,ae++)}),he}function ve(k){if(k._status===-1){var J=k._result;J=J(),J.then(function(ce){(k._status===0||k._status===-1)&&(k._status=1,k._result=ce)},function(ce){(k._status===0||k._status===-1)&&(k._status=2,k._result=ce)}),k._status===-1&&(k._status=0,k._result=J)}if(k._status===1)return k._result.default;throw k._result}var qe=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},$e={map:re,forEach:function(k,J,ce){re(k,function(){J.apply(this,arguments)},ce)},count:function(k){var J=0;return re(k,function(){J++}),J},toArray:function(k){return re(k,function(J){return J})||[]},only:function(k){if(!O(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return Ce.Activity=S,Ce.Children=$e,Ce.Component=te,Ce.Fragment=n,Ce.Profiler=o,Ce.PureComponent=Q,Ce.StrictMode=a,Ce.Suspense=p,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(k){return N.H.useMemoCache(k)}},Ce.cache=function(k){return function(){return k.apply(null,arguments)}},Ce.cacheSignal=function(){return null},Ce.cloneElement=function(k,J,ce){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var he=G({},k.props),ae=k.key;if(J!=null)for(fe in J.key!==void 0&&(ae=""+J.key),J)!x.call(J,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&J.ref===void 0||(he[fe]=J[fe]);var fe=arguments.length-2;if(fe===1)he.children=ce;else if(1<fe){for(var _e=Array(fe),dt=0;dt<fe;dt++)_e[dt]=arguments[dt+2];he.children=_e}return R(k.type,ae,he)},Ce.createContext=function(k){return k={$$typeof:d,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:c,_context:k},k},Ce.createElement=function(k,J,ce){var he,ae={},fe=null;if(J!=null)for(he in J.key!==void 0&&(fe=""+J.key),J)x.call(J,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(ae[he]=J[he]);var _e=arguments.length-2;if(_e===1)ae.children=ce;else if(1<_e){for(var dt=Array(_e),ct=0;ct<_e;ct++)dt[ct]=arguments[ct+2];ae.children=dt}if(k&&k.defaultProps)for(he in _e=k.defaultProps,_e)ae[he]===void 0&&(ae[he]=_e[he]);return R(k,fe,ae)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(k){return{$$typeof:g,render:k}},Ce.isValidElement=O,Ce.lazy=function(k){return{$$typeof:T,_payload:{_status:-1,_result:k},_init:ve}},Ce.memo=function(k,J){return{$$typeof:y,type:k,compare:J===void 0?null:J}},Ce.startTransition=function(k){var J=N.T,ce={};N.T=ce;try{var he=k(),ae=N.S;ae!==null&&ae(ce,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(se,qe)}catch(fe){qe(fe)}finally{J!==null&&ce.types!==null&&(J.types=ce.types),N.T=J}},Ce.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Ce.use=function(k){return N.H.use(k)},Ce.useActionState=function(k,J,ce){return N.H.useActionState(k,J,ce)},Ce.useCallback=function(k,J){return N.H.useCallback(k,J)},Ce.useContext=function(k){return N.H.useContext(k)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(k,J){return N.H.useDeferredValue(k,J)},Ce.useEffect=function(k,J){return N.H.useEffect(k,J)},Ce.useEffectEvent=function(k){return N.H.useEffectEvent(k)},Ce.useId=function(){return N.H.useId()},Ce.useImperativeHandle=function(k,J,ce){return N.H.useImperativeHandle(k,J,ce)},Ce.useInsertionEffect=function(k,J){return N.H.useInsertionEffect(k,J)},Ce.useLayoutEffect=function(k,J){return N.H.useLayoutEffect(k,J)},Ce.useMemo=function(k,J){return N.H.useMemo(k,J)},Ce.useOptimistic=function(k,J){return N.H.useOptimistic(k,J)},Ce.useReducer=function(k,J,ce){return N.H.useReducer(k,J,ce)},Ce.useRef=function(k){return N.H.useRef(k)},Ce.useState=function(k){return N.H.useState(k)},Ce.useSyncExternalStore=function(k,J,ce){return N.H.useSyncExternalStore(k,J,ce)},Ce.useTransition=function(){return N.H.useTransition()},Ce.version="19.2.0",Ce}var h0;function Bp(){return h0||(h0=1,Fm.exports=zA()),Fm.exports}var j=Bp(),Hm={exports:{}},Wl={},Gm={exports:{}},$m={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d0;function qA(){return d0||(d0=1,(function(i){function e(Y,re){var ve=Y.length;Y.push(re);e:for(;0<ve;){var qe=ve-1>>>1,$e=Y[qe];if(0<o($e,re))Y[qe]=re,Y[ve]=$e,ve=qe;else break e}}function n(Y){return Y.length===0?null:Y[0]}function a(Y){if(Y.length===0)return null;var re=Y[0],ve=Y.pop();if(ve!==re){Y[0]=ve;e:for(var qe=0,$e=Y.length,k=$e>>>1;qe<k;){var J=2*(qe+1)-1,ce=Y[J],he=J+1,ae=Y[he];if(0>o(ce,ve))he<$e&&0>o(ae,ce)?(Y[qe]=ae,Y[he]=ve,qe=he):(Y[qe]=ce,Y[J]=ve,qe=J);else if(he<$e&&0>o(ae,ve))Y[qe]=ae,Y[he]=ve,qe=he;else break e}}return re}function o(Y,re){var ve=Y.sortIndex-re.sortIndex;return ve!==0?ve:Y.id-re.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();i.unstable_now=function(){return d.now()-g}}var p=[],y=[],T=1,S=null,A=3,C=!1,L=!1,G=!1,F=!1,te=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function le(Y){for(var re=n(y);re!==null;){if(re.callback===null)a(y);else if(re.startTime<=Y)a(y),re.sortIndex=re.expirationTime,e(p,re);else break;re=n(y)}}function ye(Y){if(G=!1,le(Y),!L)if(n(p)!==null)L=!0,se||(se=!0,P());else{var re=n(y);re!==null&&Oe(ye,re.startTime-Y)}}var se=!1,N=-1,x=5,R=-1;function M(){return F?!0:!(i.unstable_now()-R<x)}function O(){if(F=!1,se){var Y=i.unstable_now();R=Y;var re=!0;try{e:{L=!1,G&&(G=!1,ne(N),N=-1),C=!0;var ve=A;try{t:{for(le(Y),S=n(p);S!==null&&!(S.expirationTime>Y&&M());){var qe=S.callback;if(typeof qe=="function"){S.callback=null,A=S.priorityLevel;var $e=qe(S.expirationTime<=Y);if(Y=i.unstable_now(),typeof $e=="function"){S.callback=$e,le(Y),re=!0;break t}S===n(p)&&a(p),le(Y)}else a(p);S=n(p)}if(S!==null)re=!0;else{var k=n(y);k!==null&&Oe(ye,k.startTime-Y),re=!1}}break e}finally{S=null,A=ve,C=!1}re=void 0}}finally{re?P():se=!1}}}var P;if(typeof Q=="function")P=function(){Q(O)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Ye=I.port2;I.port1.onmessage=O,P=function(){Ye.postMessage(null)}}else P=function(){te(O,0)};function Oe(Y,re){N=te(function(){Y(i.unstable_now())},re)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Y){Y.callback=null},i.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<Y?Math.floor(1e3/Y):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_next=function(Y){switch(A){case 1:case 2:case 3:var re=3;break;default:re=A}var ve=A;A=re;try{return Y()}finally{A=ve}},i.unstable_requestPaint=function(){F=!0},i.unstable_runWithPriority=function(Y,re){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ve=A;A=Y;try{return re()}finally{A=ve}},i.unstable_scheduleCallback=function(Y,re,ve){var qe=i.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?qe+ve:qe):ve=qe,Y){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=ve+$e,Y={id:T++,callback:re,priorityLevel:Y,startTime:ve,expirationTime:$e,sortIndex:-1},ve>qe?(Y.sortIndex=ve,e(y,Y),n(p)===null&&Y===n(y)&&(G?(ne(N),N=-1):G=!0,Oe(ye,ve-qe))):(Y.sortIndex=$e,e(p,Y),L||C||(L=!0,se||(se=!0,P()))),Y},i.unstable_shouldYield=M,i.unstable_wrapCallback=function(Y){var re=A;return function(){var ve=A;A=re;try{return Y.apply(this,arguments)}finally{A=ve}}}})($m)),$m}var f0;function BA(){return f0||(f0=1,Gm.exports=qA()),Gm.exports}var Qm={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m0;function FA(){if(m0)return en;m0=1;var i=Bp();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(p,y,T){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:p,containerInfo:y,implementation:T}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,en.createPortal=function(p,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(p,y,null,T)},en.flushSync=function(p){var y=d.T,T=a.p;try{if(d.T=null,a.p=2,p)return p()}finally{d.T=y,a.p=T,a.d.f()}},en.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,a.d.C(p,y))},en.prefetchDNS=function(p){typeof p=="string"&&a.d.D(p)},en.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var T=y.as,S=g(T,y.crossOrigin),A=typeof y.integrity=="string"?y.integrity:void 0,C=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?a.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:S,integrity:A,fetchPriority:C}):T==="script"&&a.d.X(p,{crossOrigin:S,integrity:A,fetchPriority:C,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},en.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=g(y.as,y.crossOrigin);a.d.M(p,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&a.d.M(p)},en.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,S=g(T,y.crossOrigin);a.d.L(p,T,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},en.preloadModule=function(p,y){if(typeof p=="string")if(y){var T=g(y.as,y.crossOrigin);a.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else a.d.m(p)},en.requestFormReset=function(p){a.d.r(p)},en.unstable_batchedUpdates=function(p,y){return p(y)},en.useFormState=function(p,y,T){return d.H.useFormState(p,y,T)},en.useFormStatus=function(){return d.H.useHostTransitionStatus()},en.version="19.2.0",en}var p0;function HA(){if(p0)return Qm.exports;p0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Qm.exports=FA(),Qm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g0;function GA(){if(g0)return Wl;g0=1;var i=BA(),e=Bp(),n=HA();function a(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function d(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function g(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(a(188))}function y(t){var s=t.alternate;if(!s){if(s=c(t),s===null)throw Error(a(188));return s!==t?null:t}for(var r=t,l=s;;){var f=r.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){r=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===r)return p(f),t;if(m===l)return p(f),s;m=m.sibling}throw Error(a(188))}if(r.return!==l.return)r=f,l=m;else{for(var _=!1,b=f.child;b;){if(b===r){_=!0,r=f,l=m;break}if(b===l){_=!0,l=f,r=m;break}b=b.sibling}if(!_){for(b=m.child;b;){if(b===r){_=!0,r=m,l=f;break}if(b===l){_=!0,l=m,r=f;break}b=b.sibling}if(!_)throw Error(a(189))}}if(r.alternate!==l)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?t:s}function T(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=T(t),s!==null)return s;t=t.sibling}return null}var S=Object.assign,A=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),ne=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),ye=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function P(t){return t===null||typeof t!="object"?null:(t=O&&t[O]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function Ye(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case G:return"Fragment";case te:return"Profiler";case F:return"StrictMode";case ye:return"Suspense";case se:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case L:return"Portal";case Q:return t.displayName||"Context";case ne:return(t._context.displayName||"Context")+".Consumer";case le:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return s=t.displayName||null,s!==null?s:Ye(t.type)||"Memo";case x:s=t._payload,t=t._init;try{return Ye(t(s))}catch{}}return null}var Oe=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},qe=[],$e=-1;function k(t){return{current:t}}function J(t){0>$e||(t.current=qe[$e],qe[$e]=null,$e--)}function ce(t,s){$e++,qe[$e]=t.current,t.current=s}var he=k(null),ae=k(null),fe=k(null),_e=k(null);function dt(t,s){switch(ce(fe,s),ce(ae,t),ce(he,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?D_(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=D_(s),t=j_(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}J(he),ce(he,t)}function ct(){J(he),J(ae),J(fe)}function ja(t){t.memoizedState!==null&&ce(_e,t);var s=he.current,r=j_(s,t.type);s!==r&&(ce(ae,t),ce(he,r))}function Cr(t){ae.current===t&&(J(he),J(ae)),_e.current===t&&(J(_e),Ql._currentValue=ve)}var Nr,Rr;function fi(t){if(Nr===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);Nr=s&&s[1]||"",Rr=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Nr+t+Rr}var Qo=!1;function Oa(t,s){if(!t||Qo)return"";Qo=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(K){var H=K}Reflect.construct(t,[],ee)}else{try{ee.call()}catch(K){H=K}t.call(ee.prototype)}}else{try{throw Error()}catch(K){H=K}(ee=t())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(K){if(K&&H&&typeof K.stack=="string")return[K.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),_=m[0],b=m[1];if(_&&b){var D=_.split(`
`),B=b.split(`
`);for(f=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;f<B.length&&!B[f].includes("DetermineComponentFrameRoot");)f++;if(l===D.length||f===B.length)for(l=D.length-1,f=B.length-1;1<=l&&0<=f&&D[l]!==B[f];)f--;for(;1<=l&&0<=f;l--,f--)if(D[l]!==B[f]){if(l!==1||f!==1)do if(l--,f--,0>f||D[l]!==B[f]){var X=`
`+D[l].replace(" at new "," at ");return t.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",t.displayName)),X}while(1<=l&&0<=f);break}}}finally{Qo=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?fi(r):""}function Ko(t,s){switch(t.tag){case 26:case 27:case 5:return fi(t.type);case 16:return fi("Lazy");case 13:return t.child!==s&&s!==null?fi("Suspense Fallback"):fi("Suspense");case 19:return fi("SuspenseList");case 0:case 15:return Oa(t.type,!1);case 11:return Oa(t.type.render,!1);case 1:return Oa(t.type,!0);case 31:return fi("Activity");default:return""}}function Yo(t){try{var s="",r=null;do s+=Ko(t,r),r=t,t=t.return;while(t);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var bt=Object.prototype.hasOwnProperty,kt=i.unstable_scheduleCallback,Ns=i.unstable_cancelCallback,Fd=i.unstable_shouldYield,Qc=i.unstable_requestPaint,on=i.unstable_now,Ma=i.unstable_getCurrentPriorityLevel,Xo=i.unstable_ImmediatePriority,Jo=i.unstable_UserBlockingPriority,Rs=i.unstable_NormalPriority,Hd=i.unstable_LowPriority,Kc=i.unstable_IdlePriority,Yc=i.log,Xc=i.unstable_setDisableYieldValue,Qn=null,Gt=null;function jn(t){if(typeof Yc=="function"&&Xc(t),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(Qn,t)}catch{}}var yt=Math.clz32?Math.clz32:Wc,Jc=Math.log,Ir=Math.LN2;function Wc(t){return t>>>=0,t===0?32:31-(Jc(t)/Ir|0)|0}var mi=256,Va=262144,At=4194304;function pi(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function gi(t,s,r){var l=t.pendingLanes;if(l===0)return 0;var f=0,m=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~m,l!==0?f=pi(l):(_&=b,_!==0?f=pi(_):r||(r=b&~t,r!==0&&(f=pi(r))))):(b=l&~m,b!==0?f=pi(b):_!==0?f=pi(_):r||(r=l&~t,r!==0&&(f=pi(r)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,r=s&-s,m>=r||m===32&&(r&4194048)!==0)?s:f}function Kn(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function Gd(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zc(){var t=At;return At<<=1,(At&62914560)===0&&(At=4194304),t}function yi(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function ka(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function $d(t,s,r,l,f,m){var _=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var b=t.entanglements,D=t.expirationTimes,B=t.hiddenUpdates;for(r=_&~r;0<r;){var X=31-yt(r),ee=1<<X;b[X]=0,D[X]=-1;var H=B[X];if(H!==null)for(B[X]=null,X=0;X<H.length;X++){var K=H[X];K!==null&&(K.lane&=-536870913)}r&=~ee}l!==0&&Pa(t,l,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(_&~s))}function Pa(t,s,r){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-yt(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|r&261930}function Wo(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var l=31-yt(r),f=1<<l;f&s|t[l]&s&&(t[l]|=s),r&=~f}}function Zo(t,s){var r=s&-s;return r=(r&42)!==0?1:La(r),(r&(t.suspendedLanes|s))!==0?0:r}function La(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ki(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function eu(){var t=re.p;return t!==0?t:(t=window.event,t===void 0?32:t0(t.type))}function Yn(t,s){var r=re.p;try{return re.p=t,s()}finally{re.p=r}}var Xn=Math.random().toString(36).slice(2),wt="__reactFiber$"+Xn,zt="__reactProps$"+Xn,vi="__reactContainer$"+Xn,Dr="__reactEvents$"+Xn,Qd="__reactListeners$"+Xn,tu="__reactHandles$"+Xn,nu="__reactResources$"+Xn,_i="__reactMarker$"+Xn;function jr(t){delete t[wt],delete t[zt],delete t[Dr],delete t[Qd],delete t[tu]}function Ei(t){var s=t[wt];if(s)return s;for(var r=t.parentNode;r;){if(s=r[vi]||r[wt]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=U_(t);t!==null;){if(r=t[wt])return r;t=U_(t)}return s}t=r,r=t.parentNode}return null}function On(t){if(t=t[wt]||t[vi]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function En(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(a(33))}function Ti(t){var s=t[nu];return s||(s=t[nu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function xt(t){t[_i]=!0}var el=new Set,tl={};function Si(t,s){bi(t,s),bi(t+"Capture",s)}function bi(t,s){for(tl[t]=s,t=0;t<s.length;t++)el.add(s[t])}var nl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),il={},sl={};function iu(t){return bt.call(sl,t)?!0:bt.call(il,t)?!1:nl.test(t)?sl[t]=!0:(il[t]=!0,!1)}function Or(t,s,r){if(iu(s))if(r===null)t.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+r)}}function Tn(t,s,r){if(r===null)t.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+r)}}function Ct(t,s,r,l){if(l===null)t.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(s,r,""+l)}}function qt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Is(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function al(t,s,r){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return f.call(this)},set:function(_){r=""+_,m.call(this,_)}}),Object.defineProperty(t,s,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(_){r=""+_},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Je(t){if(!t._valueTracker){var s=Is(t)?"checked":"value";t._valueTracker=al(t,s,""+t[s])}}function Ua(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),l="";return t&&(l=Is(t)?t.checked?"true":"false":t.value),t=l,t!==r?(s.setValue(t),!0):!1}function Ai(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var za=/[\n"\\]/g;function un(t){return t.replace(za,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Mr(t,s,r,l,f,m,_,b){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),s!=null?_==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+qt(s)):t.value!==""+qt(s)&&(t.value=""+qt(s)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),s!=null?rl(t,_,qt(s)):r!=null?rl(t,_,qt(r)):l!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+qt(b):t.removeAttribute("name")}function su(t,s,r,l,f,m,_,b){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){Je(t);return}r=r!=null?""+qt(r):"",s=s!=null?""+qt(s):r,b||s===t.value||(t.value=s),t.defaultValue=s}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),Je(t)}function rl(t,s,r){s==="number"&&Ai(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function Ds(t,s,r,l){if(t=t.options,s){s={};for(var f=0;f<r.length;f++)s["$"+r[f]]=!0;for(r=0;r<t.length;r++)f=s.hasOwnProperty("$"+t[r].value),t[r].selected!==f&&(t[r].selected=f),f&&l&&(t[r].defaultSelected=!0)}else{for(r=""+qt(r),s=null,f=0;f<t.length;f++){if(t[f].value===r){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}s!==null||t[f].disabled||(s=t[f])}s!==null&&(s.selected=!0)}}function au(t,s,r){if(s!=null&&(s=""+qt(s),s!==t.value&&(t.value=s),r==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=r!=null?""+qt(r):""}function js(t,s,r,l){if(s==null){if(l!=null){if(r!=null)throw Error(a(92));if(Oe(l)){if(1<l.length)throw Error(a(93));l=l[0]}r=l}r==null&&(r=""),s=r}r=qt(s),t.defaultValue=r,l=t.textContent,l===r&&l!==""&&l!==null&&(t.value=l),Je(t)}function hn(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var ru=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ol(t,s,r){var l=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,r):typeof r!="number"||r===0||ru.has(s)?s==="float"?t.cssFloat=r:t[s]=(""+r).trim():t[s]=r+"px"}function ll(t,s,r){if(s!=null&&typeof s!="object")throw Error(a(62));if(t=t.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in s)l=s[f],s.hasOwnProperty(f)&&r[f]!==l&&ol(t,f,l)}else for(var m in s)s.hasOwnProperty(m)&&ol(t,m,s[m])}function Vr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ou=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Os=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kr(t){return Os.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Jn(){}var cl=null;function Mn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ms=null,wi=null;function qa(t){var s=On(t);if(s&&(t=s.stateNode)){var r=t[zt]||null;e:switch(t=s.stateNode,s.type){case"input":if(Mr(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+un(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var l=r[s];if(l!==t&&l.form===t.form){var f=l[zt]||null;if(!f)throw Error(a(90));Mr(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<r.length;s++)l=r[s],l.form===t.form&&Ua(l)}break e;case"textarea":au(t,r.value,r.defaultValue);break e;case"select":s=r.value,s!=null&&Ds(t,!!r.multiple,s,!1)}}}var Pr=!1;function Vs(t,s,r){if(Pr)return t(s,r);Pr=!0;try{var l=t(s);return l}finally{if(Pr=!1,(Ms!==null||wi!==null)&&(eh(),Ms&&(s=Ms,t=wi,wi=Ms=null,qa(s),t)))for(s=0;s<t.length;s++)qa(t[s])}}function Wn(t,s){var r=t.stateNode;if(r===null)return null;var l=r[zt]||null;if(l===null)return null;r=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(a(231,s,typeof r));return r}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ba=!1;if(Vn)try{var et={};Object.defineProperty(et,"passive",{get:function(){Ba=!0}}),window.addEventListener("test",et,et),window.removeEventListener("test",et,et)}catch{Ba=!1}var xi=null,ul=null,Fa=null;function hl(){if(Fa)return Fa;var t,s=ul,r=s.length,l,f="value"in xi?xi.value:xi.textContent,m=f.length;for(t=0;t<r&&s[t]===f[t];t++);var _=r-t;for(l=1;l<=_&&s[r-l]===f[m-l];l++);return Fa=f.slice(t,1<l?1-l:void 0)}function Ha(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Yi(){return!0}function Zn(){return!1}function $t(t){function s(r,l,f,m,_){this._reactName=r,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(r=t[b],this[b]=r?r(m):m[b]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Yi:Zn,this.isPropagationStopped=Zn,this}return S(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Yi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Yi)},persist:function(){},isPersistent:Yi}),s}var Xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ci=$t(Xi),ks=S({},Xi,{view:0,detail:0}),dl=$t(ks),Ps,Lr,Ni,Ur=S({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ls,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ni&&(Ni&&t.type==="mousemove"?(Ps=t.screenX-Ni.screenX,Lr=t.screenY-Ni.screenY):Lr=Ps=0,Ni=t),Ps)},movementY:function(t){return"movementY"in t?t.movementY:Lr}}),fl=$t(Ur),Ga=S({},Ur,{dataTransfer:0}),lu=$t(Ga),cu=S({},ks,{relatedTarget:0}),$a=$t(cu),ml=S({},Xi,{animationName:0,elapsedTime:0,pseudoElement:0}),uu=$t(ml),zr=S({},Xi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hu=$t(zr),du=S({},Xi,{data:0}),Ri=$t(du),fu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gu(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=pu[t])?!!s[t]:!1}function Ls(){return gu}var ln=S({},ks,{key:function(t){if(t.key){var s=fu[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Ha(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ls,charCode:function(t){return t.type==="keypress"?Ha(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ha(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),yu=$t(ln),vu=S({},Ur,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ji=$t(vu),h=S({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ls}),v=$t(h),E=S({},Xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=$t(E),z=S({},Ur,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$=$t(z),oe=S({},Xi,{newState:0,oldState:0}),Re=$t(oe),vt=[9,13,27,32],Qe=Vn&&"CompositionEvent"in window,ut=null;Vn&&"documentMode"in document&&(ut=document.documentMode);var kn=Vn&&"TextEvent"in window&&!ut,Ii=Vn&&(!Qe||ut&&8<ut&&11>=ut),ei=" ",ti=!1;function Qa(t,s){switch(t){case"keyup":return vt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qr(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Br=!1;function lb(t,s){switch(t){case"compositionend":return qr(s);case"keypress":return s.which!==32?null:(ti=!0,ei);case"textInput":return t=s.data,t===ei&&ti?null:t;default:return null}}function cb(t,s){if(Br)return t==="compositionend"||!Qe&&Qa(t,s)?(t=hl(),Fa=ul=xi=null,Br=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ii&&s.locale!=="ko"?null:s.data;default:return null}}var ub={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bg(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!ub[t.type]:s==="textarea"}function Fg(t,s,r,l){Ms?wi?wi.push(l):wi=[l]:Ms=l,s=oh(s,"onChange"),0<s.length&&(r=new Ci("onChange","change",null,r,l),t.push({event:r,listeners:s}))}var pl=null,gl=null;function hb(t){w_(t,0)}function _u(t){var s=En(t);if(Ua(s))return t}function Hg(t,s){if(t==="change")return s}var Gg=!1;if(Vn){var Kd;if(Vn){var Yd="oninput"in document;if(!Yd){var $g=document.createElement("div");$g.setAttribute("oninput","return;"),Yd=typeof $g.oninput=="function"}Kd=Yd}else Kd=!1;Gg=Kd&&(!document.documentMode||9<document.documentMode)}function Qg(){pl&&(pl.detachEvent("onpropertychange",Kg),gl=pl=null)}function Kg(t){if(t.propertyName==="value"&&_u(gl)){var s=[];Fg(s,gl,t,Mn(t)),Vs(hb,s)}}function db(t,s,r){t==="focusin"?(Qg(),pl=s,gl=r,pl.attachEvent("onpropertychange",Kg)):t==="focusout"&&Qg()}function fb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _u(gl)}function mb(t,s){if(t==="click")return _u(s)}function pb(t,s){if(t==="input"||t==="change")return _u(s)}function gb(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Sn=typeof Object.is=="function"?Object.is:gb;function yl(t,s){if(Sn(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),l=Object.keys(s);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var f=r[l];if(!bt.call(s,f)||!Sn(t[f],s[f]))return!1}return!0}function Yg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xg(t,s){var r=Yg(t);t=0;for(var l;r;){if(r.nodeType===3){if(l=t+r.textContent.length,t<=s&&l>=s)return{node:r,offset:s-t};t=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Yg(r)}}function Jg(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Jg(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Wg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Ai(t.document);s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=Ai(t.document)}return s}function Xd(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var yb=Vn&&"documentMode"in document&&11>=document.documentMode,Fr=null,Jd=null,vl=null,Wd=!1;function Zg(t,s,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Wd||Fr==null||Fr!==Ai(l)||(l=Fr,"selectionStart"in l&&Xd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),vl&&yl(vl,l)||(vl=l,l=oh(Jd,"onSelect"),0<l.length&&(s=new Ci("onSelect","select",null,s,r),t.push({event:s,listeners:l}),s.target=Fr)))}function Ka(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var Hr={animationend:Ka("Animation","AnimationEnd"),animationiteration:Ka("Animation","AnimationIteration"),animationstart:Ka("Animation","AnimationStart"),transitionrun:Ka("Transition","TransitionRun"),transitionstart:Ka("Transition","TransitionStart"),transitioncancel:Ka("Transition","TransitionCancel"),transitionend:Ka("Transition","TransitionEnd")},Zd={},ey={};Vn&&(ey=document.createElement("div").style,"AnimationEvent"in window||(delete Hr.animationend.animation,delete Hr.animationiteration.animation,delete Hr.animationstart.animation),"TransitionEvent"in window||delete Hr.transitionend.transition);function Ya(t){if(Zd[t])return Zd[t];if(!Hr[t])return t;var s=Hr[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in ey)return Zd[t]=s[r];return t}var ty=Ya("animationend"),ny=Ya("animationiteration"),iy=Ya("animationstart"),vb=Ya("transitionrun"),_b=Ya("transitionstart"),Eb=Ya("transitioncancel"),sy=Ya("transitionend"),ay=new Map,ef="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ef.push("scrollEnd");function ni(t,s){ay.set(t,s),Si(s,[t])}var Eu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Pn=[],Gr=0,tf=0;function Tu(){for(var t=Gr,s=tf=Gr=0;s<t;){var r=Pn[s];Pn[s++]=null;var l=Pn[s];Pn[s++]=null;var f=Pn[s];Pn[s++]=null;var m=Pn[s];if(Pn[s++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}m!==0&&ry(r,f,m)}}function Su(t,s,r,l){Pn[Gr++]=t,Pn[Gr++]=s,Pn[Gr++]=r,Pn[Gr++]=l,tf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function nf(t,s,r,l){return Su(t,s,r,l),bu(t)}function Xa(t,s){return Su(t,null,null,s),bu(t)}function ry(t,s,r){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r);for(var f=!1,m=t.return;m!==null;)m.childLanes|=r,l=m.alternate,l!==null&&(l.childLanes|=r),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&s!==null&&(f=31-yt(r),t=m.hiddenUpdates,l=t[f],l===null?t[f]=[s]:l.push(s),s.lane=r|536870912),m):null}function bu(t){if(50<zl)throw zl=0,dm=null,Error(a(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var $r={};function Tb(t,s,r,l){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(t,s,r,l){return new Tb(t,s,r,l)}function sf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Wi(t,s){var r=t.alternate;return r===null?(r=bn(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function oy(t,s){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,s=r.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Au(t,s,r,l,f,m){var _=0;if(l=t,typeof t=="function")sf(t)&&(_=1);else if(typeof t=="string")_=xA(t,r,he.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=bn(31,r,s,f),t.elementType=R,t.lanes=m,t;case G:return Ja(r.children,f,m,s);case F:_=8,f|=24;break;case te:return t=bn(12,r,s,f|2),t.elementType=te,t.lanes=m,t;case ye:return t=bn(13,r,s,f),t.elementType=ye,t.lanes=m,t;case se:return t=bn(19,r,s,f),t.elementType=se,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Q:_=10;break e;case ne:_=9;break e;case le:_=11;break e;case N:_=14;break e;case x:_=16,l=null;break e}_=29,r=Error(a(130,t===null?"null":typeof t,"")),l=null}return s=bn(_,r,s,f),s.elementType=t,s.type=l,s.lanes=m,s}function Ja(t,s,r,l){return t=bn(7,t,l,s),t.lanes=r,t}function af(t,s,r){return t=bn(6,t,null,s),t.lanes=r,t}function ly(t){var s=bn(18,null,null,0);return s.stateNode=t,s}function rf(t,s,r){return s=bn(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var cy=new WeakMap;function Ln(t,s){if(typeof t=="object"&&t!==null){var r=cy.get(t);return r!==void 0?r:(s={value:t,source:s,stack:Yo(s)},cy.set(t,s),s)}return{value:t,source:s,stack:Yo(s)}}var Qr=[],Kr=0,wu=null,_l=0,Un=[],zn=0,Us=null,Di=1,ji="";function Zi(t,s){Qr[Kr++]=_l,Qr[Kr++]=wu,wu=t,_l=s}function uy(t,s,r){Un[zn++]=Di,Un[zn++]=ji,Un[zn++]=Us,Us=t;var l=Di;t=ji;var f=32-yt(l)-1;l&=~(1<<f),r+=1;var m=32-yt(s)+f;if(30<m){var _=f-f%5;m=(l&(1<<_)-1).toString(32),l>>=_,f-=_,Di=1<<32-yt(s)+f|r<<f|l,ji=m+t}else Di=1<<m|r<<f|l,ji=t}function of(t){t.return!==null&&(Zi(t,1),uy(t,1,0))}function lf(t){for(;t===wu;)wu=Qr[--Kr],Qr[Kr]=null,_l=Qr[--Kr],Qr[Kr]=null;for(;t===Us;)Us=Un[--zn],Un[zn]=null,ji=Un[--zn],Un[zn]=null,Di=Un[--zn],Un[zn]=null}function hy(t,s){Un[zn++]=Di,Un[zn++]=ji,Un[zn++]=Us,Di=s.id,ji=s.overflow,Us=t}var Qt=null,ot=null,Be=!1,zs=null,qn=!1,cf=Error(a(519));function qs(t){var s=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw El(Ln(s,t)),cf}function dy(t){var s=t.stateNode,r=t.type,l=t.memoizedProps;switch(s[wt]=t,s[zt]=l,r){case"dialog":Ve("cancel",s),Ve("close",s);break;case"iframe":case"object":case"embed":Ve("load",s);break;case"video":case"audio":for(r=0;r<Bl.length;r++)Ve(Bl[r],s);break;case"source":Ve("error",s);break;case"img":case"image":case"link":Ve("error",s),Ve("load",s);break;case"details":Ve("toggle",s);break;case"input":Ve("invalid",s),su(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ve("invalid",s);break;case"textarea":Ve("invalid",s),js(s,l.value,l.defaultValue,l.children)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||l.suppressHydrationWarning===!0||R_(s.textContent,r)?(l.popover!=null&&(Ve("beforetoggle",s),Ve("toggle",s)),l.onScroll!=null&&Ve("scroll",s),l.onScrollEnd!=null&&Ve("scrollend",s),l.onClick!=null&&(s.onclick=Jn),s=!0):s=!1,s||qs(t,!0)}function fy(t){for(Qt=t.return;Qt;)switch(Qt.tag){case 5:case 31:case 13:qn=!1;return;case 27:case 3:qn=!0;return;default:Qt=Qt.return}}function Yr(t){if(t!==Qt)return!1;if(!Be)return fy(t),Be=!0,!1;var s=t.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||Cm(t.type,t.memoizedProps)),r=!r),r&&ot&&qs(t),fy(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));ot=L_(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));ot=L_(t)}else s===27?(s=ot,ta(t.type)?(t=jm,jm=null,ot=t):ot=s):ot=Qt?Fn(t.stateNode.nextSibling):null;return!0}function Wa(){ot=Qt=null,Be=!1}function uf(){var t=zs;return t!==null&&(pn===null?pn=t:pn.push.apply(pn,t),zs=null),t}function El(t){zs===null?zs=[t]:zs.push(t)}var hf=k(null),Za=null,es=null;function Bs(t,s,r){ce(hf,s._currentValue),s._currentValue=r}function ts(t){t._currentValue=hf.current,J(hf)}function df(t,s,r){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===r)break;t=t.return}}function ff(t,s,r,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var _=f.child;m=m.firstContext;e:for(;m!==null;){var b=m;m=f;for(var D=0;D<s.length;D++)if(b.context===s[D]){m.lanes|=r,b=m.alternate,b!==null&&(b.lanes|=r),df(m.return,r,t),l||(_=null);break e}m=b.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(a(341));_.lanes|=r,m=_.alternate,m!==null&&(m.lanes|=r),df(_,r,t),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===t){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function Xr(t,s,r,l){t=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(a(387));if(_=_.memoizedProps,_!==null){var b=f.type;Sn(f.pendingProps.value,_.value)||(t!==null?t.push(b):t=[b])}}else if(f===_e.current){if(_=f.alternate,_===null)throw Error(a(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Ql):t=[Ql])}f=f.return}t!==null&&ff(s,t,r,l),s.flags|=262144}function xu(t){for(t=t.firstContext;t!==null;){if(!Sn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function er(t){Za=t,es=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Kt(t){return my(Za,t)}function Cu(t,s){return Za===null&&er(t),my(t,s)}function my(t,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},es===null){if(t===null)throw Error(a(308));es=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else es=es.next=s;return r}var Sb=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(r,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(r){return r()})}},bb=i.unstable_scheduleCallback,Ab=i.unstable_NormalPriority,Nt={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mf(){return{controller:new Sb,data:new Map,refCount:0}}function Tl(t){t.refCount--,t.refCount===0&&bb(Ab,function(){t.controller.abort()})}var Sl=null,pf=0,Jr=0,Wr=null;function wb(t,s){if(Sl===null){var r=Sl=[];pf=0,Jr=vm(),Wr={status:"pending",value:void 0,then:function(l){r.push(l)}}}return pf++,s.then(py,py),s}function py(){if(--pf===0&&Sl!==null){Wr!==null&&(Wr.status="fulfilled");var t=Sl;Sl=null,Jr=0,Wr=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function xb(t,s){var r=[],l={status:"pending",value:null,reason:null,then:function(f){r.push(f)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var f=0;f<r.length;f++)(0,r[f])(s)},function(f){for(l.status="rejected",l.reason=f,f=0;f<r.length;f++)(0,r[f])(void 0)}),l}var gy=Y.S;Y.S=function(t,s){Zv=on(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&wb(t,s),gy!==null&&gy(t,s)};var tr=k(null);function gf(){var t=tr.current;return t!==null?t:at.pooledCache}function Nu(t,s){s===null?ce(tr,tr.current):ce(tr,s.pool)}function yy(){var t=gf();return t===null?null:{parent:Nt._currentValue,pool:t}}var Zr=Error(a(460)),yf=Error(a(474)),Ru=Error(a(542)),Iu={then:function(){}};function vy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function _y(t,s,r){switch(r=t[r],r===void 0?t.push(s):r!==s&&(s.then(Jn,Jn),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Ty(t),t;default:if(typeof s.status=="string")s.then(Jn,Jn);else{if(t=at,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=l}},function(l){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Ty(t),t}throw ir=s,Zr}}function nr(t){try{var s=t._init;return s(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(ir=r,Zr):r}}var ir=null;function Ey(){if(ir===null)throw Error(a(459));var t=ir;return ir=null,t}function Ty(t){if(t===Zr||t===Ru)throw Error(a(483))}var eo=null,bl=0;function Du(t){var s=bl;return bl+=1,eo===null&&(eo=[]),_y(eo,t,s)}function Al(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function ju(t,s){throw s.$$typeof===A?Error(a(525)):(t=Object.prototype.toString.call(s),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Sy(t){function s(U,V){if(t){var q=U.deletions;q===null?(U.deletions=[V],U.flags|=16):q.push(V)}}function r(U,V){if(!t)return null;for(;V!==null;)s(U,V),V=V.sibling;return null}function l(U){for(var V=new Map;U!==null;)U.key!==null?V.set(U.key,U):V.set(U.index,U),U=U.sibling;return V}function f(U,V){return U=Wi(U,V),U.index=0,U.sibling=null,U}function m(U,V,q){return U.index=q,t?(q=U.alternate,q!==null?(q=q.index,q<V?(U.flags|=67108866,V):q):(U.flags|=67108866,V)):(U.flags|=1048576,V)}function _(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function b(U,V,q,Z){return V===null||V.tag!==6?(V=af(q,U.mode,Z),V.return=U,V):(V=f(V,q),V.return=U,V)}function D(U,V,q,Z){var Ee=q.type;return Ee===G?X(U,V,q.props.children,Z,q.key):V!==null&&(V.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===x&&nr(Ee)===V.type)?(V=f(V,q.props),Al(V,q),V.return=U,V):(V=Au(q.type,q.key,q.props,null,U.mode,Z),Al(V,q),V.return=U,V)}function B(U,V,q,Z){return V===null||V.tag!==4||V.stateNode.containerInfo!==q.containerInfo||V.stateNode.implementation!==q.implementation?(V=rf(q,U.mode,Z),V.return=U,V):(V=f(V,q.children||[]),V.return=U,V)}function X(U,V,q,Z,Ee){return V===null||V.tag!==7?(V=Ja(q,U.mode,Z,Ee),V.return=U,V):(V=f(V,q),V.return=U,V)}function ee(U,V,q){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=af(""+V,U.mode,q),V.return=U,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case C:return q=Au(V.type,V.key,V.props,null,U.mode,q),Al(q,V),q.return=U,q;case L:return V=rf(V,U.mode,q),V.return=U,V;case x:return V=nr(V),ee(U,V,q)}if(Oe(V)||P(V))return V=Ja(V,U.mode,q,null),V.return=U,V;if(typeof V.then=="function")return ee(U,Du(V),q);if(V.$$typeof===Q)return ee(U,Cu(U,V),q);ju(U,V)}return null}function H(U,V,q,Z){var Ee=V!==null?V.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return Ee!==null?null:b(U,V,""+q,Z);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case C:return q.key===Ee?D(U,V,q,Z):null;case L:return q.key===Ee?B(U,V,q,Z):null;case x:return q=nr(q),H(U,V,q,Z)}if(Oe(q)||P(q))return Ee!==null?null:X(U,V,q,Z,null);if(typeof q.then=="function")return H(U,V,Du(q),Z);if(q.$$typeof===Q)return H(U,V,Cu(U,q),Z);ju(U,q)}return null}function K(U,V,q,Z,Ee){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return U=U.get(q)||null,b(V,U,""+Z,Ee);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case C:return U=U.get(Z.key===null?q:Z.key)||null,D(V,U,Z,Ee);case L:return U=U.get(Z.key===null?q:Z.key)||null,B(V,U,Z,Ee);case x:return Z=nr(Z),K(U,V,q,Z,Ee)}if(Oe(Z)||P(Z))return U=U.get(q)||null,X(V,U,Z,Ee,null);if(typeof Z.then=="function")return K(U,V,q,Du(Z),Ee);if(Z.$$typeof===Q)return K(U,V,q,Cu(V,Z),Ee);ju(V,Z)}return null}function pe(U,V,q,Z){for(var Ee=null,He=null,ge=V,je=V=0,Pe=null;ge!==null&&je<q.length;je++){ge.index>je?(Pe=ge,ge=null):Pe=ge.sibling;var Ge=H(U,ge,q[je],Z);if(Ge===null){ge===null&&(ge=Pe);break}t&&ge&&Ge.alternate===null&&s(U,ge),V=m(Ge,V,je),He===null?Ee=Ge:He.sibling=Ge,He=Ge,ge=Pe}if(je===q.length)return r(U,ge),Be&&Zi(U,je),Ee;if(ge===null){for(;je<q.length;je++)ge=ee(U,q[je],Z),ge!==null&&(V=m(ge,V,je),He===null?Ee=ge:He.sibling=ge,He=ge);return Be&&Zi(U,je),Ee}for(ge=l(ge);je<q.length;je++)Pe=K(ge,U,je,q[je],Z),Pe!==null&&(t&&Pe.alternate!==null&&ge.delete(Pe.key===null?je:Pe.key),V=m(Pe,V,je),He===null?Ee=Pe:He.sibling=Pe,He=Pe);return t&&ge.forEach(function(ra){return s(U,ra)}),Be&&Zi(U,je),Ee}function Se(U,V,q,Z){if(q==null)throw Error(a(151));for(var Ee=null,He=null,ge=V,je=V=0,Pe=null,Ge=q.next();ge!==null&&!Ge.done;je++,Ge=q.next()){ge.index>je?(Pe=ge,ge=null):Pe=ge.sibling;var ra=H(U,ge,Ge.value,Z);if(ra===null){ge===null&&(ge=Pe);break}t&&ge&&ra.alternate===null&&s(U,ge),V=m(ra,V,je),He===null?Ee=ra:He.sibling=ra,He=ra,ge=Pe}if(Ge.done)return r(U,ge),Be&&Zi(U,je),Ee;if(ge===null){for(;!Ge.done;je++,Ge=q.next())Ge=ee(U,Ge.value,Z),Ge!==null&&(V=m(Ge,V,je),He===null?Ee=Ge:He.sibling=Ge,He=Ge);return Be&&Zi(U,je),Ee}for(ge=l(ge);!Ge.done;je++,Ge=q.next())Ge=K(ge,U,je,Ge.value,Z),Ge!==null&&(t&&Ge.alternate!==null&&ge.delete(Ge.key===null?je:Ge.key),V=m(Ge,V,je),He===null?Ee=Ge:He.sibling=Ge,He=Ge);return t&&ge.forEach(function(PA){return s(U,PA)}),Be&&Zi(U,je),Ee}function it(U,V,q,Z){if(typeof q=="object"&&q!==null&&q.type===G&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case C:e:{for(var Ee=q.key;V!==null;){if(V.key===Ee){if(Ee=q.type,Ee===G){if(V.tag===7){r(U,V.sibling),Z=f(V,q.props.children),Z.return=U,U=Z;break e}}else if(V.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===x&&nr(Ee)===V.type){r(U,V.sibling),Z=f(V,q.props),Al(Z,q),Z.return=U,U=Z;break e}r(U,V);break}else s(U,V);V=V.sibling}q.type===G?(Z=Ja(q.props.children,U.mode,Z,q.key),Z.return=U,U=Z):(Z=Au(q.type,q.key,q.props,null,U.mode,Z),Al(Z,q),Z.return=U,U=Z)}return _(U);case L:e:{for(Ee=q.key;V!==null;){if(V.key===Ee)if(V.tag===4&&V.stateNode.containerInfo===q.containerInfo&&V.stateNode.implementation===q.implementation){r(U,V.sibling),Z=f(V,q.children||[]),Z.return=U,U=Z;break e}else{r(U,V);break}else s(U,V);V=V.sibling}Z=rf(q,U.mode,Z),Z.return=U,U=Z}return _(U);case x:return q=nr(q),it(U,V,q,Z)}if(Oe(q))return pe(U,V,q,Z);if(P(q)){if(Ee=P(q),typeof Ee!="function")throw Error(a(150));return q=Ee.call(q),Se(U,V,q,Z)}if(typeof q.then=="function")return it(U,V,Du(q),Z);if(q.$$typeof===Q)return it(U,V,Cu(U,q),Z);ju(U,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,V!==null&&V.tag===6?(r(U,V.sibling),Z=f(V,q),Z.return=U,U=Z):(r(U,V),Z=af(q,U.mode,Z),Z.return=U,U=Z),_(U)):r(U,V)}return function(U,V,q,Z){try{bl=0;var Ee=it(U,V,q,Z);return eo=null,Ee}catch(ge){if(ge===Zr||ge===Ru)throw ge;var He=bn(29,ge,null,U.mode);return He.lanes=Z,He.return=U,He}finally{}}}var sr=Sy(!0),by=Sy(!1),Fs=!1;function vf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _f(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Hs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Gs(t,s,r){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ke&2)!==0){var f=l.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),l.pending=s,s=bu(t),ry(t,null,r),s}return Su(t,l,s,r),bu(t)}function wl(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,r|=l,s.lanes=r,Wo(t,r)}}function Ef(t,s){var r=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var f=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var _={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?f=m=_:m=m.next=_,r=r.next}while(r!==null);m===null?f=m=s:m=m.next=s}else f=m=s;r={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}var Tf=!1;function xl(){if(Tf){var t=Wr;if(t!==null)throw t}}function Cl(t,s,r,l){Tf=!1;var f=t.updateQueue;Fs=!1;var m=f.firstBaseUpdate,_=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var D=b,B=D.next;D.next=null,_===null?m=B:_.next=B,_=D;var X=t.alternate;X!==null&&(X=X.updateQueue,b=X.lastBaseUpdate,b!==_&&(b===null?X.firstBaseUpdate=B:b.next=B,X.lastBaseUpdate=D))}if(m!==null){var ee=f.baseState;_=0,X=B=D=null,b=m;do{var H=b.lane&-536870913,K=H!==b.lane;if(K?(ke&H)===H:(l&H)===H){H!==0&&H===Jr&&(Tf=!0),X!==null&&(X=X.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var pe=t,Se=b;H=s;var it=r;switch(Se.tag){case 1:if(pe=Se.payload,typeof pe=="function"){ee=pe.call(it,ee,H);break e}ee=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=Se.payload,H=typeof pe=="function"?pe.call(it,ee,H):pe,H==null)break e;ee=S({},ee,H);break e;case 2:Fs=!0}}H=b.callback,H!==null&&(t.flags|=64,K&&(t.flags|=8192),K=f.callbacks,K===null?f.callbacks=[H]:K.push(H))}else K={lane:H,tag:b.tag,payload:b.payload,callback:b.callback,next:null},X===null?(B=X=K,D=ee):X=X.next=K,_|=H;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;K=b,b=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);X===null&&(D=ee),f.baseState=D,f.firstBaseUpdate=B,f.lastBaseUpdate=X,m===null&&(f.shared.lanes=0),Xs|=_,t.lanes=_,t.memoizedState=ee}}function Ay(t,s){if(typeof t!="function")throw Error(a(191,t));t.call(s)}function wy(t,s){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)Ay(r[t],s)}var to=k(null),Ou=k(0);function xy(t,s){t=us,ce(Ou,t),ce(to,s),us=t|s.baseLanes}function Sf(){ce(Ou,us),ce(to,to.current)}function bf(){us=Ou.current,J(to),J(Ou)}var An=k(null),Bn=null;function $s(t){var s=t.alternate;ce(_t,_t.current&1),ce(An,t),Bn===null&&(s===null||to.current!==null||s.memoizedState!==null)&&(Bn=t)}function Af(t){ce(_t,_t.current),ce(An,t),Bn===null&&(Bn=t)}function Cy(t){t.tag===22?(ce(_t,_t.current),ce(An,t),Bn===null&&(Bn=t)):Qs()}function Qs(){ce(_t,_t.current),ce(An,An.current)}function wn(t){J(An),Bn===t&&(Bn=null),J(_t)}var _t=k(0);function Mu(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Im(r)||Dm(r)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ns=0,Ie=null,tt=null,Rt=null,Vu=!1,no=!1,ar=!1,ku=0,Nl=0,io=null,Cb=0;function pt(){throw Error(a(321))}function wf(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!Sn(t[r],s[r]))return!1;return!0}function xf(t,s,r,l,f,m){return ns=m,Ie=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Y.H=t===null||t.memoizedState===null?uv:qf,ar=!1,m=r(l,f),ar=!1,no&&(m=Ry(s,r,l,f)),Ny(t),m}function Ny(t){Y.H=Dl;var s=tt!==null&&tt.next!==null;if(ns=0,Rt=tt=Ie=null,Vu=!1,Nl=0,io=null,s)throw Error(a(300));t===null||It||(t=t.dependencies,t!==null&&xu(t)&&(It=!0))}function Ry(t,s,r,l){Ie=t;var f=0;do{if(no&&(io=null),Nl=0,no=!1,25<=f)throw Error(a(301));if(f+=1,Rt=tt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Y.H=hv,m=s(r,l)}while(no);return m}function Nb(){var t=Y.H,s=t.useState()[0];return s=typeof s.then=="function"?Rl(s):s,t=t.useState()[0],(tt!==null?tt.memoizedState:null)!==t&&(Ie.flags|=1024),s}function Cf(){var t=ku!==0;return ku=0,t}function Nf(t,s,r){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~r}function Rf(t){if(Vu){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Vu=!1}ns=0,Rt=tt=Ie=null,no=!1,Nl=ku=0,io=null}function cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?Ie.memoizedState=Rt=t:Rt=Rt.next=t,Rt}function Et(){if(tt===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=tt.next;var s=Rt===null?Ie.memoizedState:Rt.next;if(s!==null)Rt=s,tt=t;else{if(t===null)throw Ie.alternate===null?Error(a(467)):Error(a(310));tt=t,t={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Rt===null?Ie.memoizedState=Rt=t:Rt=Rt.next=t}return Rt}function Pu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rl(t){var s=Nl;return Nl+=1,io===null&&(io=[]),t=_y(io,t,s),s=Ie,(Rt===null?s.memoizedState:Rt.next)===null&&(s=s.alternate,Y.H=s===null||s.memoizedState===null?uv:qf),t}function Lu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Rl(t);if(t.$$typeof===Q)return Kt(t)}throw Error(a(438,String(t)))}function If(t){var s=null,r=Ie.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var l=Ie.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=Pu(),Ie.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(t),l=0;l<t;l++)r[l]=M;return s.index++,r}function is(t,s){return typeof s=="function"?s(t):s}function Uu(t){var s=Et();return Df(s,tt,t)}function Df(t,s,r){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=r;var f=t.baseQueue,m=l.pending;if(m!==null){if(f!==null){var _=f.next;f.next=m.next,m.next=_}s.baseQueue=f=m,l.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{s=f.next;var b=_=null,D=null,B=s,X=!1;do{var ee=B.lane&-536870913;if(ee!==B.lane?(ke&ee)===ee:(ns&ee)===ee){var H=B.revertLane;if(H===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),ee===Jr&&(X=!0);else if((ns&H)===H){B=B.next,H===Jr&&(X=!0);continue}else ee={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},D===null?(b=D=ee,_=m):D=D.next=ee,Ie.lanes|=H,Xs|=H;ee=B.action,ar&&r(m,ee),m=B.hasEagerState?B.eagerState:r(m,ee)}else H={lane:ee,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},D===null?(b=D=H,_=m):D=D.next=H,Ie.lanes|=ee,Xs|=ee;B=B.next}while(B!==null&&B!==s);if(D===null?_=m:D.next=b,!Sn(m,t.memoizedState)&&(It=!0,X&&(r=Wr,r!==null)))throw r;t.memoizedState=m,t.baseState=_,t.baseQueue=D,l.lastRenderedState=m}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function jf(t){var s=Et(),r=s.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=t;var l=r.dispatch,f=r.pending,m=s.memoizedState;if(f!==null){r.pending=null;var _=f=f.next;do m=t(m,_.action),_=_.next;while(_!==f);Sn(m,s.memoizedState)||(It=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),r.lastRenderedState=m}return[m,l]}function Iy(t,s,r){var l=Ie,f=Et(),m=Be;if(m){if(r===void 0)throw Error(a(407));r=r()}else r=s();var _=!Sn((tt||f).memoizedState,r);if(_&&(f.memoizedState=r,It=!0),f=f.queue,Vf(Oy.bind(null,l,f,t),[t]),f.getSnapshot!==s||_||Rt!==null&&Rt.memoizedState.tag&1){if(l.flags|=2048,so(9,{destroy:void 0},jy.bind(null,l,f,r,s),null),at===null)throw Error(a(349));m||(ns&127)!==0||Dy(l,s,r)}return r}function Dy(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=Ie.updateQueue,s===null?(s=Pu(),Ie.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function jy(t,s,r,l){s.value=r,s.getSnapshot=l,My(s)&&Vy(t)}function Oy(t,s,r){return r(function(){My(s)&&Vy(t)})}function My(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!Sn(t,r)}catch{return!0}}function Vy(t){var s=Xa(t,2);s!==null&&gn(s,t,2)}function Of(t){var s=cn();if(typeof t=="function"){var r=t;if(t=r(),ar){jn(!0);try{r()}finally{jn(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:t},s}function ky(t,s,r,l){return t.baseState=r,Df(t,tt,typeof l=="function"?l:is)}function Rb(t,s,r,l,f){if(Bu(t))throw Error(a(485));if(t=s.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};Y.T!==null?r(!0):m.isTransition=!1,l(m),r=s.pending,r===null?(m.next=s.pending=m,Py(s,m)):(m.next=r.next,s.pending=r.next=m)}}function Py(t,s){var r=s.action,l=s.payload,f=t.state;if(s.isTransition){var m=Y.T,_={};Y.T=_;try{var b=r(f,l),D=Y.S;D!==null&&D(_,b),Ly(t,s,b)}catch(B){Mf(t,s,B)}finally{m!==null&&_.types!==null&&(m.types=_.types),Y.T=m}}else try{m=r(f,l),Ly(t,s,m)}catch(B){Mf(t,s,B)}}function Ly(t,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){Uy(t,s,l)},function(l){return Mf(t,s,l)}):Uy(t,s,r)}function Uy(t,s,r){s.status="fulfilled",s.value=r,zy(s),t.state=r,s=t.pending,s!==null&&(r=s.next,r===s?t.pending=null:(r=r.next,s.next=r,Py(t,r)))}function Mf(t,s,r){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=r,zy(s),s=s.next;while(s!==l)}t.action=null}function zy(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function qy(t,s){return s}function By(t,s){if(Be){var r=at.formState;if(r!==null){e:{var l=Ie;if(Be){if(ot){t:{for(var f=ot,m=qn;f.nodeType!==8;){if(!m){f=null;break t}if(f=Fn(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){ot=Fn(f.nextSibling),l=f.data==="F!";break e}}qs(l)}l=!1}l&&(s=r[0])}}return r=cn(),r.memoizedState=r.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qy,lastRenderedState:s},r.queue=l,r=ov.bind(null,Ie,l),l.dispatch=r,l=Of(!1),m=zf.bind(null,Ie,!1,l.queue),l=cn(),f={state:s,dispatch:null,action:t,pending:null},l.queue=f,r=Rb.bind(null,Ie,f,m,r),f.dispatch=r,l.memoizedState=t,[s,r,!1]}function Fy(t){var s=Et();return Hy(s,tt,t)}function Hy(t,s,r){if(s=Df(t,s,qy)[0],t=Uu(is)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Rl(s)}catch(_){throw _===Zr?Ru:_}else l=s;s=Et();var f=s.queue,m=f.dispatch;return r!==s.memoizedState&&(Ie.flags|=2048,so(9,{destroy:void 0},Ib.bind(null,f,r),null)),[l,m,t]}function Ib(t,s){t.action=s}function Gy(t){var s=Et(),r=tt;if(r!==null)return Hy(s,r,t);Et(),s=s.memoizedState,r=Et();var l=r.queue.dispatch;return r.memoizedState=t,[s,l,!1]}function so(t,s,r,l){return t={tag:t,create:r,deps:l,inst:s,next:null},s=Ie.updateQueue,s===null&&(s=Pu(),Ie.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=t.next=t:(l=r.next,r.next=t,t.next=l,s.lastEffect=t),t}function $y(){return Et().memoizedState}function zu(t,s,r,l){var f=cn();Ie.flags|=t,f.memoizedState=so(1|s,{destroy:void 0},r,l===void 0?null:l)}function qu(t,s,r,l){var f=Et();l=l===void 0?null:l;var m=f.memoizedState.inst;tt!==null&&l!==null&&wf(l,tt.memoizedState.deps)?f.memoizedState=so(s,m,r,l):(Ie.flags|=t,f.memoizedState=so(1|s,m,r,l))}function Qy(t,s){zu(8390656,8,t,s)}function Vf(t,s){qu(2048,8,t,s)}function Db(t){Ie.flags|=4;var s=Ie.updateQueue;if(s===null)s=Pu(),Ie.updateQueue=s,s.events=[t];else{var r=s.events;r===null?s.events=[t]:r.push(t)}}function Ky(t){var s=Et().memoizedState;return Db({ref:s,nextImpl:t}),function(){if((Ke&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}function Yy(t,s){return qu(4,2,t,s)}function Xy(t,s){return qu(4,4,t,s)}function Jy(t,s){if(typeof s=="function"){t=t();var r=s(t);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Wy(t,s,r){r=r!=null?r.concat([t]):null,qu(4,4,Jy.bind(null,s,t),r)}function kf(){}function Zy(t,s){var r=Et();s=s===void 0?null:s;var l=r.memoizedState;return s!==null&&wf(s,l[1])?l[0]:(r.memoizedState=[t,s],t)}function ev(t,s){var r=Et();s=s===void 0?null:s;var l=r.memoizedState;if(s!==null&&wf(s,l[1]))return l[0];if(l=t(),ar){jn(!0);try{t()}finally{jn(!1)}}return r.memoizedState=[l,s],l}function Pf(t,s,r){return r===void 0||(ns&1073741824)!==0&&(ke&261930)===0?t.memoizedState=s:(t.memoizedState=r,t=t_(),Ie.lanes|=t,Xs|=t,r)}function tv(t,s,r,l){return Sn(r,s)?r:to.current!==null?(t=Pf(t,r,l),Sn(t,s)||(It=!0),t):(ns&42)===0||(ns&1073741824)!==0&&(ke&261930)===0?(It=!0,t.memoizedState=r):(t=t_(),Ie.lanes|=t,Xs|=t,s)}function nv(t,s,r,l,f){var m=re.p;re.p=m!==0&&8>m?m:8;var _=Y.T,b={};Y.T=b,zf(t,!1,s,r);try{var D=f(),B=Y.S;if(B!==null&&B(b,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var X=xb(D,l);Il(t,s,X,Nn(t))}else Il(t,s,l,Nn(t))}catch(ee){Il(t,s,{then:function(){},status:"rejected",reason:ee},Nn())}finally{re.p=m,_!==null&&b.types!==null&&(_.types=b.types),Y.T=_}}function jb(){}function Lf(t,s,r,l){if(t.tag!==5)throw Error(a(476));var f=iv(t).queue;nv(t,f,s,ve,r===null?jb:function(){return sv(t),r(l)})}function iv(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:ve},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:r},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function sv(t){var s=iv(t);s.next===null&&(s=t.alternate.memoizedState),Il(t,s.next.queue,{},Nn())}function Uf(){return Kt(Ql)}function av(){return Et().memoizedState}function rv(){return Et().memoizedState}function Ob(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var r=Nn();t=Hs(r);var l=Gs(s,t,r);l!==null&&(gn(l,s,r),wl(l,s,r)),s={cache:mf()},t.payload=s;return}s=s.return}}function Mb(t,s,r){var l=Nn();r={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Bu(t)?lv(s,r):(r=nf(t,s,r,l),r!==null&&(gn(r,t,l),cv(r,s,l)))}function ov(t,s,r){var l=Nn();Il(t,s,r,l)}function Il(t,s,r,l){var f={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Bu(t))lv(s,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var _=s.lastRenderedState,b=m(_,r);if(f.hasEagerState=!0,f.eagerState=b,Sn(b,_))return Su(t,s,f,0),at===null&&Tu(),!1}catch{}finally{}if(r=nf(t,s,f,l),r!==null)return gn(r,t,l),cv(r,s,l),!0}return!1}function zf(t,s,r,l){if(l={lane:2,revertLane:vm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Bu(t)){if(s)throw Error(a(479))}else s=nf(t,r,l,2),s!==null&&gn(s,t,2)}function Bu(t){var s=t.alternate;return t===Ie||s!==null&&s===Ie}function lv(t,s){no=Vu=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function cv(t,s,r){if((r&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,r|=l,s.lanes=r,Wo(t,r)}}var Dl={readContext:Kt,use:Lu,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt};Dl.useEffectEvent=pt;var uv={readContext:Kt,use:Lu,useCallback:function(t,s){return cn().memoizedState=[t,s===void 0?null:s],t},useContext:Kt,useEffect:Qy,useImperativeHandle:function(t,s,r){r=r!=null?r.concat([t]):null,zu(4194308,4,Jy.bind(null,s,t),r)},useLayoutEffect:function(t,s){return zu(4194308,4,t,s)},useInsertionEffect:function(t,s){zu(4,2,t,s)},useMemo:function(t,s){var r=cn();s=s===void 0?null:s;var l=t();if(ar){jn(!0);try{t()}finally{jn(!1)}}return r.memoizedState=[l,s],l},useReducer:function(t,s,r){var l=cn();if(r!==void 0){var f=r(s);if(ar){jn(!0);try{r(s)}finally{jn(!1)}}}else f=s;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=Mb.bind(null,Ie,t),[l.memoizedState,t]},useRef:function(t){var s=cn();return t={current:t},s.memoizedState=t},useState:function(t){t=Of(t);var s=t.queue,r=ov.bind(null,Ie,s);return s.dispatch=r,[t.memoizedState,r]},useDebugValue:kf,useDeferredValue:function(t,s){var r=cn();return Pf(r,t,s)},useTransition:function(){var t=Of(!1);return t=nv.bind(null,Ie,t.queue,!0,!1),cn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,r){var l=Ie,f=cn();if(Be){if(r===void 0)throw Error(a(407));r=r()}else{if(r=s(),at===null)throw Error(a(349));(ke&127)!==0||Dy(l,s,r)}f.memoizedState=r;var m={value:r,getSnapshot:s};return f.queue=m,Qy(Oy.bind(null,l,m,t),[t]),l.flags|=2048,so(9,{destroy:void 0},jy.bind(null,l,m,r,s),null),r},useId:function(){var t=cn(),s=at.identifierPrefix;if(Be){var r=ji,l=Di;r=(l&~(1<<32-yt(l)-1)).toString(32)+r,s="_"+s+"R_"+r,r=ku++,0<r&&(s+="H"+r.toString(32)),s+="_"}else r=Cb++,s="_"+s+"r_"+r.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Uf,useFormState:By,useActionState:By,useOptimistic:function(t){var s=cn();s.memoizedState=s.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=zf.bind(null,Ie,!0,r),r.dispatch=s,[t,s]},useMemoCache:If,useCacheRefresh:function(){return cn().memoizedState=Ob.bind(null,Ie)},useEffectEvent:function(t){var s=cn(),r={impl:t};return s.memoizedState=r,function(){if((Ke&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}},qf={readContext:Kt,use:Lu,useCallback:Zy,useContext:Kt,useEffect:Vf,useImperativeHandle:Wy,useInsertionEffect:Yy,useLayoutEffect:Xy,useMemo:ev,useReducer:Uu,useRef:$y,useState:function(){return Uu(is)},useDebugValue:kf,useDeferredValue:function(t,s){var r=Et();return tv(r,tt.memoizedState,t,s)},useTransition:function(){var t=Uu(is)[0],s=Et().memoizedState;return[typeof t=="boolean"?t:Rl(t),s]},useSyncExternalStore:Iy,useId:av,useHostTransitionStatus:Uf,useFormState:Fy,useActionState:Fy,useOptimistic:function(t,s){var r=Et();return ky(r,tt,t,s)},useMemoCache:If,useCacheRefresh:rv};qf.useEffectEvent=Ky;var hv={readContext:Kt,use:Lu,useCallback:Zy,useContext:Kt,useEffect:Vf,useImperativeHandle:Wy,useInsertionEffect:Yy,useLayoutEffect:Xy,useMemo:ev,useReducer:jf,useRef:$y,useState:function(){return jf(is)},useDebugValue:kf,useDeferredValue:function(t,s){var r=Et();return tt===null?Pf(r,t,s):tv(r,tt.memoizedState,t,s)},useTransition:function(){var t=jf(is)[0],s=Et().memoizedState;return[typeof t=="boolean"?t:Rl(t),s]},useSyncExternalStore:Iy,useId:av,useHostTransitionStatus:Uf,useFormState:Gy,useActionState:Gy,useOptimistic:function(t,s){var r=Et();return tt!==null?ky(r,tt,t,s):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:If,useCacheRefresh:rv};hv.useEffectEvent=Ky;function Bf(t,s,r,l){s=t.memoizedState,r=r(l,s),r=r==null?s:S({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ff={enqueueSetState:function(t,s,r){t=t._reactInternals;var l=Nn(),f=Hs(l);f.payload=s,r!=null&&(f.callback=r),s=Gs(t,f,l),s!==null&&(gn(s,t,l),wl(s,t,l))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var l=Nn(),f=Hs(l);f.tag=1,f.payload=s,r!=null&&(f.callback=r),s=Gs(t,f,l),s!==null&&(gn(s,t,l),wl(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=Nn(),l=Hs(r);l.tag=2,s!=null&&(l.callback=s),s=Gs(t,l,r),s!==null&&(gn(s,t,r),wl(s,t,r))}};function dv(t,s,r,l,f,m,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,_):s.prototype&&s.prototype.isPureReactComponent?!yl(r,l)||!yl(f,m):!0}function fv(t,s,r,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,l),s.state!==t&&Ff.enqueueReplaceState(s,s.state,null)}function rr(t,s){var r=s;if("ref"in s){r={};for(var l in s)l!=="ref"&&(r[l]=s[l])}if(t=t.defaultProps){r===s&&(r=S({},r));for(var f in t)r[f]===void 0&&(r[f]=t[f])}return r}function mv(t){Eu(t)}function pv(t){console.error(t)}function gv(t){Eu(t)}function Fu(t,s){try{var r=t.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function yv(t,s,r){try{var l=t.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Hf(t,s,r){return r=Hs(r),r.tag=3,r.payload={element:null},r.callback=function(){Fu(t,s)},r}function vv(t){return t=Hs(t),t.tag=3,t}function _v(t,s,r,l){var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;t.payload=function(){return f(m)},t.callback=function(){yv(s,r,l)}}var _=r.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){yv(s,r,l),typeof f!="function"&&(Js===null?Js=new Set([this]):Js.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function Vb(t,s,r,l,f){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=r.alternate,s!==null&&Xr(s,r,f,!0),r=An.current,r!==null){switch(r.tag){case 31:case 13:return Bn===null?th():r.alternate===null&&gt===0&&(gt=3),r.flags&=-257,r.flags|=65536,r.lanes=f,l===Iu?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([l]):s.add(l),pm(t,l,f)),!1;case 22:return r.flags|=65536,l===Iu?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([l]):r.add(l)),pm(t,l,f)),!1}throw Error(a(435,r.tag))}return pm(t,l,f),th(),!1}if(Be)return s=An.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,l!==cf&&(t=Error(a(422),{cause:l}),El(Ln(t,r)))):(l!==cf&&(s=Error(a(423),{cause:l}),El(Ln(s,r))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=Ln(l,r),f=Hf(t.stateNode,l,f),Ef(t,f),gt!==4&&(gt=2)),!1;var m=Error(a(520),{cause:l});if(m=Ln(m,r),Ul===null?Ul=[m]:Ul.push(m),gt!==4&&(gt=2),s===null)return!0;l=Ln(l,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,t=f&-f,r.lanes|=t,t=Hf(r.stateNode,l,t),Ef(r,t),!1;case 1:if(s=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Js===null||!Js.has(m))))return r.flags|=65536,f&=-f,r.lanes|=f,f=vv(f),_v(f,t,r,l),Ef(r,f),!1}r=r.return}while(r!==null);return!1}var Gf=Error(a(461)),It=!1;function Yt(t,s,r,l){s.child=t===null?by(s,null,r,l):sr(s,t.child,r,l)}function Ev(t,s,r,l,f){r=r.render;var m=s.ref;if("ref"in l){var _={};for(var b in l)b!=="ref"&&(_[b]=l[b])}else _=l;return er(s),l=xf(t,s,r,_,m,f),b=Cf(),t!==null&&!It?(Nf(t,s,f),ss(t,s,f)):(Be&&b&&of(s),s.flags|=1,Yt(t,s,l,f),s.child)}function Tv(t,s,r,l,f){if(t===null){var m=r.type;return typeof m=="function"&&!sf(m)&&m.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=m,Sv(t,s,m,l,f)):(t=Au(r.type,null,l,s,s.mode,f),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!Zf(t,f)){var _=m.memoizedProps;if(r=r.compare,r=r!==null?r:yl,r(_,l)&&t.ref===s.ref)return ss(t,s,f)}return s.flags|=1,t=Wi(m,l),t.ref=s.ref,t.return=s,s.child=t}function Sv(t,s,r,l,f){if(t!==null){var m=t.memoizedProps;if(yl(m,l)&&t.ref===s.ref)if(It=!1,s.pendingProps=l=m,Zf(t,f))(t.flags&131072)!==0&&(It=!0);else return s.lanes=t.lanes,ss(t,s,f)}return $f(t,s,r,l,f)}function bv(t,s,r,l){var f=l.children,m=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|r:r,t!==null){for(l=s.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~m}else l=0,s.child=null;return Av(t,s,m,r,l)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Nu(s,m!==null?m.cachePool:null),m!==null?xy(s,m):Sf(),Cy(s);else return l=s.lanes=536870912,Av(t,s,m!==null?m.baseLanes|r:r,r,l)}else m!==null?(Nu(s,m.cachePool),xy(s,m),Qs(),s.memoizedState=null):(t!==null&&Nu(s,null),Sf(),Qs());return Yt(t,s,f,r),s.child}function jl(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Av(t,s,r,l,f){var m=gf();return m=m===null?null:{parent:Nt._currentValue,pool:m},s.memoizedState={baseLanes:r,cachePool:m},t!==null&&Nu(s,null),Sf(),Cy(s),t!==null&&Xr(t,s,l,!0),s.childLanes=f,null}function Hu(t,s){return s=$u({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function wv(t,s,r){return sr(s,t.child,null,r),t=Hu(s,s.pendingProps),t.flags|=2,wn(s),s.memoizedState=null,t}function kb(t,s,r){var l=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(Be){if(l.mode==="hidden")return t=Hu(s,l),s.lanes=536870912,jl(null,t);if(Af(s),(t=ot)?(t=P_(t,qn),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Us!==null?{id:Di,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},r=ly(t),r.return=s,s.child=r,Qt=s,ot=null)):t=null,t===null)throw qs(s);return s.lanes=536870912,null}return Hu(s,l)}var m=t.memoizedState;if(m!==null){var _=m.dehydrated;if(Af(s),f)if(s.flags&256)s.flags&=-257,s=wv(t,s,r);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(a(558));else if(It||Xr(t,s,r,!1),f=(r&t.childLanes)!==0,It||f){if(l=at,l!==null&&(_=Zo(l,r),_!==0&&_!==m.retryLane))throw m.retryLane=_,Xa(t,_),gn(l,t,_),Gf;th(),s=wv(t,s,r)}else t=m.treeContext,ot=Fn(_.nextSibling),Qt=s,Be=!0,zs=null,qn=!1,t!==null&&hy(s,t),s=Hu(s,l),s.flags|=4096;return s}return t=Wi(t.child,{mode:l.mode,children:l.children}),t.ref=s.ref,s.child=t,t.return=s,t}function Gu(t,s){var r=s.ref;if(r===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(a(284));(t===null||t.ref!==r)&&(s.flags|=4194816)}}function $f(t,s,r,l,f){return er(s),r=xf(t,s,r,l,void 0,f),l=Cf(),t!==null&&!It?(Nf(t,s,f),ss(t,s,f)):(Be&&l&&of(s),s.flags|=1,Yt(t,s,r,f),s.child)}function xv(t,s,r,l,f,m){return er(s),s.updateQueue=null,r=Ry(s,l,r,f),Ny(t),l=Cf(),t!==null&&!It?(Nf(t,s,m),ss(t,s,m)):(Be&&l&&of(s),s.flags|=1,Yt(t,s,r,m),s.child)}function Cv(t,s,r,l,f){if(er(s),s.stateNode===null){var m=$r,_=r.contextType;typeof _=="object"&&_!==null&&(m=Kt(_)),m=new r(l,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Ff,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=l,m.state=s.memoizedState,m.refs={},vf(s),_=r.contextType,m.context=typeof _=="object"&&_!==null?Kt(_):$r,m.state=s.memoizedState,_=r.getDerivedStateFromProps,typeof _=="function"&&(Bf(s,r,_,l),m.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&Ff.enqueueReplaceState(m,m.state,null),Cl(s,l,m,f),xl(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){m=s.stateNode;var b=s.memoizedProps,D=rr(r,b);m.props=D;var B=m.context,X=r.contextType;_=$r,typeof X=="object"&&X!==null&&(_=Kt(X));var ee=r.getDerivedStateFromProps;X=typeof ee=="function"||typeof m.getSnapshotBeforeUpdate=="function",b=s.pendingProps!==b,X||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b||B!==_)&&fv(s,m,l,_),Fs=!1;var H=s.memoizedState;m.state=H,Cl(s,l,m,f),xl(),B=s.memoizedState,b||H!==B||Fs?(typeof ee=="function"&&(Bf(s,r,ee,l),B=s.memoizedState),(D=Fs||dv(s,r,D,l,H,B,_))?(X||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=B),m.props=l,m.state=B,m.context=_,l=D):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{m=s.stateNode,_f(t,s),_=s.memoizedProps,X=rr(r,_),m.props=X,ee=s.pendingProps,H=m.context,B=r.contextType,D=$r,typeof B=="object"&&B!==null&&(D=Kt(B)),b=r.getDerivedStateFromProps,(B=typeof b=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==ee||H!==D)&&fv(s,m,l,D),Fs=!1,H=s.memoizedState,m.state=H,Cl(s,l,m,f),xl();var K=s.memoizedState;_!==ee||H!==K||Fs||t!==null&&t.dependencies!==null&&xu(t.dependencies)?(typeof b=="function"&&(Bf(s,r,b,l),K=s.memoizedState),(X=Fs||dv(s,r,X,l,H,K,D)||t!==null&&t.dependencies!==null&&xu(t.dependencies))?(B||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,K,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,K,D)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=K),m.props=l,m.state=K,m.context=D,l=X):(typeof m.componentDidUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(s.flags|=1024),l=!1)}return m=l,Gu(t,s),l=(s.flags&128)!==0,m||l?(m=s.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&l?(s.child=sr(s,t.child,null,f),s.child=sr(s,null,r,f)):Yt(t,s,r,f),s.memoizedState=m.state,t=s.child):t=ss(t,s,f),t}function Nv(t,s,r,l){return Wa(),s.flags|=256,Yt(t,s,r,l),s.child}var Qf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kf(t){return{baseLanes:t,cachePool:yy()}}function Yf(t,s,r){return t=t!==null?t.childLanes&~r:0,s&&(t|=Cn),t}function Rv(t,s,r){var l=s.pendingProps,f=!1,m=(s.flags&128)!==0,_;if((_=m)||(_=t!==null&&t.memoizedState===null?!1:(_t.current&2)!==0),_&&(f=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,t===null){if(Be){if(f?$s(s):Qs(),(t=ot)?(t=P_(t,qn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Us!==null?{id:Di,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},r=ly(t),r.return=s,s.child=r,Qt=s,ot=null)):t=null,t===null)throw qs(s);return Dm(t)?s.lanes=32:s.lanes=536870912,null}var b=l.children;return l=l.fallback,f?(Qs(),f=s.mode,b=$u({mode:"hidden",children:b},f),l=Ja(l,f,r,null),b.return=s,l.return=s,b.sibling=l,s.child=b,l=s.child,l.memoizedState=Kf(r),l.childLanes=Yf(t,_,r),s.memoizedState=Qf,jl(null,l)):($s(s),Xf(s,b))}var D=t.memoizedState;if(D!==null&&(b=D.dehydrated,b!==null)){if(m)s.flags&256?($s(s),s.flags&=-257,s=Jf(t,s,r)):s.memoizedState!==null?(Qs(),s.child=t.child,s.flags|=128,s=null):(Qs(),b=l.fallback,f=s.mode,l=$u({mode:"visible",children:l.children},f),b=Ja(b,f,r,null),b.flags|=2,l.return=s,b.return=s,l.sibling=b,s.child=l,sr(s,t.child,null,r),l=s.child,l.memoizedState=Kf(r),l.childLanes=Yf(t,_,r),s.memoizedState=Qf,s=jl(null,l));else if($s(s),Dm(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var B=_.dgst;_=B,l=Error(a(419)),l.stack="",l.digest=_,El({value:l,source:null,stack:null}),s=Jf(t,s,r)}else if(It||Xr(t,s,r,!1),_=(r&t.childLanes)!==0,It||_){if(_=at,_!==null&&(l=Zo(_,r),l!==0&&l!==D.retryLane))throw D.retryLane=l,Xa(t,l),gn(_,t,l),Gf;Im(b)||th(),s=Jf(t,s,r)}else Im(b)?(s.flags|=192,s.child=t.child,s=null):(t=D.treeContext,ot=Fn(b.nextSibling),Qt=s,Be=!0,zs=null,qn=!1,t!==null&&hy(s,t),s=Xf(s,l.children),s.flags|=4096);return s}return f?(Qs(),b=l.fallback,f=s.mode,D=t.child,B=D.sibling,l=Wi(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,B!==null?b=Wi(B,b):(b=Ja(b,f,r,null),b.flags|=2),b.return=s,l.return=s,l.sibling=b,s.child=l,jl(null,l),l=s.child,b=t.child.memoizedState,b===null?b=Kf(r):(f=b.cachePool,f!==null?(D=Nt._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=yy(),b={baseLanes:b.baseLanes|r,cachePool:f}),l.memoizedState=b,l.childLanes=Yf(t,_,r),s.memoizedState=Qf,jl(t.child,l)):($s(s),r=t.child,t=r.sibling,r=Wi(r,{mode:"visible",children:l.children}),r.return=s,r.sibling=null,t!==null&&(_=s.deletions,_===null?(s.deletions=[t],s.flags|=16):_.push(t)),s.child=r,s.memoizedState=null,r)}function Xf(t,s){return s=$u({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function $u(t,s){return t=bn(22,t,null,s),t.lanes=0,t}function Jf(t,s,r){return sr(s,t.child,null,r),t=Xf(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Iv(t,s,r){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),df(t.return,s,r)}function Wf(t,s,r,l,f,m){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:f,treeForkCount:m}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=r,_.tailMode=f,_.treeForkCount=m)}function Dv(t,s,r){var l=s.pendingProps,f=l.revealOrder,m=l.tail;l=l.children;var _=_t.current,b=(_&2)!==0;if(b?(_=_&1|2,s.flags|=128):_&=1,ce(_t,_),Yt(t,s,l,r),l=Be?_l:0,!b&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Iv(t,r,s);else if(t.tag===19)Iv(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(r=s.child,f=null;r!==null;)t=r.alternate,t!==null&&Mu(t)===null&&(f=r),r=r.sibling;r=f,r===null?(f=s.child,s.child=null):(f=r.sibling,r.sibling=null),Wf(s,!1,f,r,m,l);break;case"backwards":case"unstable_legacy-backwards":for(r=null,f=s.child,s.child=null;f!==null;){if(t=f.alternate,t!==null&&Mu(t)===null){s.child=f;break}t=f.sibling,f.sibling=r,r=f,f=t}Wf(s,!0,r,null,m,l);break;case"together":Wf(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function ss(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),Xs|=s.lanes,(r&s.childLanes)===0)if(t!==null){if(Xr(t,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(a(153));if(s.child!==null){for(t=s.child,r=Wi(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=Wi(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function Zf(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&xu(t)))}function Pb(t,s,r){switch(s.tag){case 3:dt(s,s.stateNode.containerInfo),Bs(s,Nt,t.memoizedState.cache),Wa();break;case 27:case 5:ja(s);break;case 4:dt(s,s.stateNode.containerInfo);break;case 10:Bs(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Af(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?($s(s),s.flags|=128,null):(r&s.child.childLanes)!==0?Rv(t,s,r):($s(s),t=ss(t,s,r),t!==null?t.sibling:null);$s(s);break;case 19:var f=(t.flags&128)!==0;if(l=(r&s.childLanes)!==0,l||(Xr(t,s,r,!1),l=(r&s.childLanes)!==0),f){if(l)return Dv(t,s,r);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ce(_t,_t.current),l)break;return null;case 22:return s.lanes=0,bv(t,s,r,s.pendingProps);case 24:Bs(s,Nt,t.memoizedState.cache)}return ss(t,s,r)}function jv(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps)It=!0;else{if(!Zf(t,r)&&(s.flags&128)===0)return It=!1,Pb(t,s,r);It=(t.flags&131072)!==0}else It=!1,Be&&(s.flags&1048576)!==0&&uy(s,_l,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(t=nr(s.elementType),s.type=t,typeof t=="function")sf(t)?(l=rr(t,l),s.tag=1,s=Cv(null,s,t,l,r)):(s.tag=0,s=$f(null,s,t,l,r));else{if(t!=null){var f=t.$$typeof;if(f===le){s.tag=11,s=Ev(null,s,t,l,r);break e}else if(f===N){s.tag=14,s=Tv(null,s,t,l,r);break e}}throw s=Ye(t)||t,Error(a(306,s,""))}}return s;case 0:return $f(t,s,s.type,s.pendingProps,r);case 1:return l=s.type,f=rr(l,s.pendingProps),Cv(t,s,l,f,r);case 3:e:{if(dt(s,s.stateNode.containerInfo),t===null)throw Error(a(387));l=s.pendingProps;var m=s.memoizedState;f=m.element,_f(t,s),Cl(s,l,null,r);var _=s.memoizedState;if(l=_.cache,Bs(s,Nt,l),l!==m.cache&&ff(s,[Nt],r,!0),xl(),l=_.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=Nv(t,s,l,r);break e}else if(l!==f){f=Ln(Error(a(424)),s),El(f),s=Nv(t,s,l,r);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ot=Fn(t.firstChild),Qt=s,Be=!0,zs=null,qn=!0,r=by(s,null,l,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Wa(),l===f){s=ss(t,s,r);break e}Yt(t,s,l,r)}s=s.child}return s;case 26:return Gu(t,s),t===null?(r=F_(s.type,null,s.pendingProps,null))?s.memoizedState=r:Be||(r=s.type,t=s.pendingProps,l=lh(fe.current).createElement(r),l[wt]=s,l[zt]=t,Xt(l,r,t),xt(l),s.stateNode=l):s.memoizedState=F_(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return ja(s),t===null&&Be&&(l=s.stateNode=z_(s.type,s.pendingProps,fe.current),Qt=s,qn=!0,f=ot,ta(s.type)?(jm=f,ot=Fn(l.firstChild)):ot=f),Yt(t,s,s.pendingProps.children,r),Gu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Be&&((f=l=ot)&&(l=fA(l,s.type,s.pendingProps,qn),l!==null?(s.stateNode=l,Qt=s,ot=Fn(l.firstChild),qn=!1,f=!0):f=!1),f||qs(s)),ja(s),f=s.type,m=s.pendingProps,_=t!==null?t.memoizedProps:null,l=m.children,Cm(f,m)?l=null:_!==null&&Cm(f,_)&&(s.flags|=32),s.memoizedState!==null&&(f=xf(t,s,Nb,null,null,r),Ql._currentValue=f),Gu(t,s),Yt(t,s,l,r),s.child;case 6:return t===null&&Be&&((t=r=ot)&&(r=mA(r,s.pendingProps,qn),r!==null?(s.stateNode=r,Qt=s,ot=null,t=!0):t=!1),t||qs(s)),null;case 13:return Rv(t,s,r);case 4:return dt(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=sr(s,null,l,r):Yt(t,s,l,r),s.child;case 11:return Ev(t,s,s.type,s.pendingProps,r);case 7:return Yt(t,s,s.pendingProps,r),s.child;case 8:return Yt(t,s,s.pendingProps.children,r),s.child;case 12:return Yt(t,s,s.pendingProps.children,r),s.child;case 10:return l=s.pendingProps,Bs(s,s.type,l.value),Yt(t,s,l.children,r),s.child;case 9:return f=s.type._context,l=s.pendingProps.children,er(s),f=Kt(f),l=l(f),s.flags|=1,Yt(t,s,l,r),s.child;case 14:return Tv(t,s,s.type,s.pendingProps,r);case 15:return Sv(t,s,s.type,s.pendingProps,r);case 19:return Dv(t,s,r);case 31:return kb(t,s,r);case 22:return bv(t,s,r,s.pendingProps);case 24:return er(s),l=Kt(Nt),t===null?(f=gf(),f===null&&(f=at,m=mf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=r),f=m),s.memoizedState={parent:l,cache:f},vf(s),Bs(s,Nt,f)):((t.lanes&r)!==0&&(_f(t,s),Cl(s,null,null,r),xl()),f=t.memoizedState,m=s.memoizedState,f.parent!==l?(f={parent:l,cache:l},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Bs(s,Nt,l)):(l=m.cache,Bs(s,Nt,l),l!==f.cache&&ff(s,[Nt],r,!0))),Yt(t,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}function as(t){t.flags|=4}function em(t,s,r,l,f){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(a_())t.flags|=8192;else throw ir=Iu,yf}else t.flags&=-16777217}function Ov(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!K_(s))if(a_())t.flags|=8192;else throw ir=Iu,yf}function Qu(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Zc():536870912,t.lanes|=s,lo|=s)}function Ol(t,s){if(!Be)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function lt(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,l=0;if(s)for(var f=t.child;f!==null;)r|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)r|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=r,s}function Lb(t,s,r){var l=s.pendingProps;switch(lf(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(s),null;case 1:return lt(s),null;case 3:return r=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),ts(Nt),ct(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Yr(s)?as(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,uf())),lt(s),null;case 26:var f=s.type,m=s.memoizedState;return t===null?(as(s),m!==null?(lt(s),Ov(s,m)):(lt(s),em(s,f,null,l,r))):m?m!==t.memoizedState?(as(s),lt(s),Ov(s,m)):(lt(s),s.flags&=-16777217):(t=t.memoizedProps,t!==l&&as(s),lt(s),em(s,f,t,l,r)),null;case 27:if(Cr(s),r=fe.current,f=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&as(s);else{if(!l){if(s.stateNode===null)throw Error(a(166));return lt(s),null}t=he.current,Yr(s)?dy(s):(t=z_(f,l,r),s.stateNode=t,as(s))}return lt(s),null;case 5:if(Cr(s),f=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&as(s);else{if(!l){if(s.stateNode===null)throw Error(a(166));return lt(s),null}if(m=he.current,Yr(s))dy(s);else{var _=lh(fe.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}m[wt]=s,m[zt]=l;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=m;e:switch(Xt(m,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&as(s)}}return lt(s),em(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,r),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&as(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(a(166));if(t=fe.current,Yr(s)){if(t=s.stateNode,r=s.memoizedProps,l=null,f=Qt,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[wt]=s,t=!!(t.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||R_(t.nodeValue,r)),t||qs(s,!0)}else t=lh(t).createTextNode(l),t[wt]=s,s.stateNode=t}return lt(s),null;case 31:if(r=s.memoizedState,t===null||t.memoizedState!==null){if(l=Yr(s),r!==null){if(t===null){if(!l)throw Error(a(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[wt]=s}else Wa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;lt(s),t=!1}else r=uf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return s.flags&256?(wn(s),s):(wn(s),null);if((s.flags&128)!==0)throw Error(a(558))}return lt(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Yr(s),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(a(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[wt]=s}else Wa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;lt(s),f=!1}else f=uf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(wn(s),s):(wn(s),null)}return wn(s),(s.flags&128)!==0?(s.lanes=r,s):(r=l!==null,t=t!==null&&t.memoizedState!==null,r&&(l=s.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)),r!==t&&r&&(s.child.flags|=8192),Qu(s,s.updateQueue),lt(s),null);case 4:return ct(),t===null&&Sm(s.stateNode.containerInfo),lt(s),null;case 10:return ts(s.type),lt(s),null;case 19:if(J(_t),l=s.memoizedState,l===null)return lt(s),null;if(f=(s.flags&128)!==0,m=l.rendering,m===null)if(f)Ol(l,!1);else{if(gt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=Mu(t),m!==null){for(s.flags|=128,Ol(l,!1),t=m.updateQueue,s.updateQueue=t,Qu(s,t),s.subtreeFlags=0,t=r,r=s.child;r!==null;)oy(r,t),r=r.sibling;return ce(_t,_t.current&1|2),Be&&Zi(s,l.treeForkCount),s.child}t=t.sibling}l.tail!==null&&on()>Wu&&(s.flags|=128,f=!0,Ol(l,!1),s.lanes=4194304)}else{if(!f)if(t=Mu(m),t!==null){if(s.flags|=128,f=!0,t=t.updateQueue,s.updateQueue=t,Qu(s,t),Ol(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!Be)return lt(s),null}else 2*on()-l.renderingStartTime>Wu&&r!==536870912&&(s.flags|=128,f=!0,Ol(l,!1),s.lanes=4194304);l.isBackwards?(m.sibling=s.child,s.child=m):(t=l.last,t!==null?t.sibling=m:s.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=on(),t.sibling=null,r=_t.current,ce(_t,f?r&1|2:r&1),Be&&Zi(s,l.treeForkCount),t):(lt(s),null);case 22:case 23:return wn(s),bf(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(r&536870912)!==0&&(s.flags&128)===0&&(lt(s),s.subtreeFlags&6&&(s.flags|=8192)):lt(s),r=s.updateQueue,r!==null&&Qu(s,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==r&&(s.flags|=2048),t!==null&&J(tr),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),ts(Nt),lt(s),null;case 25:return null;case 30:return null}throw Error(a(156,s.tag))}function Ub(t,s){switch(lf(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return ts(Nt),ct(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Cr(s),null;case 31:if(s.memoizedState!==null){if(wn(s),s.alternate===null)throw Error(a(340));Wa()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(wn(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(a(340));Wa()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return J(_t),null;case 4:return ct(),null;case 10:return ts(s.type),null;case 22:case 23:return wn(s),bf(),t!==null&&J(tr),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return ts(Nt),null;case 25:return null;default:return null}}function Mv(t,s){switch(lf(s),s.tag){case 3:ts(Nt),ct();break;case 26:case 27:case 5:Cr(s);break;case 4:ct();break;case 31:s.memoizedState!==null&&wn(s);break;case 13:wn(s);break;case 19:J(_t);break;case 10:ts(s.type);break;case 22:case 23:wn(s),bf(),t!==null&&J(tr);break;case 24:ts(Nt)}}function Ml(t,s){try{var r=s.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var f=l.next;r=f;do{if((r.tag&t)===t){l=void 0;var m=r.create,_=r.inst;l=m(),_.destroy=l}r=r.next}while(r!==f)}}catch(b){Ze(s,s.return,b)}}function Ks(t,s,r){try{var l=s.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&t)===t){var _=l.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,f=s;var D=r,B=b;try{B()}catch(X){Ze(f,D,X)}}}l=l.next}while(l!==m)}}catch(X){Ze(s,s.return,X)}}function Vv(t){var s=t.updateQueue;if(s!==null){var r=t.stateNode;try{wy(s,r)}catch(l){Ze(t,t.return,l)}}}function kv(t,s,r){r.props=rr(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(l){Ze(t,s,l)}}function Vl(t,s){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof r=="function"?t.refCleanup=r(l):r.current=l}}catch(f){Ze(t,s,f)}}function Oi(t,s){var r=t.ref,l=t.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(f){Ze(t,s,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(f){Ze(t,s,f)}else r.current=null}function Pv(t){var s=t.type,r=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break e;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(f){Ze(t,t.return,f)}}function tm(t,s,r){try{var l=t.stateNode;oA(l,t.type,r,s),l[zt]=s}catch(f){Ze(t,t.return,f)}}function Lv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ta(t.type)||t.tag===4}function nm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Lv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ta(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function im(t,s,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(t),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=Jn));else if(l!==4&&(l===27&&ta(t.type)&&(r=t.stateNode,s=null),t=t.child,t!==null))for(im(t,s,r),t=t.sibling;t!==null;)im(t,s,r),t=t.sibling}function Ku(t,s,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(l!==4&&(l===27&&ta(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(Ku(t,s,r),t=t.sibling;t!==null;)Ku(t,s,r),t=t.sibling}function Uv(t){var s=t.stateNode,r=t.memoizedProps;try{for(var l=t.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Xt(s,l,r),s[wt]=t,s[zt]=r}catch(m){Ze(t,t.return,m)}}var rs=!1,Dt=!1,sm=!1,zv=typeof WeakSet=="function"?WeakSet:Set,Bt=null;function zb(t,s){if(t=t.containerInfo,wm=ph,t=Wg(t),Xd(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break e}var _=0,b=-1,D=-1,B=0,X=0,ee=t,H=null;t:for(;;){for(var K;ee!==r||f!==0&&ee.nodeType!==3||(b=_+f),ee!==m||l!==0&&ee.nodeType!==3||(D=_+l),ee.nodeType===3&&(_+=ee.nodeValue.length),(K=ee.firstChild)!==null;)H=ee,ee=K;for(;;){if(ee===t)break t;if(H===r&&++B===f&&(b=_),H===m&&++X===l&&(D=_),(K=ee.nextSibling)!==null)break;ee=H,H=ee.parentNode}ee=K}r=b===-1||D===-1?null:{start:b,end:D}}else r=null}r=r||{start:0,end:0}}else r=null;for(xm={focusedElem:t,selectionRange:r},ph=!1,Bt=s;Bt!==null;)if(s=Bt,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Bt=t;else for(;Bt!==null;){switch(s=Bt,m=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)f=t[r],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,r=s,f=m.memoizedProps,m=m.memoizedState,l=r.stateNode;try{var pe=rr(r.type,f);t=l.getSnapshotBeforeUpdate(pe,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(Se){Ze(r,r.return,Se)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,r=t.nodeType,r===9)Rm(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Rm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=s.sibling,t!==null){t.return=s.return,Bt=t;break}Bt=s.return}}function qv(t,s,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:ls(t,r),l&4&&Ml(5,r);break;case 1:if(ls(t,r),l&4)if(t=r.stateNode,s===null)try{t.componentDidMount()}catch(_){Ze(r,r.return,_)}else{var f=rr(r.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(f,s,t.__reactInternalSnapshotBeforeUpdate)}catch(_){Ze(r,r.return,_)}}l&64&&Vv(r),l&512&&Vl(r,r.return);break;case 3:if(ls(t,r),l&64&&(t=r.updateQueue,t!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{wy(t,s)}catch(_){Ze(r,r.return,_)}}break;case 27:s===null&&l&4&&Uv(r);case 26:case 5:ls(t,r),s===null&&l&4&&Pv(r),l&512&&Vl(r,r.return);break;case 12:ls(t,r);break;case 31:ls(t,r),l&4&&Hv(t,r);break;case 13:ls(t,r),l&4&&Gv(t,r),l&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=Yb.bind(null,r),pA(t,r))));break;case 22:if(l=r.memoizedState!==null||rs,!l){s=s!==null&&s.memoizedState!==null||Dt,f=rs;var m=Dt;rs=l,(Dt=s)&&!m?cs(t,r,(r.subtreeFlags&8772)!==0):ls(t,r),rs=f,Dt=m}break;case 30:break;default:ls(t,r)}}function Bv(t){var s=t.alternate;s!==null&&(t.alternate=null,Bv(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&jr(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ht=null,dn=!1;function os(t,s,r){for(r=r.child;r!==null;)Fv(t,s,r),r=r.sibling}function Fv(t,s,r){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(Qn,r)}catch{}switch(r.tag){case 26:Dt||Oi(r,s),os(t,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Dt||Oi(r,s);var l=ht,f=dn;ta(r.type)&&(ht=r.stateNode,dn=!1),os(t,s,r),Hl(r.stateNode),ht=l,dn=f;break;case 5:Dt||Oi(r,s);case 6:if(l=ht,f=dn,ht=null,os(t,s,r),ht=l,dn=f,ht!==null)if(dn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(r.stateNode)}catch(m){Ze(r,s,m)}else try{ht.removeChild(r.stateNode)}catch(m){Ze(r,s,m)}break;case 18:ht!==null&&(dn?(t=ht,V_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),yo(t)):V_(ht,r.stateNode));break;case 4:l=ht,f=dn,ht=r.stateNode.containerInfo,dn=!0,os(t,s,r),ht=l,dn=f;break;case 0:case 11:case 14:case 15:Ks(2,r,s),Dt||Ks(4,r,s),os(t,s,r);break;case 1:Dt||(Oi(r,s),l=r.stateNode,typeof l.componentWillUnmount=="function"&&kv(r,s,l)),os(t,s,r);break;case 21:os(t,s,r);break;case 22:Dt=(l=Dt)||r.memoizedState!==null,os(t,s,r),Dt=l;break;default:os(t,s,r)}}function Hv(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{yo(t)}catch(r){Ze(s,s.return,r)}}}function Gv(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{yo(t)}catch(r){Ze(s,s.return,r)}}function qb(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new zv),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new zv),s;default:throw Error(a(435,t.tag))}}function Yu(t,s){var r=qb(t);s.forEach(function(l){if(!r.has(l)){r.add(l);var f=Xb.bind(null,t,l);l.then(f,f)}})}function fn(t,s){var r=s.deletions;if(r!==null)for(var l=0;l<r.length;l++){var f=r[l],m=t,_=s,b=_;e:for(;b!==null;){switch(b.tag){case 27:if(ta(b.type)){ht=b.stateNode,dn=!1;break e}break;case 5:ht=b.stateNode,dn=!1;break e;case 3:case 4:ht=b.stateNode.containerInfo,dn=!0;break e}b=b.return}if(ht===null)throw Error(a(160));Fv(m,_,f),ht=null,dn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)$v(s,t),s=s.sibling}var ii=null;function $v(t,s){var r=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:fn(s,t),mn(t),l&4&&(Ks(3,t,t.return),Ml(3,t),Ks(5,t,t.return));break;case 1:fn(s,t),mn(t),l&512&&(Dt||r===null||Oi(r,r.return)),l&64&&rs&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var f=ii;if(fn(s,t),mn(t),l&512&&(Dt||r===null||Oi(r,r.return)),l&4){var m=r!==null?r.memoizedState:null;if(l=t.memoizedState,r===null)if(l===null)if(t.stateNode===null){e:{l=t.type,r=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[_i]||m[wt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),Xt(m,l,r),m[wt]=t,xt(m),l=m;break e;case"link":var _=$_("link","href",f).get(l+(r.href||""));if(_){for(var b=0;b<_.length;b++)if(m=_[b],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){_.splice(b,1);break t}}m=f.createElement(l),Xt(m,l,r),f.head.appendChild(m);break;case"meta":if(_=$_("meta","content",f).get(l+(r.content||""))){for(b=0;b<_.length;b++)if(m=_[b],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){_.splice(b,1);break t}}m=f.createElement(l),Xt(m,l,r),f.head.appendChild(m);break;default:throw Error(a(468,l))}m[wt]=t,xt(m),l=m}t.stateNode=l}else Q_(f,t.type,t.stateNode);else t.stateNode=G_(f,l,t.memoizedProps);else m!==l?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,l===null?Q_(f,t.type,t.stateNode):G_(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&tm(t,t.memoizedProps,r.memoizedProps)}break;case 27:fn(s,t),mn(t),l&512&&(Dt||r===null||Oi(r,r.return)),r!==null&&l&4&&tm(t,t.memoizedProps,r.memoizedProps);break;case 5:if(fn(s,t),mn(t),l&512&&(Dt||r===null||Oi(r,r.return)),t.flags&32){f=t.stateNode;try{hn(f,"")}catch(pe){Ze(t,t.return,pe)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,tm(t,f,r!==null?r.memoizedProps:f)),l&1024&&(sm=!0);break;case 6:if(fn(s,t),mn(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,r=t.stateNode;try{r.nodeValue=l}catch(pe){Ze(t,t.return,pe)}}break;case 3:if(hh=null,f=ii,ii=ch(s.containerInfo),fn(s,t),ii=f,mn(t),l&4&&r!==null&&r.memoizedState.isDehydrated)try{yo(s.containerInfo)}catch(pe){Ze(t,t.return,pe)}sm&&(sm=!1,Qv(t));break;case 4:l=ii,ii=ch(t.stateNode.containerInfo),fn(s,t),mn(t),ii=l;break;case 12:fn(s,t),mn(t);break;case 31:fn(s,t),mn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Yu(t,l)));break;case 13:fn(s,t),mn(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Ju=on()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Yu(t,l)));break;case 22:f=t.memoizedState!==null;var D=r!==null&&r.memoizedState!==null,B=rs,X=Dt;if(rs=B||f,Dt=X||D,fn(s,t),Dt=X,rs=B,mn(t),l&8192)e:for(s=t.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(r===null||D||rs||Dt||or(t)),r=null,s=t;;){if(s.tag===5||s.tag===26){if(r===null){D=r=s;try{if(m=D.stateNode,f)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=D.stateNode;var ee=D.memoizedProps.style,H=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;b.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(pe){Ze(D,D.return,pe)}}}else if(s.tag===6){if(r===null){D=s;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(pe){Ze(D,D.return,pe)}}}else if(s.tag===18){if(r===null){D=s;try{var K=D.stateNode;f?k_(K,!0):k_(D.stateNode,!1)}catch(pe){Ze(D,D.return,pe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,Yu(t,r))));break;case 19:fn(s,t),mn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Yu(t,l)));break;case 30:break;case 21:break;default:fn(s,t),mn(t)}}function mn(t){var s=t.flags;if(s&2){try{for(var r,l=t.return;l!==null;){if(Lv(l)){r=l;break}l=l.return}if(r==null)throw Error(a(160));switch(r.tag){case 27:var f=r.stateNode,m=nm(t);Ku(t,m,f);break;case 5:var _=r.stateNode;r.flags&32&&(hn(_,""),r.flags&=-33);var b=nm(t);Ku(t,b,_);break;case 3:case 4:var D=r.stateNode.containerInfo,B=nm(t);im(t,B,D);break;default:throw Error(a(161))}}catch(X){Ze(t,t.return,X)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Qv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;Qv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function ls(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)qv(t,s.alternate,s),s=s.sibling}function or(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Ks(4,s,s.return),or(s);break;case 1:Oi(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&kv(s,s.return,r),or(s);break;case 27:Hl(s.stateNode);case 26:case 5:Oi(s,s.return),or(s);break;case 22:s.memoizedState===null&&or(s);break;case 30:or(s);break;default:or(s)}t=t.sibling}}function cs(t,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,f=t,m=s,_=m.flags;switch(m.tag){case 0:case 11:case 15:cs(f,m,r),Ml(4,m);break;case 1:if(cs(f,m,r),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(B){Ze(l,l.return,B)}if(l=m,f=l.updateQueue,f!==null){var b=l.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)Ay(D[f],b)}catch(B){Ze(l,l.return,B)}}r&&_&64&&Vv(m),Vl(m,m.return);break;case 27:Uv(m);case 26:case 5:cs(f,m,r),r&&l===null&&_&4&&Pv(m),Vl(m,m.return);break;case 12:cs(f,m,r);break;case 31:cs(f,m,r),r&&_&4&&Hv(f,m);break;case 13:cs(f,m,r),r&&_&4&&Gv(f,m);break;case 22:m.memoizedState===null&&cs(f,m,r),Vl(m,m.return);break;case 30:break;default:cs(f,m,r)}s=s.sibling}}function am(t,s){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Tl(r))}function rm(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Tl(t))}function si(t,s,r,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Kv(t,s,r,l),s=s.sibling}function Kv(t,s,r,l){var f=s.flags;switch(s.tag){case 0:case 11:case 15:si(t,s,r,l),f&2048&&Ml(9,s);break;case 1:si(t,s,r,l);break;case 3:si(t,s,r,l),f&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Tl(t)));break;case 12:if(f&2048){si(t,s,r,l),t=s.stateNode;try{var m=s.memoizedProps,_=m.id,b=m.onPostCommit;typeof b=="function"&&b(_,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){Ze(s,s.return,D)}}else si(t,s,r,l);break;case 31:si(t,s,r,l);break;case 13:si(t,s,r,l);break;case 23:break;case 22:m=s.stateNode,_=s.alternate,s.memoizedState!==null?m._visibility&2?si(t,s,r,l):kl(t,s):m._visibility&2?si(t,s,r,l):(m._visibility|=2,ao(t,s,r,l,(s.subtreeFlags&10256)!==0||!1)),f&2048&&am(_,s);break;case 24:si(t,s,r,l),f&2048&&rm(s.alternate,s);break;default:si(t,s,r,l)}}function ao(t,s,r,l,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=t,_=s,b=r,D=l,B=_.flags;switch(_.tag){case 0:case 11:case 15:ao(m,_,b,D,f),Ml(8,_);break;case 23:break;case 22:var X=_.stateNode;_.memoizedState!==null?X._visibility&2?ao(m,_,b,D,f):kl(m,_):(X._visibility|=2,ao(m,_,b,D,f)),f&&B&2048&&am(_.alternate,_);break;case 24:ao(m,_,b,D,f),f&&B&2048&&rm(_.alternate,_);break;default:ao(m,_,b,D,f)}s=s.sibling}}function kl(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=t,l=s,f=l.flags;switch(l.tag){case 22:kl(r,l),f&2048&&am(l.alternate,l);break;case 24:kl(r,l),f&2048&&rm(l.alternate,l);break;default:kl(r,l)}s=s.sibling}}var Pl=8192;function ro(t,s,r){if(t.subtreeFlags&Pl)for(t=t.child;t!==null;)Yv(t,s,r),t=t.sibling}function Yv(t,s,r){switch(t.tag){case 26:ro(t,s,r),t.flags&Pl&&t.memoizedState!==null&&CA(r,ii,t.memoizedState,t.memoizedProps);break;case 5:ro(t,s,r);break;case 3:case 4:var l=ii;ii=ch(t.stateNode.containerInfo),ro(t,s,r),ii=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Pl,Pl=16777216,ro(t,s,r),Pl=l):ro(t,s,r));break;default:ro(t,s,r)}}function Xv(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Ll(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var l=s[r];Bt=l,Wv(l,t)}Xv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Jv(t),t=t.sibling}function Jv(t){switch(t.tag){case 0:case 11:case 15:Ll(t),t.flags&2048&&Ks(9,t,t.return);break;case 3:Ll(t);break;case 12:Ll(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Xu(t)):Ll(t);break;default:Ll(t)}}function Xu(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var l=s[r];Bt=l,Wv(l,t)}Xv(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Ks(8,s,s.return),Xu(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,Xu(s));break;default:Xu(s)}t=t.sibling}}function Wv(t,s){for(;Bt!==null;){var r=Bt;switch(r.tag){case 0:case 11:case 15:Ks(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Tl(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,Bt=l;else e:for(r=t;Bt!==null;){l=Bt;var f=l.sibling,m=l.return;if(Bv(l),l===r){Bt=null;break e}if(f!==null){f.return=m,Bt=f;break e}Bt=m}}}var Bb={getCacheForType:function(t){var s=Kt(Nt),r=s.data.get(t);return r===void 0&&(r=t(),s.data.set(t,r)),r},cacheSignal:function(){return Kt(Nt).controller.signal}},Fb=typeof WeakMap=="function"?WeakMap:Map,Ke=0,at=null,Me=null,ke=0,We=0,xn=null,Ys=!1,oo=!1,om=!1,us=0,gt=0,Xs=0,lr=0,lm=0,Cn=0,lo=0,Ul=null,pn=null,cm=!1,Ju=0,Zv=0,Wu=1/0,Zu=null,Js=null,Pt=0,Ws=null,co=null,hs=0,um=0,hm=null,e_=null,zl=0,dm=null;function Nn(){return(Ke&2)!==0&&ke!==0?ke&-ke:Y.T!==null?vm():eu()}function t_(){if(Cn===0)if((ke&536870912)===0||Be){var t=Va;Va<<=1,(Va&3932160)===0&&(Va=262144),Cn=t}else Cn=536870912;return t=An.current,t!==null&&(t.flags|=32),Cn}function gn(t,s,r){(t===at&&(We===2||We===9)||t.cancelPendingCommit!==null)&&(uo(t,0),Zs(t,ke,Cn,!1)),ka(t,r),((Ke&2)===0||t!==at)&&(t===at&&((Ke&2)===0&&(lr|=r),gt===4&&Zs(t,ke,Cn,!1)),Mi(t))}function n_(t,s,r){if((Ke&6)!==0)throw Error(a(327));var l=!r&&(s&127)===0&&(s&t.expiredLanes)===0||Kn(t,s),f=l?$b(t,s):mm(t,s,!0),m=l;do{if(f===0){oo&&!l&&Zs(t,s,0,!1);break}else{if(r=t.current.alternate,m&&!Hb(r)){f=mm(t,s,!1),m=!1;continue}if(f===2){if(m=s,t.errorRecoveryDisabledLanes&m)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var b=t;f=Ul;var D=b.current.memoizedState.isDehydrated;if(D&&(uo(b,_).flags|=256),_=mm(b,_,!1),_!==2){if(om&&!D){b.errorRecoveryDisabledLanes|=m,lr|=m,f=4;break e}m=pn,pn=f,m!==null&&(pn===null?pn=m:pn.push.apply(pn,m))}f=_}if(m=!1,f!==2)continue}}if(f===1){uo(t,0),Zs(t,s,0,!0);break}e:{switch(l=t,m=f,m){case 0:case 1:throw Error(a(345));case 4:if((s&4194048)!==s)break;case 6:Zs(l,s,Cn,!Ys);break e;case 2:pn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((s&62914560)===s&&(f=Ju+300-on(),10<f)){if(Zs(l,s,Cn,!Ys),gi(l,0,!0)!==0)break e;hs=s,l.timeoutHandle=O_(i_.bind(null,l,r,pn,Zu,cm,s,Cn,lr,lo,Ys,m,"Throttled",-0,0),f);break e}i_(l,r,pn,Zu,cm,s,Cn,lr,lo,Ys,m,null,-0,0)}}break}while(!0);Mi(t)}function i_(t,s,r,l,f,m,_,b,D,B,X,ee,H,K){if(t.timeoutHandle=-1,ee=s.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Jn},Yv(s,m,ee);var pe=(m&62914560)===m?Ju-on():(m&4194048)===m?Zv-on():0;if(pe=NA(ee,pe),pe!==null){hs=m,t.cancelPendingCommit=pe(h_.bind(null,t,s,m,r,l,f,_,b,D,X,ee,null,H,K)),Zs(t,m,_,!B);return}}h_(t,s,m,r,l,f,_,b,D)}function Hb(t){for(var s=t;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var f=r[l],m=f.getSnapshot;f=f.value;try{if(!Sn(m(),f))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Zs(t,s,r,l){s&=~lm,s&=~lr,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var f=s;0<f;){var m=31-yt(f),_=1<<m;l[m]=-1,f&=~_}r!==0&&Pa(t,r,s)}function eh(){return(Ke&6)===0?(ql(0),!1):!0}function fm(){if(Me!==null){if(We===0)var t=Me.return;else t=Me,es=Za=null,Rf(t),eo=null,bl=0,t=Me;for(;t!==null;)Mv(t.alternate,t),t=t.return;Me=null}}function uo(t,s){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,uA(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),hs=0,fm(),at=t,Me=r=Wi(t.current,null),ke=s,We=0,xn=null,Ys=!1,oo=Kn(t,s),om=!1,lo=Cn=lm=lr=Xs=gt=0,pn=Ul=null,cm=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var f=31-yt(l),m=1<<f;s|=t[f],l&=~m}return us=s,Tu(),r}function s_(t,s){Ie=null,Y.H=Dl,s===Zr||s===Ru?(s=Ey(),We=3):s===yf?(s=Ey(),We=4):We=s===Gf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,xn=s,Me===null&&(gt=1,Fu(t,Ln(s,t.current)))}function a_(){var t=An.current;return t===null?!0:(ke&4194048)===ke?Bn===null:(ke&62914560)===ke||(ke&536870912)!==0?t===Bn:!1}function r_(){var t=Y.H;return Y.H=Dl,t===null?Dl:t}function o_(){var t=Y.A;return Y.A=Bb,t}function th(){gt=4,Ys||(ke&4194048)!==ke&&An.current!==null||(oo=!0),(Xs&134217727)===0&&(lr&134217727)===0||at===null||Zs(at,ke,Cn,!1)}function mm(t,s,r){var l=Ke;Ke|=2;var f=r_(),m=o_();(at!==t||ke!==s)&&(Zu=null,uo(t,s)),s=!1;var _=gt;e:do try{if(We!==0&&Me!==null){var b=Me,D=xn;switch(We){case 8:fm(),_=6;break e;case 3:case 2:case 9:case 6:An.current===null&&(s=!0);var B=We;if(We=0,xn=null,ho(t,b,D,B),r&&oo){_=0;break e}break;default:B=We,We=0,xn=null,ho(t,b,D,B)}}Gb(),_=gt;break}catch(X){s_(t,X)}while(!0);return s&&t.shellSuspendCounter++,es=Za=null,Ke=l,Y.H=f,Y.A=m,Me===null&&(at=null,ke=0,Tu()),_}function Gb(){for(;Me!==null;)l_(Me)}function $b(t,s){var r=Ke;Ke|=2;var l=r_(),f=o_();at!==t||ke!==s?(Zu=null,Wu=on()+500,uo(t,s)):oo=Kn(t,s);e:do try{if(We!==0&&Me!==null){s=Me;var m=xn;t:switch(We){case 1:We=0,xn=null,ho(t,s,m,1);break;case 2:case 9:if(vy(m)){We=0,xn=null,c_(s);break}s=function(){We!==2&&We!==9||at!==t||(We=7),Mi(t)},m.then(s,s);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:vy(m)?(We=0,xn=null,c_(s)):(We=0,xn=null,ho(t,s,m,7));break;case 5:var _=null;switch(Me.tag){case 26:_=Me.memoizedState;case 5:case 27:var b=Me;if(_?K_(_):b.stateNode.complete){We=0,xn=null;var D=b.sibling;if(D!==null)Me=D;else{var B=b.return;B!==null?(Me=B,nh(B)):Me=null}break t}}We=0,xn=null,ho(t,s,m,5);break;case 6:We=0,xn=null,ho(t,s,m,6);break;case 8:fm(),gt=6;break e;default:throw Error(a(462))}}Qb();break}catch(X){s_(t,X)}while(!0);return es=Za=null,Y.H=l,Y.A=f,Ke=r,Me!==null?0:(at=null,ke=0,Tu(),gt)}function Qb(){for(;Me!==null&&!Fd();)l_(Me)}function l_(t){var s=jv(t.alternate,t,us);t.memoizedProps=t.pendingProps,s===null?nh(t):Me=s}function c_(t){var s=t,r=s.alternate;switch(s.tag){case 15:case 0:s=xv(r,s,s.pendingProps,s.type,void 0,ke);break;case 11:s=xv(r,s,s.pendingProps,s.type.render,s.ref,ke);break;case 5:Rf(s);default:Mv(r,s),s=Me=oy(s,us),s=jv(r,s,us)}t.memoizedProps=t.pendingProps,s===null?nh(t):Me=s}function ho(t,s,r,l){es=Za=null,Rf(s),eo=null,bl=0;var f=s.return;try{if(Vb(t,f,s,r,ke)){gt=1,Fu(t,Ln(r,t.current)),Me=null;return}}catch(m){if(f!==null)throw Me=f,m;gt=1,Fu(t,Ln(r,t.current)),Me=null;return}s.flags&32768?(Be||l===1?t=!0:oo||(ke&536870912)!==0?t=!1:(Ys=t=!0,(l===2||l===9||l===3||l===6)&&(l=An.current,l!==null&&l.tag===13&&(l.flags|=16384))),u_(s,t)):nh(s)}function nh(t){var s=t;do{if((s.flags&32768)!==0){u_(s,Ys);return}t=s.return;var r=Lb(s.alternate,s,us);if(r!==null){Me=r;return}if(s=s.sibling,s!==null){Me=s;return}Me=s=t}while(s!==null);gt===0&&(gt=5)}function u_(t,s){do{var r=Ub(t.alternate,t);if(r!==null){r.flags&=32767,Me=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(t=t.sibling,t!==null)){Me=t;return}Me=t=r}while(t!==null);gt=6,Me=null}function h_(t,s,r,l,f,m,_,b,D){t.cancelPendingCommit=null;do ih();while(Pt!==0);if((Ke&6)!==0)throw Error(a(327));if(s!==null){if(s===t.current)throw Error(a(177));if(m=s.lanes|s.childLanes,m|=tf,$d(t,r,m,_,b,D),t===at&&(Me=at=null,ke=0),co=s,Ws=t,hs=r,um=m,hm=f,e_=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Jb(Rs,function(){return g_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null,f=re.p,re.p=2,_=Ke,Ke|=4;try{zb(t,s,r)}finally{Ke=_,re.p=f,Y.T=l}}Pt=1,d_(),f_(),m_()}}function d_(){if(Pt===1){Pt=0;var t=Ws,s=co,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=Y.T,Y.T=null;var l=re.p;re.p=2;var f=Ke;Ke|=4;try{$v(s,t);var m=xm,_=Wg(t.containerInfo),b=m.focusedElem,D=m.selectionRange;if(_!==b&&b&&b.ownerDocument&&Jg(b.ownerDocument.documentElement,b)){if(D!==null&&Xd(b)){var B=D.start,X=D.end;if(X===void 0&&(X=B),"selectionStart"in b)b.selectionStart=B,b.selectionEnd=Math.min(X,b.value.length);else{var ee=b.ownerDocument||document,H=ee&&ee.defaultView||window;if(H.getSelection){var K=H.getSelection(),pe=b.textContent.length,Se=Math.min(D.start,pe),it=D.end===void 0?Se:Math.min(D.end,pe);!K.extend&&Se>it&&(_=it,it=Se,Se=_);var U=Xg(b,Se),V=Xg(b,it);if(U&&V&&(K.rangeCount!==1||K.anchorNode!==U.node||K.anchorOffset!==U.offset||K.focusNode!==V.node||K.focusOffset!==V.offset)){var q=ee.createRange();q.setStart(U.node,U.offset),K.removeAllRanges(),Se>it?(K.addRange(q),K.extend(V.node,V.offset)):(q.setEnd(V.node,V.offset),K.addRange(q))}}}}for(ee=[],K=b;K=K.parentNode;)K.nodeType===1&&ee.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ee.length;b++){var Z=ee[b];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}ph=!!wm,xm=wm=null}finally{Ke=f,re.p=l,Y.T=r}}t.current=s,Pt=2}}function f_(){if(Pt===2){Pt=0;var t=Ws,s=co,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=Y.T,Y.T=null;var l=re.p;re.p=2;var f=Ke;Ke|=4;try{qv(t,s.alternate,s)}finally{Ke=f,re.p=l,Y.T=r}}Pt=3}}function m_(){if(Pt===4||Pt===3){Pt=0,Qc();var t=Ws,s=co,r=hs,l=e_;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Pt=5:(Pt=0,co=Ws=null,p_(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Js=null),Ki(r),s=s.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(Qn,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=Y.T,f=re.p,re.p=2,Y.T=null;try{for(var m=t.onRecoverableError,_=0;_<l.length;_++){var b=l[_];m(b.value,{componentStack:b.stack})}}finally{Y.T=s,re.p=f}}(hs&3)!==0&&ih(),Mi(t),f=t.pendingLanes,(r&261930)!==0&&(f&42)!==0?t===dm?zl++:(zl=0,dm=t):zl=0,ql(0)}}function p_(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Tl(s)))}function ih(){return d_(),f_(),m_(),g_()}function g_(){if(Pt!==5)return!1;var t=Ws,s=um;um=0;var r=Ki(hs),l=Y.T,f=re.p;try{re.p=32>r?32:r,Y.T=null,r=hm,hm=null;var m=Ws,_=hs;if(Pt=0,co=Ws=null,hs=0,(Ke&6)!==0)throw Error(a(331));var b=Ke;if(Ke|=4,Jv(m.current),Kv(m,m.current,_,r),Ke=b,ql(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(Qn,m)}catch{}return!0}finally{re.p=f,Y.T=l,p_(t,s)}}function y_(t,s,r){s=Ln(r,s),s=Hf(t.stateNode,s,2),t=Gs(t,s,2),t!==null&&(ka(t,2),Mi(t))}function Ze(t,s,r){if(t.tag===3)y_(t,t,r);else for(;s!==null;){if(s.tag===3){y_(s,t,r);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Js===null||!Js.has(l))){t=Ln(r,t),r=vv(2),l=Gs(s,r,2),l!==null&&(_v(r,l,s,t),ka(l,2),Mi(l));break}}s=s.return}}function pm(t,s,r){var l=t.pingCache;if(l===null){l=t.pingCache=new Fb;var f=new Set;l.set(s,f)}else f=l.get(s),f===void 0&&(f=new Set,l.set(s,f));f.has(r)||(om=!0,f.add(r),t=Kb.bind(null,t,s,r),s.then(t,t))}function Kb(t,s,r){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,at===t&&(ke&r)===r&&(gt===4||gt===3&&(ke&62914560)===ke&&300>on()-Ju?(Ke&2)===0&&uo(t,0):lm|=r,lo===ke&&(lo=0)),Mi(t)}function v_(t,s){s===0&&(s=Zc()),t=Xa(t,s),t!==null&&(ka(t,s),Mi(t))}function Yb(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),v_(t,r)}function Xb(t,s){var r=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(r=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(s),v_(t,r)}function Jb(t,s){return kt(t,s)}var sh=null,fo=null,gm=!1,ah=!1,ym=!1,ea=0;function Mi(t){t!==fo&&t.next===null&&(fo===null?sh=fo=t:fo=fo.next=t),ah=!0,gm||(gm=!0,Zb())}function ql(t,s){if(!ym&&ah){ym=!0;do for(var r=!1,l=sh;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var _=l.suspendedLanes,b=l.pingedLanes;m=(1<<31-yt(42|t)+1)-1,m&=f&~(_&~b),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,S_(l,m))}else m=ke,m=gi(l,l===at?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Kn(l,m)||(r=!0,S_(l,m));l=l.next}while(r);ym=!1}}function Wb(){__()}function __(){ah=gm=!1;var t=0;ea!==0&&cA()&&(t=ea);for(var s=on(),r=null,l=sh;l!==null;){var f=l.next,m=E_(l,s);m===0?(l.next=null,r===null?sh=f:r.next=f,f===null&&(fo=r)):(r=l,(t!==0||(m&3)!==0)&&(ah=!0)),l=f}Pt!==0&&Pt!==5||ql(t),ea!==0&&(ea=0)}function E_(t,s){for(var r=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var _=31-yt(m),b=1<<_,D=f[_];D===-1?((b&r)===0||(b&l)!==0)&&(f[_]=Gd(b,s)):D<=s&&(t.expiredLanes|=b),m&=~b}if(s=at,r=ke,r=gi(t,t===s?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,r===0||t===s&&(We===2||We===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ns(l),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||Kn(t,r)){if(s=r&-r,s===t.callbackPriority)return s;switch(l!==null&&Ns(l),Ki(r)){case 2:case 8:r=Jo;break;case 32:r=Rs;break;case 268435456:r=Kc;break;default:r=Rs}return l=T_.bind(null,t),r=kt(r,l),t.callbackPriority=s,t.callbackNode=r,s}return l!==null&&l!==null&&Ns(l),t.callbackPriority=2,t.callbackNode=null,2}function T_(t,s){if(Pt!==0&&Pt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(ih()&&t.callbackNode!==r)return null;var l=ke;return l=gi(t,t===at?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(n_(t,l,s),E_(t,on()),t.callbackNode!=null&&t.callbackNode===r?T_.bind(null,t):null)}function S_(t,s){if(ih())return null;n_(t,s,!0)}function Zb(){hA(function(){(Ke&6)!==0?kt(Xo,Wb):__()})}function vm(){if(ea===0){var t=Jr;t===0&&(t=mi,mi<<=1,(mi&261888)===0&&(mi=256)),ea=t}return ea}function b_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:kr(""+t)}function A_(t,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,t.id&&r.setAttribute("form",t.id),s.parentNode.insertBefore(r,s),t=new FormData(t),r.parentNode.removeChild(r),t}function eA(t,s,r,l,f){if(s==="submit"&&r&&r.stateNode===f){var m=b_((f[zt]||null).action),_=l.submitter;_&&(s=(s=_[zt]||null)?b_(s.formAction):_.getAttribute("formAction"),s!==null&&(m=s,_=null));var b=new Ci("action","action",null,l,f);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ea!==0){var D=_?A_(f,_):new FormData(f);Lf(r,{pending:!0,data:D,method:f.method,action:m},null,D)}}else typeof m=="function"&&(b.preventDefault(),D=_?A_(f,_):new FormData(f),Lf(r,{pending:!0,data:D,method:f.method,action:m},m,D))},currentTarget:f}]})}}for(var _m=0;_m<ef.length;_m++){var Em=ef[_m],tA=Em.toLowerCase(),nA=Em[0].toUpperCase()+Em.slice(1);ni(tA,"on"+nA)}ni(ty,"onAnimationEnd"),ni(ny,"onAnimationIteration"),ni(iy,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(vb,"onTransitionRun"),ni(_b,"onTransitionStart"),ni(Eb,"onTransitionCancel"),ni(sy,"onTransitionEnd"),bi("onMouseEnter",["mouseout","mouseover"]),bi("onMouseLeave",["mouseout","mouseover"]),bi("onPointerEnter",["pointerout","pointerover"]),bi("onPointerLeave",["pointerout","pointerover"]),Si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Si("onBeforeInput",["compositionend","keypress","textInput","paste"]),Si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bl));function w_(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var l=t[r],f=l.event;l=l.listeners;e:{var m=void 0;if(s)for(var _=l.length-1;0<=_;_--){var b=l[_],D=b.instance,B=b.currentTarget;if(b=b.listener,D!==m&&f.isPropagationStopped())break e;m=b,f.currentTarget=B;try{m(f)}catch(X){Eu(X)}f.currentTarget=null,m=D}else for(_=0;_<l.length;_++){if(b=l[_],D=b.instance,B=b.currentTarget,b=b.listener,D!==m&&f.isPropagationStopped())break e;m=b,f.currentTarget=B;try{m(f)}catch(X){Eu(X)}f.currentTarget=null,m=D}}}}function Ve(t,s){var r=s[Dr];r===void 0&&(r=s[Dr]=new Set);var l=t+"__bubble";r.has(l)||(x_(s,t,2,!1),r.add(l))}function Tm(t,s,r){var l=0;s&&(l|=4),x_(r,t,l,s)}var rh="_reactListening"+Math.random().toString(36).slice(2);function Sm(t){if(!t[rh]){t[rh]=!0,el.forEach(function(r){r!=="selectionchange"&&(iA.has(r)||Tm(r,!1,t),Tm(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[rh]||(s[rh]=!0,Tm("selectionchange",!1,s))}}function x_(t,s,r,l){switch(t0(s)){case 2:var f=DA;break;case 8:f=jA;break;default:f=Pm}r=f.bind(null,s,r,t),f=void 0,!Ba||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(s,r,{capture:!0,passive:f}):t.addEventListener(s,r,!0):f!==void 0?t.addEventListener(s,r,{passive:f}):t.addEventListener(s,r,!1)}function bm(t,s,r,l,f){var m=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var b=l.stateNode.containerInfo;if(b===f)break;if(_===4)for(_=l.return;_!==null;){var D=_.tag;if((D===3||D===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;b!==null;){if(_=Ei(b),_===null)return;if(D=_.tag,D===5||D===6||D===26||D===27){l=m=_;continue e}b=b.parentNode}}l=l.return}Vs(function(){var B=m,X=Mn(r),ee=[];e:{var H=ay.get(t);if(H!==void 0){var K=Ci,pe=t;switch(t){case"keypress":if(Ha(r)===0)break e;case"keydown":case"keyup":K=yu;break;case"focusin":pe="focus",K=$a;break;case"focusout":pe="blur",K=$a;break;case"beforeblur":case"afterblur":K=$a;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=fl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=lu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=v;break;case ty:case ny:case iy:K=uu;break;case sy:K=w;break;case"scroll":case"scrollend":K=dl;break;case"wheel":K=$;break;case"copy":case"cut":case"paste":K=hu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Ji;break;case"toggle":case"beforetoggle":K=Re}var Se=(s&4)!==0,it=!Se&&(t==="scroll"||t==="scrollend"),U=Se?H!==null?H+"Capture":null:H;Se=[];for(var V=B,q;V!==null;){var Z=V;if(q=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||q===null||U===null||(Z=Wn(V,U),Z!=null&&Se.push(Fl(V,Z,q))),it)break;V=V.return}0<Se.length&&(H=new K(H,pe,null,r,X),ee.push({event:H,listeners:Se}))}}if((s&7)===0){e:{if(H=t==="mouseover"||t==="pointerover",K=t==="mouseout"||t==="pointerout",H&&r!==cl&&(pe=r.relatedTarget||r.fromElement)&&(Ei(pe)||pe[vi]))break e;if((K||H)&&(H=X.window===X?X:(H=X.ownerDocument)?H.defaultView||H.parentWindow:window,K?(pe=r.relatedTarget||r.toElement,K=B,pe=pe?Ei(pe):null,pe!==null&&(it=c(pe),Se=pe.tag,pe!==it||Se!==5&&Se!==27&&Se!==6)&&(pe=null)):(K=null,pe=B),K!==pe)){if(Se=fl,Z="onMouseLeave",U="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(Se=Ji,Z="onPointerLeave",U="onPointerEnter",V="pointer"),it=K==null?H:En(K),q=pe==null?H:En(pe),H=new Se(Z,V+"leave",K,r,X),H.target=it,H.relatedTarget=q,Z=null,Ei(X)===B&&(Se=new Se(U,V+"enter",pe,r,X),Se.target=q,Se.relatedTarget=it,Z=Se),it=Z,K&&pe)t:{for(Se=sA,U=K,V=pe,q=0,Z=U;Z;Z=Se(Z))q++;Z=0;for(var Ee=V;Ee;Ee=Se(Ee))Z++;for(;0<q-Z;)U=Se(U),q--;for(;0<Z-q;)V=Se(V),Z--;for(;q--;){if(U===V||V!==null&&U===V.alternate){Se=U;break t}U=Se(U),V=Se(V)}Se=null}else Se=null;K!==null&&C_(ee,H,K,Se,!1),pe!==null&&it!==null&&C_(ee,it,pe,Se,!0)}}e:{if(H=B?En(B):window,K=H.nodeName&&H.nodeName.toLowerCase(),K==="select"||K==="input"&&H.type==="file")var He=Hg;else if(Bg(H))if(Gg)He=pb;else{He=fb;var ge=db}else K=H.nodeName,!K||K.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?B&&Vr(B.elementType)&&(He=Hg):He=mb;if(He&&(He=He(t,B))){Fg(ee,He,r,X);break e}ge&&ge(t,H,B),t==="focusout"&&B&&H.type==="number"&&B.memoizedProps.value!=null&&rl(H,"number",H.value)}switch(ge=B?En(B):window,t){case"focusin":(Bg(ge)||ge.contentEditable==="true")&&(Fr=ge,Jd=B,vl=null);break;case"focusout":vl=Jd=Fr=null;break;case"mousedown":Wd=!0;break;case"contextmenu":case"mouseup":case"dragend":Wd=!1,Zg(ee,r,X);break;case"selectionchange":if(yb)break;case"keydown":case"keyup":Zg(ee,r,X)}var je;if(Qe)e:{switch(t){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else Br?Qa(t,r)&&(Pe="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(Pe="onCompositionStart");Pe&&(Ii&&r.locale!=="ko"&&(Br||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&Br&&(je=hl()):(xi=X,ul="value"in xi?xi.value:xi.textContent,Br=!0)),ge=oh(B,Pe),0<ge.length&&(Pe=new Ri(Pe,t,null,r,X),ee.push({event:Pe,listeners:ge}),je?Pe.data=je:(je=qr(r),je!==null&&(Pe.data=je)))),(je=kn?lb(t,r):cb(t,r))&&(Pe=oh(B,"onBeforeInput"),0<Pe.length&&(ge=new Ri("onBeforeInput","beforeinput",null,r,X),ee.push({event:ge,listeners:Pe}),ge.data=je)),eA(ee,t,B,r,X)}w_(ee,s)})}function Fl(t,s,r){return{instance:t,listener:s,currentTarget:r}}function oh(t,s){for(var r=s+"Capture",l=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Wn(t,r),f!=null&&l.unshift(Fl(t,f,m)),f=Wn(t,s),f!=null&&l.push(Fl(t,f,m))),t.tag===3)return l;t=t.return}return[]}function sA(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function C_(t,s,r,l,f){for(var m=s._reactName,_=[];r!==null&&r!==l;){var b=r,D=b.alternate,B=b.stateNode;if(b=b.tag,D!==null&&D===l)break;b!==5&&b!==26&&b!==27||B===null||(D=B,f?(B=Wn(r,m),B!=null&&_.unshift(Fl(r,B,D))):f||(B=Wn(r,m),B!=null&&_.push(Fl(r,B,D)))),r=r.return}_.length!==0&&t.push({event:s,listeners:_})}var aA=/\r\n?/g,rA=/\u0000|\uFFFD/g;function N_(t){return(typeof t=="string"?t:""+t).replace(aA,`
`).replace(rA,"")}function R_(t,s){return s=N_(s),N_(t)===s}function nt(t,s,r,l,f,m){switch(r){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||hn(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&hn(t,""+l);break;case"className":Tn(t,"class",l);break;case"tabIndex":Tn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Tn(t,r,l);break;case"style":ll(t,l,m);break;case"data":if(s!=="object"){Tn(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||r!=="href")){t.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=kr(""+l),t.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(s!=="input"&&nt(t,s,"name",f.name,f,null),nt(t,s,"formEncType",f.formEncType,f,null),nt(t,s,"formMethod",f.formMethod,f,null),nt(t,s,"formTarget",f.formTarget,f,null)):(nt(t,s,"encType",f.encType,f,null),nt(t,s,"method",f.method,f,null),nt(t,s,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=kr(""+l),t.setAttribute(r,l);break;case"onClick":l!=null&&(t.onclick=Jn);break;case"onScroll":l!=null&&Ve("scroll",t);break;case"onScrollEnd":l!=null&&Ve("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(r=l.__html,r!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}r=kr(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""+l):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":l===!0?t.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,l):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(r,l):t.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(r):t.setAttribute(r,l);break;case"popover":Ve("beforetoggle",t),Ve("toggle",t),Or(t,"popover",l);break;case"xlinkActuate":Ct(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ct(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ct(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ct(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ct(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ct(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ct(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ct(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ct(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Or(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=ou.get(r)||r,Or(t,r,l))}}function Am(t,s,r,l,f,m){switch(r){case"style":ll(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(r=l.__html,r!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"children":typeof l=="string"?hn(t,l):(typeof l=="number"||typeof l=="bigint")&&hn(t,""+l);break;case"onScroll":l!=null&&Ve("scroll",t);break;case"onScrollEnd":l!=null&&Ve("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Jn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!tl.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(f=r.endsWith("Capture"),s=r.slice(2,f?r.length-7:void 0),m=t[zt]||null,m=m!=null?m[r]:null,typeof m=="function"&&t.removeEventListener(s,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(s,l,f);break e}r in t?t[r]=l:l===!0?t.setAttribute(r,""):Or(t,r,l)}}}function Xt(t,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",t),Ve("load",t);var l=!1,f=!1,m;for(m in r)if(r.hasOwnProperty(m)){var _=r[m];if(_!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:nt(t,s,m,_,r,null)}}f&&nt(t,s,"srcSet",r.srcSet,r,null),l&&nt(t,s,"src",r.src,r,null);return;case"input":Ve("invalid",t);var b=m=_=f=null,D=null,B=null;for(l in r)if(r.hasOwnProperty(l)){var X=r[l];if(X!=null)switch(l){case"name":f=X;break;case"type":_=X;break;case"checked":D=X;break;case"defaultChecked":B=X;break;case"value":m=X;break;case"defaultValue":b=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(a(137,s));break;default:nt(t,s,l,X,r,null)}}su(t,m,b,D,B,_,f,!1);return;case"select":Ve("invalid",t),l=_=m=null;for(f in r)if(r.hasOwnProperty(f)&&(b=r[f],b!=null))switch(f){case"value":m=b;break;case"defaultValue":_=b;break;case"multiple":l=b;default:nt(t,s,f,b,r,null)}s=m,r=_,t.multiple=!!l,s!=null?Ds(t,!!l,s,!1):r!=null&&Ds(t,!!l,r,!0);return;case"textarea":Ve("invalid",t),m=f=l=null;for(_ in r)if(r.hasOwnProperty(_)&&(b=r[_],b!=null))switch(_){case"value":l=b;break;case"defaultValue":f=b;break;case"children":m=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(a(91));break;default:nt(t,s,_,b,r,null)}js(t,l,f,m);return;case"option":for(D in r)if(r.hasOwnProperty(D)&&(l=r[D],l!=null))switch(D){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:nt(t,s,D,l,r,null)}return;case"dialog":Ve("beforetoggle",t),Ve("toggle",t),Ve("cancel",t),Ve("close",t);break;case"iframe":case"object":Ve("load",t);break;case"video":case"audio":for(l=0;l<Bl.length;l++)Ve(Bl[l],t);break;case"image":Ve("error",t),Ve("load",t);break;case"details":Ve("toggle",t);break;case"embed":case"source":case"link":Ve("error",t),Ve("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in r)if(r.hasOwnProperty(B)&&(l=r[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:nt(t,s,B,l,r,null)}return;default:if(Vr(s)){for(X in r)r.hasOwnProperty(X)&&(l=r[X],l!==void 0&&Am(t,s,X,l,r,void 0));return}}for(b in r)r.hasOwnProperty(b)&&(l=r[b],l!=null&&nt(t,s,b,l,r,null))}function oA(t,s,r,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,_=null,b=null,D=null,B=null,X=null;for(K in r){var ee=r[K];if(r.hasOwnProperty(K)&&ee!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":D=ee;default:l.hasOwnProperty(K)||nt(t,s,K,null,l,ee)}}for(var H in l){var K=l[H];if(ee=r[H],l.hasOwnProperty(H)&&(K!=null||ee!=null))switch(H){case"type":m=K;break;case"name":f=K;break;case"checked":B=K;break;case"defaultChecked":X=K;break;case"value":_=K;break;case"defaultValue":b=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(a(137,s));break;default:K!==ee&&nt(t,s,H,K,l,ee)}}Mr(t,_,b,D,B,X,m,f);return;case"select":K=_=b=H=null;for(m in r)if(D=r[m],r.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":K=D;default:l.hasOwnProperty(m)||nt(t,s,m,null,l,D)}for(f in l)if(m=l[f],D=r[f],l.hasOwnProperty(f)&&(m!=null||D!=null))switch(f){case"value":H=m;break;case"defaultValue":b=m;break;case"multiple":_=m;default:m!==D&&nt(t,s,f,m,l,D)}s=b,r=_,l=K,H!=null?Ds(t,!!r,H,!1):!!l!=!!r&&(s!=null?Ds(t,!!r,s,!0):Ds(t,!!r,r?[]:"",!1));return;case"textarea":K=H=null;for(b in r)if(f=r[b],r.hasOwnProperty(b)&&f!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:nt(t,s,b,null,l,f)}for(_ in l)if(f=l[_],m=r[_],l.hasOwnProperty(_)&&(f!=null||m!=null))switch(_){case"value":H=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==m&&nt(t,s,_,f,l,m)}au(t,H,K);return;case"option":for(var pe in r)if(H=r[pe],r.hasOwnProperty(pe)&&H!=null&&!l.hasOwnProperty(pe))switch(pe){case"selected":t.selected=!1;break;default:nt(t,s,pe,null,l,H)}for(D in l)if(H=l[D],K=r[D],l.hasOwnProperty(D)&&H!==K&&(H!=null||K!=null))switch(D){case"selected":t.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:nt(t,s,D,H,l,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in r)H=r[Se],r.hasOwnProperty(Se)&&H!=null&&!l.hasOwnProperty(Se)&&nt(t,s,Se,null,l,H);for(B in l)if(H=l[B],K=r[B],l.hasOwnProperty(B)&&H!==K&&(H!=null||K!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(a(137,s));break;default:nt(t,s,B,H,l,K)}return;default:if(Vr(s)){for(var it in r)H=r[it],r.hasOwnProperty(it)&&H!==void 0&&!l.hasOwnProperty(it)&&Am(t,s,it,void 0,l,H);for(X in l)H=l[X],K=r[X],!l.hasOwnProperty(X)||H===K||H===void 0&&K===void 0||Am(t,s,X,H,l,K);return}}for(var U in r)H=r[U],r.hasOwnProperty(U)&&H!=null&&!l.hasOwnProperty(U)&&nt(t,s,U,null,l,H);for(ee in l)H=l[ee],K=r[ee],!l.hasOwnProperty(ee)||H===K||H==null&&K==null||nt(t,s,ee,H,l,K)}function I_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function lA(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,r=performance.getEntriesByType("resource"),l=0;l<r.length;l++){var f=r[l],m=f.transferSize,_=f.initiatorType,b=f.duration;if(m&&b&&I_(_)){for(_=0,b=f.responseEnd,l+=1;l<r.length;l++){var D=r[l],B=D.startTime;if(B>b)break;var X=D.transferSize,ee=D.initiatorType;X&&I_(ee)&&(D=D.responseEnd,_+=X*(D<b?1:(b-B)/(D-B)))}if(--l,s+=8*(m+_)/(f.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var wm=null,xm=null;function lh(t){return t.nodeType===9?t:t.ownerDocument}function D_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function j_(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Cm(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Nm=null;function cA(){var t=window.event;return t&&t.type==="popstate"?t===Nm?!1:(Nm=t,!0):(Nm=null,!1)}var O_=typeof setTimeout=="function"?setTimeout:void 0,uA=typeof clearTimeout=="function"?clearTimeout:void 0,M_=typeof Promise=="function"?Promise:void 0,hA=typeof queueMicrotask=="function"?queueMicrotask:typeof M_<"u"?function(t){return M_.resolve(null).then(t).catch(dA)}:O_;function dA(t){setTimeout(function(){throw t})}function ta(t){return t==="head"}function V_(t,s){var r=s,l=0;do{var f=r.nextSibling;if(t.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"||r==="/&"){if(l===0){t.removeChild(f),yo(s);return}l--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")l++;else if(r==="html")Hl(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Hl(r);for(var m=r.firstChild;m;){var _=m.nextSibling,b=m.nodeName;m[_i]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&m.rel.toLowerCase()==="stylesheet"||r.removeChild(m),m=_}}else r==="body"&&Hl(t.ownerDocument.body);r=f}while(r);yo(s)}function k_(t,s){var r=t;t=0;do{var l=r.nextSibling;if(r.nodeType===1?s?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(s?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=l}while(r)}function Rm(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Rm(r),jr(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function fA(t,s,r,l){for(;t.nodeType===1;){var f=r;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[_i])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Fn(t.nextSibling),t===null)break}return null}function mA(t,s,r){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Fn(t.nextSibling),t===null))return null;return t}function P_(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Fn(t.nextSibling),t===null))return null;return t}function Im(t){return t.data==="$?"||t.data==="$~"}function Dm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function pA(t,s){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||r.readyState!=="loading")s();else{var l=function(){s(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Fn(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var jm=null;function L_(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(s===0)return Fn(t.nextSibling);s--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||s++}t=t.nextSibling}return null}function U_(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(s===0)return t;s--}else r!=="/$"&&r!=="/&"||s++}t=t.previousSibling}return null}function z_(t,s,r){switch(s=lh(r),t){case"html":if(t=s.documentElement,!t)throw Error(a(452));return t;case"head":if(t=s.head,!t)throw Error(a(453));return t;case"body":if(t=s.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Hl(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);jr(t)}var Hn=new Map,q_=new Set;function ch(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ds=re.d;re.d={f:gA,r:yA,D:vA,C:_A,L:EA,m:TA,X:bA,S:SA,M:AA};function gA(){var t=ds.f(),s=eh();return t||s}function yA(t){var s=On(t);s!==null&&s.tag===5&&s.type==="form"?sv(s):ds.r(t)}var mo=typeof document>"u"?null:document;function B_(t,s,r){var l=mo;if(l&&typeof s=="string"&&s){var f=un(s);f='link[rel="'+t+'"][href="'+f+'"]',typeof r=="string"&&(f+='[crossorigin="'+r+'"]'),q_.has(f)||(q_.add(f),t={rel:t,crossOrigin:r,href:s},l.querySelector(f)===null&&(s=l.createElement("link"),Xt(s,"link",t),xt(s),l.head.appendChild(s)))}}function vA(t){ds.D(t),B_("dns-prefetch",t,null)}function _A(t,s){ds.C(t,s),B_("preconnect",t,s)}function EA(t,s,r){ds.L(t,s,r);var l=mo;if(l&&t&&s){var f='link[rel="preload"][as="'+un(s)+'"]';s==="image"&&r&&r.imageSrcSet?(f+='[imagesrcset="'+un(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(f+='[imagesizes="'+un(r.imageSizes)+'"]')):f+='[href="'+un(t)+'"]';var m=f;switch(s){case"style":m=po(t);break;case"script":m=go(t)}Hn.has(m)||(t=S({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:t,as:s},r),Hn.set(m,t),l.querySelector(f)!==null||s==="style"&&l.querySelector(Gl(m))||s==="script"&&l.querySelector($l(m))||(s=l.createElement("link"),Xt(s,"link",t),xt(s),l.head.appendChild(s)))}}function TA(t,s){ds.m(t,s);var r=mo;if(r&&t){var l=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+un(l)+'"][href="'+un(t)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=go(t)}if(!Hn.has(m)&&(t=S({rel:"modulepreload",href:t},s),Hn.set(m,t),r.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector($l(m)))return}l=r.createElement("link"),Xt(l,"link",t),xt(l),r.head.appendChild(l)}}}function SA(t,s,r){ds.S(t,s,r);var l=mo;if(l&&t){var f=Ti(l).hoistableStyles,m=po(t);s=s||"default";var _=f.get(m);if(!_){var b={loading:0,preload:null};if(_=l.querySelector(Gl(m)))b.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":s},r),(r=Hn.get(m))&&Om(t,r);var D=_=l.createElement("link");xt(D),Xt(D,"link",t),D._p=new Promise(function(B,X){D.onload=B,D.onerror=X}),D.addEventListener("load",function(){b.loading|=1}),D.addEventListener("error",function(){b.loading|=2}),b.loading|=4,uh(_,s,l)}_={type:"stylesheet",instance:_,count:1,state:b},f.set(m,_)}}}function bA(t,s){ds.X(t,s);var r=mo;if(r&&t){var l=Ti(r).hoistableScripts,f=go(t),m=l.get(f);m||(m=r.querySelector($l(f)),m||(t=S({src:t,async:!0},s),(s=Hn.get(f))&&Mm(t,s),m=r.createElement("script"),xt(m),Xt(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function AA(t,s){ds.M(t,s);var r=mo;if(r&&t){var l=Ti(r).hoistableScripts,f=go(t),m=l.get(f);m||(m=r.querySelector($l(f)),m||(t=S({src:t,async:!0,type:"module"},s),(s=Hn.get(f))&&Mm(t,s),m=r.createElement("script"),xt(m),Xt(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function F_(t,s,r,l){var f=(f=fe.current)?ch(f):null;if(!f)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=po(r.href),r=Ti(f).hoistableStyles,l=r.get(s),l||(l={type:"style",instance:null,count:0,state:null},r.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=po(r.href);var m=Ti(f).hoistableStyles,_=m.get(t);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,_),(m=f.querySelector(Gl(t)))&&!m._p&&(_.instance=m,_.state.loading=5),Hn.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Hn.set(t,r),m||wA(f,t,r,_.state))),s&&l===null)throw Error(a(528,""));return _}if(s&&l!==null)throw Error(a(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=go(r),r=Ti(f).hoistableScripts,l=r.get(s),l||(l={type:"script",instance:null,count:0,state:null},r.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function po(t){return'href="'+un(t)+'"'}function Gl(t){return'link[rel="stylesheet"]['+t+"]"}function H_(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function wA(t,s,r,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),Xt(s,"link",r),xt(s),t.head.appendChild(s))}function go(t){return'[src="'+un(t)+'"]'}function $l(t){return"script[async]"+t}function G_(t,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+un(r.href)+'"]');if(l)return s.instance=l,xt(l),l;var f=S({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),xt(l),Xt(l,"style",f),uh(l,r.precedence,t),s.instance=l;case"stylesheet":f=po(r.href);var m=t.querySelector(Gl(f));if(m)return s.state.loading|=4,s.instance=m,xt(m),m;l=H_(r),(f=Hn.get(f))&&Om(l,f),m=(t.ownerDocument||t).createElement("link"),xt(m);var _=m;return _._p=new Promise(function(b,D){_.onload=b,_.onerror=D}),Xt(m,"link",l),s.state.loading|=4,uh(m,r.precedence,t),s.instance=m;case"script":return m=go(r.src),(f=t.querySelector($l(m)))?(s.instance=f,xt(f),f):(l=r,(f=Hn.get(m))&&(l=S({},r),Mm(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),xt(f),Xt(f,"link",l),t.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,uh(l,r.precedence,t));return s.instance}function uh(t,s,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,_=0;_<l.length;_++){var b=l[_];if(b.dataset.precedence===s)m=b;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(t,s.firstChild))}function Om(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Mm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var hh=null;function $_(t,s,r){if(hh===null){var l=new Map,f=hh=new Map;f.set(r,l)}else f=hh,l=f.get(r),l||(l=new Map,f.set(r,l));if(l.has(t))return l;for(l.set(t,null),r=r.getElementsByTagName(t),f=0;f<r.length;f++){var m=r[f];if(!(m[_i]||m[wt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(s)||"";_=t+_;var b=l.get(_);b?b.push(m):l.set(_,[m])}}return l}function Q_(t,s,r){t=t.ownerDocument||t,t.head.insertBefore(r,s==="title"?t.querySelector("head > title"):null)}function xA(t,s,r){if(r===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function K_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function CA(t,s,r,l){if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=po(l.href),m=s.querySelector(Gl(f));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=dh.bind(t),s.then(t,t)),r.state.loading|=4,r.instance=m,xt(m);return}m=s.ownerDocument||s,l=H_(l),(f=Hn.get(f))&&Om(l,f),m=m.createElement("link"),xt(m);var _=m;_._p=new Promise(function(b,D){_.onload=b,_.onerror=D}),Xt(m,"link",l),r.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=dh.bind(t),s.addEventListener("load",r),s.addEventListener("error",r))}}var Vm=0;function NA(t,s){return t.stylesheets&&t.count===0&&mh(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var l=setTimeout(function(){if(t.stylesheets&&mh(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+s);0<t.imgBytes&&Vm===0&&(Vm=62500*lA());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&mh(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Vm?50:800)+s);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function dh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)mh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var fh=null;function mh(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,fh=new Map,s.forEach(RA,t),fh=null,dh.call(t))}function RA(t,s){if(!(s.state.loading&4)){var r=fh.get(t);if(r)var l=r.get(null);else{r=new Map,fh.set(t,r);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var _=f[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(r.set(_.dataset.precedence,_),l=_)}l&&r.set(null,l)}f=s.instance,_=f.getAttribute("data-precedence"),m=r.get(_)||l,m===l&&r.set(null,f),r.set(_,f),this.count++,l=dh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),s.state.loading|=4}}var Ql={$$typeof:Q,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function IA(t,s,r,l,f,m,_,b,D){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yi(0),this.hiddenUpdates=yi(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Y_(t,s,r,l,f,m,_,b,D,B,X,ee){return t=new IA(t,s,r,_,D,B,X,ee,b),s=1,m===!0&&(s|=24),m=bn(3,null,null,s),t.current=m,m.stateNode=t,s=mf(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:l,isDehydrated:r,cache:s},vf(m),t}function X_(t){return t?(t=$r,t):$r}function J_(t,s,r,l,f,m){f=X_(f),l.context===null?l.context=f:l.pendingContext=f,l=Hs(s),l.payload={element:r},m=m===void 0?null:m,m!==null&&(l.callback=m),r=Gs(t,l,s),r!==null&&(gn(r,t,s),wl(r,t,s))}function W_(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function km(t,s){W_(t,s),(t=t.alternate)&&W_(t,s)}function Z_(t){if(t.tag===13||t.tag===31){var s=Xa(t,67108864);s!==null&&gn(s,t,67108864),km(t,67108864)}}function e0(t){if(t.tag===13||t.tag===31){var s=Nn();s=La(s);var r=Xa(t,s);r!==null&&gn(r,t,s),km(t,s)}}var ph=!0;function DA(t,s,r,l){var f=Y.T;Y.T=null;var m=re.p;try{re.p=2,Pm(t,s,r,l)}finally{re.p=m,Y.T=f}}function jA(t,s,r,l){var f=Y.T;Y.T=null;var m=re.p;try{re.p=8,Pm(t,s,r,l)}finally{re.p=m,Y.T=f}}function Pm(t,s,r,l){if(ph){var f=Lm(l);if(f===null)bm(t,s,l,gh,r),n0(t,l);else if(MA(f,t,s,r,l))l.stopPropagation();else if(n0(t,l),s&4&&-1<OA.indexOf(t)){for(;f!==null;){var m=On(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=pi(m.pendingLanes);if(_!==0){var b=m;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var D=1<<31-yt(_);b.entanglements[1]|=D,_&=~D}Mi(m),(Ke&6)===0&&(Wu=on()+500,ql(0))}}break;case 31:case 13:b=Xa(m,2),b!==null&&gn(b,m,2),eh(),km(m,2)}if(m=Lm(l),m===null&&bm(t,s,l,gh,r),m===f)break;f=m}f!==null&&l.stopPropagation()}else bm(t,s,l,null,r)}}function Lm(t){return t=Mn(t),Um(t)}var gh=null;function Um(t){if(gh=null,t=Ei(t),t!==null){var s=c(t);if(s===null)t=null;else{var r=s.tag;if(r===13){if(t=d(s),t!==null)return t;t=null}else if(r===31){if(t=g(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return gh=t,null}function t0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ma()){case Xo:return 2;case Jo:return 8;case Rs:case Hd:return 32;case Kc:return 268435456;default:return 32}default:return 32}}var zm=!1,na=null,ia=null,sa=null,Kl=new Map,Yl=new Map,aa=[],OA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function n0(t,s){switch(t){case"focusin":case"focusout":na=null;break;case"dragenter":case"dragleave":ia=null;break;case"mouseover":case"mouseout":sa=null;break;case"pointerover":case"pointerout":Kl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yl.delete(s.pointerId)}}function Xl(t,s,r,l,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:r,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},s!==null&&(s=On(s),s!==null&&Z_(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),t)}function MA(t,s,r,l,f){switch(s){case"focusin":return na=Xl(na,t,s,r,l,f),!0;case"dragenter":return ia=Xl(ia,t,s,r,l,f),!0;case"mouseover":return sa=Xl(sa,t,s,r,l,f),!0;case"pointerover":var m=f.pointerId;return Kl.set(m,Xl(Kl.get(m)||null,t,s,r,l,f)),!0;case"gotpointercapture":return m=f.pointerId,Yl.set(m,Xl(Yl.get(m)||null,t,s,r,l,f)),!0}return!1}function i0(t){var s=Ei(t.target);if(s!==null){var r=c(s);if(r!==null){if(s=r.tag,s===13){if(s=d(r),s!==null){t.blockedOn=s,Yn(t.priority,function(){e0(r)});return}}else if(s===31){if(s=g(r),s!==null){t.blockedOn=s,Yn(t.priority,function(){e0(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yh(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=Lm(t.nativeEvent);if(r===null){r=t.nativeEvent;var l=new r.constructor(r.type,r);cl=l,r.target.dispatchEvent(l),cl=null}else return s=On(r),s!==null&&Z_(s),t.blockedOn=r,!1;s.shift()}return!0}function s0(t,s,r){yh(t)&&r.delete(s)}function VA(){zm=!1,na!==null&&yh(na)&&(na=null),ia!==null&&yh(ia)&&(ia=null),sa!==null&&yh(sa)&&(sa=null),Kl.forEach(s0),Yl.forEach(s0)}function vh(t,s){t.blockedOn===s&&(t.blockedOn=null,zm||(zm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,VA)))}var _h=null;function a0(t){_h!==t&&(_h=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){_h===t&&(_h=null);for(var s=0;s<t.length;s+=3){var r=t[s],l=t[s+1],f=t[s+2];if(typeof l!="function"){if(Um(l||r)===null)continue;break}var m=On(r);m!==null&&(t.splice(s,3),s-=3,Lf(m,{pending:!0,data:f,method:r.method,action:l},l,f))}}))}function yo(t){function s(D){return vh(D,t)}na!==null&&vh(na,t),ia!==null&&vh(ia,t),sa!==null&&vh(sa,t),Kl.forEach(s),Yl.forEach(s);for(var r=0;r<aa.length;r++){var l=aa[r];l.blockedOn===t&&(l.blockedOn=null)}for(;0<aa.length&&(r=aa[0],r.blockedOn===null);)i0(r),r.blockedOn===null&&aa.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var f=r[l],m=r[l+1],_=f[zt]||null;if(typeof m=="function")_||a0(r);else if(_){var b=null;if(m&&m.hasAttribute("formAction")){if(f=m,_=m[zt]||null)b=_.formAction;else if(Um(f)!==null)continue}else b=_.action;typeof b=="function"?r[l+1]=b:(r.splice(l,3),l-=3),a0(r)}}}function r0(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),l||setTimeout(r,20)}function r(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(r,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function qm(t){this._internalRoot=t}Eh.prototype.render=qm.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(a(409));var r=s.current,l=Nn();J_(r,l,t,s,null,null)},Eh.prototype.unmount=qm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;J_(t.current,2,null,t,null,null),eh(),s[vi]=null}};function Eh(t){this._internalRoot=t}Eh.prototype.unstable_scheduleHydration=function(t){if(t){var s=eu();t={blockedOn:null,target:t,priority:s};for(var r=0;r<aa.length&&s!==0&&s<aa[r].priority;r++);aa.splice(r,0,t),r===0&&i0(t)}};var o0=e.version;if(o0!=="19.2.0")throw Error(a(527,o0,"19.2.0"));re.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=y(s),t=t!==null?T(t):null,t=t===null?null:t.stateNode,t};var kA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Th.isDisabled&&Th.supportsFiber)try{Qn=Th.inject(kA),Gt=Th}catch{}}return Wl.createRoot=function(t,s){if(!o(t))throw Error(a(299));var r=!1,l="",f=mv,m=pv,_=gv;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=Y_(t,1,!1,null,null,r,l,null,f,m,_,r0),t[vi]=s.current,Sm(t),new qm(s)},Wl.hydrateRoot=function(t,s,r){if(!o(t))throw Error(a(299));var l=!1,f="",m=mv,_=pv,b=gv,D=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError),r.formState!==void 0&&(D=r.formState)),s=Y_(t,1,!0,s,r??null,l,f,D,m,_,b,r0),s.context=X_(null),r=s.current,l=Nn(),l=La(l),f=Hs(l),f.callback=null,Gs(r,f,l),r=l,s.current.lanes=r,ka(s,r),Mi(s),t[vi]=s.current,Sm(t),new Eh(s)},Wl.version="19.2.0",Wl}var y0;function $A(){if(y0)return Hm.exports;y0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Hm.exports=GA(),Hm.exports}var QA=$A();const KA=()=>{};var v0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1=function(i){const e=[];let n=0;for(let a=0;a<i.length;a++){let o=i.charCodeAt(a);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&a+1<i.length&&(i.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++a)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},YA=function(i){const e=[];let n=0,a=0;for(;n<i.length;){const o=i[n++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[n++];e[a++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[n++],d=i[n++],g=i[n++],p=((o&7)<<18|(c&63)<<12|(d&63)<<6|g&63)-65536;e[a++]=String.fromCharCode(55296+(p>>10)),e[a++]=String.fromCharCode(56320+(p&1023))}else{const c=i[n++],d=i[n++];e[a++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},r1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<i.length;o+=3){const c=i[o],d=o+1<i.length,g=d?i[o+1]:0,p=o+2<i.length,y=p?i[o+2]:0,T=c>>2,S=(c&3)<<4|g>>4;let A=(g&15)<<2|y>>6,C=y&63;p||(C=64,d||(A=64)),a.push(n[T],n[S],n[A],n[C])}return a.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(a1(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):YA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<i.length;){const c=n[i.charAt(o++)],g=o<i.length?n[i.charAt(o)]:0;++o;const y=o<i.length?n[i.charAt(o)]:64;++o;const S=o<i.length?n[i.charAt(o)]:64;if(++o,c==null||g==null||y==null||S==null)throw new XA;const A=c<<2|g>>4;if(a.push(A),y!==64){const C=g<<4&240|y>>2;if(a.push(C),S!==64){const L=y<<6&192|S;a.push(L)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class XA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JA=function(i){const e=a1(i);return r1.encodeByteArray(e,!0)},Gh=function(i){return JA(i).replace(/\./g,"")},o1=function(i){try{return r1.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=()=>WA().__FIREBASE_DEFAULTS__,ew=()=>{if(typeof process>"u"||typeof v0>"u")return;const i=v0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},tw=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&o1(i[1]);return e&&JSON.parse(e)},fd=()=>{try{return KA()||ZA()||ew()||tw()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},l1=i=>fd()?.emulatorHosts?.[i],nw=i=>{const e=l1(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),a]:[e.substring(0,n),a]},c1=()=>fd()?.config,u1=i=>fd()?.[`_${i}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function h1(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Gh(JSON.stringify(n)),Gh(JSON.stringify(d)),""].join(".")}const oc={};function aw(){const i={prod:[],emulator:[]};for(const e of Object.keys(oc))oc[e]?i.emulator.push(e):i.prod.push(e);return i}function rw(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let _0=!1;function d1(i,e){if(typeof window>"u"||typeof document>"u"||!Po(window.location.host)||oc[i]===e||oc[i]||_0)return;oc[i]=e;function n(A){return`__firebase__banner__${A}`}const a="__firebase__banner",c=aw().prod.length>0;function d(){const A=document.getElementById(a);A&&A.remove()}function g(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function p(A,C){A.setAttribute("width","24"),A.setAttribute("id",C),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function y(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{_0=!0,d()},A}function T(A,C){A.setAttribute("id",C),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function S(){const A=rw(a),C=n("text"),L=document.getElementById(C)||document.createElement("span"),G=n("learnmore"),F=document.getElementById(G)||document.createElement("a"),te=n("preprendIcon"),ne=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const Q=A.element;g(Q),T(F,G);const le=y();p(ne,te),Q.append(ne,L,F,le),document.body.appendChild(Q)}c?(L.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ow(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function lw(){const i=fd()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uw(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function hw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dw(){const i=rn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function fw(){return!lw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mw(){try{return typeof indexedDB=="object"}catch{return!1}}function pw(){return new Promise((i,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(a),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw="FirebaseError";class xs extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=gw,Object.setPrototypeOf(this,xs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xc.prototype.create)}}class xc{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?yw(c,a):"Error",g=`${this.serviceName}: ${d} (${o}).`;return new xs(o,g,a)}}function yw(i,e){return i.replace(vw,(n,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const vw=/\{\$([^}]+)}/g;function _w(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function pr(i,e){if(i===e)return!0;const n=Object.keys(i),a=Object.keys(e);for(const o of n){if(!a.includes(o))return!1;const c=i[o],d=e[o];if(E0(c)&&E0(d)){if(!pr(c,d))return!1}else if(c!==d)return!1}for(const o of a)if(!n.includes(o))return!1;return!0}function E0(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(i){const e=[];for(const[n,a]of Object.entries(i))Array.isArray(a)?a.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function tc(i){const e={};return i.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[o,c]=a.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function nc(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function Ew(i,e){const n=new Tw(i,e);return n.subscribe.bind(n)}class Tw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,a){let o;if(e===void 0&&n===void 0&&a===void 0)throw new Error("Missing Observer.");Sw(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:a},o.next===void 0&&(o.next=Km),o.error===void 0&&(o.error=Km),o.complete===void 0&&(o.complete=Km);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Sw(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Km(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(i){return i&&i._delegate?i._delegate:i}class gr{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new iw;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ww(e))try{this.getOrInitializeService({instanceIdentifier:cr})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});a.resolve(c)}catch{}}}}clearInstance(e=cr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cr){return this.instances.has(e)}getOptions(e=cr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[c,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);a===g&&d.resolve(o)}return o}onInit(e,n){const a=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const c=this.instances.get(a);return c&&e(c,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const o of a)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:Aw(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=cr){return this.component?this.component.multipleInstances?e:cr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Aw(i){return i===cr?void 0:i}function ww(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new bw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Le||(Le={}));const Cw={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},Nw=Le.INFO,Rw={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},Iw=(i,e,...n)=>{if(e<i.logLevel)return;const a=new Date().toISOString(),o=Rw[e];if(o)console[o](`[${a}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fp{constructor(e){this.name=e,this._logLevel=Nw,this._logHandler=Iw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Cw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const Dw=(i,e)=>e.some(n=>i instanceof n);let T0,S0;function jw(){return T0||(T0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ow(){return S0||(S0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const f1=new WeakMap,dp=new WeakMap,m1=new WeakMap,Ym=new WeakMap,Hp=new WeakMap;function Mw(i){const e=new Promise((n,a)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",d)},c=()=>{n(pa(i.result)),o()},d=()=>{a(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&f1.set(n,i)}).catch(()=>{}),Hp.set(e,i),e}function Vw(i){if(dp.has(i))return;const e=new Promise((n,a)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",d),i.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{a(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",d),i.addEventListener("abort",d)});dp.set(i,e)}let fp={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return dp.get(i);if(e==="objectStoreNames")return i.objectStoreNames||m1.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pa(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function kw(i){fp=i(fp)}function Pw(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=i.call(Xm(this),e,...n);return m1.set(a,e.sort?e.sort():[e]),pa(a)}:Ow().includes(i)?function(...e){return i.apply(Xm(this),e),pa(f1.get(this))}:function(...e){return pa(i.apply(Xm(this),e))}}function Lw(i){return typeof i=="function"?Pw(i):(i instanceof IDBTransaction&&Vw(i),Dw(i,jw())?new Proxy(i,fp):i)}function pa(i){if(i instanceof IDBRequest)return Mw(i);if(Ym.has(i))return Ym.get(i);const e=Lw(i);return e!==i&&(Ym.set(i,e),Hp.set(e,i)),e}const Xm=i=>Hp.get(i);function Uw(i,e,{blocked:n,upgrade:a,blocking:o,terminated:c}={}){const d=indexedDB.open(i,e),g=pa(d);return a&&d.addEventListener("upgradeneeded",p=>{a(pa(d.result),p.oldVersion,p.newVersion,pa(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{c&&p.addEventListener("close",()=>c()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const zw=["get","getKey","getAll","getAllKeys","count"],qw=["put","add","delete","clear"],Jm=new Map;function b0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Jm.get(e))return Jm.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,o=qw.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(o||zw.includes(n)))return;const c=async function(d,...g){const p=this.transaction(d,o?"readwrite":"readonly");let y=p.store;return a&&(y=y.index(g.shift())),(await Promise.all([y[n](...g),o&&p.done]))[0]};return Jm.set(e,c),c}kw(i=>({...i,get:(e,n,a)=>b0(e,n)||i.get(e,n,a),has:(e,n)=>!!b0(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Fw(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function Fw(i){return i.getComponent()?.type==="VERSION"}const mp="@firebase/app",A0="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new Fp("@firebase/app"),Hw="@firebase/app-compat",Gw="@firebase/analytics-compat",$w="@firebase/analytics",Qw="@firebase/app-check-compat",Kw="@firebase/app-check",Yw="@firebase/auth",Xw="@firebase/auth-compat",Jw="@firebase/database",Ww="@firebase/data-connect",Zw="@firebase/database-compat",ex="@firebase/functions",tx="@firebase/functions-compat",nx="@firebase/installations",ix="@firebase/installations-compat",sx="@firebase/messaging",ax="@firebase/messaging-compat",rx="@firebase/performance",ox="@firebase/performance-compat",lx="@firebase/remote-config",cx="@firebase/remote-config-compat",ux="@firebase/storage",hx="@firebase/storage-compat",dx="@firebase/firestore",fx="@firebase/ai",mx="@firebase/firestore-compat",px="firebase",gx="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="[DEFAULT]",yx={[mp]:"fire-core",[Hw]:"fire-core-compat",[$w]:"fire-analytics",[Gw]:"fire-analytics-compat",[Kw]:"fire-app-check",[Qw]:"fire-app-check-compat",[Yw]:"fire-auth",[Xw]:"fire-auth-compat",[Jw]:"fire-rtdb",[Ww]:"fire-data-connect",[Zw]:"fire-rtdb-compat",[ex]:"fire-fn",[tx]:"fire-fn-compat",[nx]:"fire-iid",[ix]:"fire-iid-compat",[sx]:"fire-fcm",[ax]:"fire-fcm-compat",[rx]:"fire-perf",[ox]:"fire-perf-compat",[lx]:"fire-rc",[cx]:"fire-rc-compat",[ux]:"fire-gcs",[hx]:"fire-gcs-compat",[dx]:"fire-fst",[mx]:"fire-fst-compat",[fx]:"fire-vertex","fire-js":"fire-js",[px]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h=new Map,vx=new Map,gp=new Map;function w0(i,e){try{i.container.addComponent(e)}catch(n){Ts.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Io(i){const e=i.name;if(gp.has(e))return Ts.debug(`There were multiple attempts to register component ${e}.`),!1;gp.set(e,i);for(const n of $h.values())w0(n,i);for(const n of vx.values())w0(n,i);return!0}function Gp(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Gn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ga=new xc("app","Firebase",_x);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,n,a){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new gr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ga.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=gx;function p1(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const a={name:pp,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw ga.create("bad-app-name",{appName:String(o)});if(n||(n=c1()),!n)throw ga.create("no-options");const c=$h.get(o);if(c){if(pr(n,c.options)&&pr(a,c.config))return c;throw ga.create("duplicate-app",{appName:o})}const d=new xw(o);for(const p of gp.values())d.addComponent(p);const g=new Ex(n,a,d);return $h.set(o,g),g}function g1(i=pp){const e=$h.get(i);if(!e&&i===pp&&c1())return p1();if(!e)throw ga.create("no-app",{appName:i});return e}function ya(i,e,n){let a=yx[i]??i;n&&(a+=`-${n}`);const o=a.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${a}" with version "${e}":`];o&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ts.warn(d.join(" "));return}Io(new gr(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx="firebase-heartbeat-database",Sx=1,fc="firebase-heartbeat-store";let Wm=null;function y1(){return Wm||(Wm=Uw(Tx,Sx,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(fc)}catch(n){console.warn(n)}}}}).catch(i=>{throw ga.create("idb-open",{originalErrorMessage:i.message})})),Wm}async function bx(i){try{const n=(await y1()).transaction(fc),a=await n.objectStore(fc).get(v1(i));return await n.done,a}catch(e){if(e instanceof xs)Ts.warn(e.message);else{const n=ga.create("idb-get",{originalErrorMessage:e?.message});Ts.warn(n.message)}}}async function x0(i,e){try{const a=(await y1()).transaction(fc,"readwrite");await a.objectStore(fc).put(e,v1(i)),await a.done}catch(n){if(n instanceof xs)Ts.warn(n.message);else{const a=ga.create("idb-set",{originalErrorMessage:n?.message});Ts.warn(a.message)}}}function v1(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=1024,wx=30;class xx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Nx(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=C0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:n}),this._heartbeatsCache.heartbeats.length>wx){const o=Rx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ts.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=C0(),{heartbeatsToSend:n,unsentEntries:a}=Cx(this._heartbeatsCache.heartbeats),o=Gh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Ts.warn(e),""}}}function C0(){return new Date().toISOString().substring(0,10)}function Cx(i,e=Ax){const n=[];let a=i.slice();for(const o of i){const c=n.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),N0(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),N0(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class Nx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mw()?pw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bx(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return x0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return x0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function N0(i){return Gh(JSON.stringify({version:2,heartbeats:i})).length}function Rx(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let a=1;a<i.length;a++)i[a].date<n&&(n=i[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(i){Io(new gr("platform-logger",e=>new Bw(e),"PRIVATE")),Io(new gr("heartbeat",e=>new xx(e),"PRIVATE")),ya(mp,A0,i),ya(mp,A0,"esm2020"),ya("fire-js","")}Ix("");var Dx="firebase",jx="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ya(Dx,jx,"app");function _1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ox=_1,E1=new xc("auth","Firebase",_1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh=new Fp("@firebase/auth");function Mx(i,...e){Qh.logLevel<=Le.WARN&&Qh.warn(`Auth (${Lo}): ${i}`,...e)}function jh(i,...e){Qh.logLevel<=Le.ERROR&&Qh.error(`Auth (${Lo}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(i,...e){throw $p(i,...e)}function Li(i,...e){return $p(i,...e)}function T1(i,e,n){const a={...Ox(),[e]:n};return new xc("auth","Firebase",a).create(e,{appName:i.name})}function ys(i){return T1(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $p(i,...e){if(typeof i!="string"){const n=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=i.name),i._errorFactory.create(n,...a)}return E1.create(i,...e)}function be(i,e,...n){if(!i)throw $p(e,...n)}function ps(i){const e="INTERNAL ASSERTION FAILED: "+i;throw jh(e),new Error(e)}function Ss(i,e){i||ps(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(){return typeof self<"u"&&self.location?.href||""}function Vx(){return R0()==="http:"||R0()==="https:"}function R0(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Vx()||uw()||"connection"in navigator)?navigator.onLine:!0}function Px(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ss(n>e,"Short delay should be less than long delay!"),this.isMobile=ow()||hw()}get(){return kx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(i,e){Ss(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{static initialize(e,n,a){this.fetchImpl=e,n&&(this.headersImpl=n),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zx=new Nc(3e4,6e4);function xa(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Ca(i,e,n,a,o={}){return b1(i,o,async()=>{let c={},d={};a&&(e==="GET"?d=a:c={body:JSON.stringify(a)});const g=Cc({key:i.config.apiKey,...d}).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const y={method:e,headers:p,...c};return cw()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&Po(i.emulatorConfig.host)&&(y.credentials="include"),S1.fetch()(await A1(i,i.config.apiHost,n,g),y)})}async function b1(i,e,n){i._canInitEmulator=!1;const a={...Lx,...e};try{const o=new Bx(i),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Sh(i,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const g=c.ok?d.errorMessage:d.error.message,[p,y]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sh(i,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw Sh(i,"email-already-in-use",d);if(p==="USER_DISABLED")throw Sh(i,"user-disabled",d);const T=a[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw T1(i,T,y);ui(i,T)}}catch(o){if(o instanceof xs)throw o;ui(i,"network-request-failed",{message:String(o)})}}async function Rc(i,e,n,a,o={}){const c=await Ca(i,e,n,a,o);return"mfaPendingCredential"in c&&ui(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function A1(i,e,n,a){const o=`${e}${n}?${a}`,c=i,d=c.config.emulator?Qp(i.config,o):`${i.config.apiScheme}://${o}`;return Ux.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function qx(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Bx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,a)=>{this.timer=setTimeout(()=>a(Li(this.auth,"network-request-failed")),zx.get())})}}function Sh(i,e,n){const a={appName:i.name};n.email&&(a.email=n.email),n.phoneNumber&&(a.phoneNumber=n.phoneNumber);const o=Li(i,e,a);return o.customData._tokenResponse=n,o}function I0(i){return i!==void 0&&i.enterprise!==void 0}class Fx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return qx(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Hx(i,e){return Ca(i,"GET","/v2/recaptchaConfig",xa(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gx(i,e){return Ca(i,"POST","/v1/accounts:delete",e)}async function Kh(i,e){return Ca(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $x(i,e=!1){const n=Vt(i),a=await n.getIdToken(e),o=Kp(a);be(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c?.sign_in_provider;return{claims:o,token:a,authTime:lc(Zm(o.auth_time)),issuedAtTime:lc(Zm(o.iat)),expirationTime:lc(Zm(o.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Zm(i){return Number(i)*1e3}function Kp(i){const[e,n,a]=i.split(".");if(e===void 0||n===void 0||a===void 0)return jh("JWT malformed, contained fewer than 3 sections"),null;try{const o=o1(n);return o?JSON.parse(o):(jh("Failed to decode base64 JWT payload"),null)}catch(o){return jh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function D0(i){const e=Kp(i);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(i,e,n=!1){if(n)return e;try{return await e}catch(a){throw a instanceof xs&&Qx(a)&&i.auth.currentUser===i&&await i.auth.signOut(),a}}function Qx({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=lc(this.lastLoginAt),this.creationTime=lc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yh(i){const e=i.auth,n=await i.getIdToken(),a=await mc(i,Kh(e,{idToken:n}));be(a?.users.length,e,"internal-error");const o=a.users[0];i._notifyReloadListener(o);const c=o.providerUserInfo?.length?w1(o.providerUserInfo):[],d=Xx(i.providerData,c),g=i.isAnonymous,p=!(i.email&&o.passwordHash)&&!d?.length,y=g?p:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new vp(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(i,T)}async function Yx(i){const e=Vt(i);await Yh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Xx(i,e){return[...i.filter(a=>!e.some(o=>o.providerId===a.providerId)),...e]}function w1(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jx(i,e){const n=await b1(i,{},async()=>{const a=Cc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,d=await A1(i,o,"/v1/token",`key=${c}`),g=await i._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:a};return i.emulatorConfig&&Po(i.emulatorConfig.host)&&(p.credentials="include"),S1.fetch()(d,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Wx(i,e){return Ca(i,"POST","/v2/accounts:revokeToken",xa(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):D0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){be(e.length!==0,"internal-error");const n=D0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:a,refreshToken:o,expiresIn:c}=await Jx(e,n);this.updateTokensAndExpiration(a,o,Number(c))}updateTokensAndExpiration(e,n,a){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,n){const{refreshToken:a,accessToken:o,expirationTime:c}=n,d=new Ao;return a&&(be(typeof a=="string","internal-error",{appName:e}),d.refreshToken=a),o&&(be(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(be(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ao,this.toJSON())}_performRefresh(){return ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(i,e){be(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ci{constructor({uid:e,auth:n,stsTokenManager:a,...o}){this.providerId="firebase",this.proactiveRefresh=new Kx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new vp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await mc(this,this.stsTokenManager.getToken(this.auth,e));return be(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return $x(this,e)}reload(){return Yx(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ci({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),n&&await Yh(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gn(this.auth.app))return Promise.reject(ys(this.auth));const e=await this.getIdToken();return await mc(this,Gx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const a=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,g=n.tenantId??void 0,p=n._redirectEventId??void 0,y=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:S,emailVerified:A,isAnonymous:C,providerData:L,stsTokenManager:G}=n;be(S&&G,e,"internal-error");const F=Ao.fromJSON(this.name,G);be(typeof S=="string",e,"internal-error"),oa(a,e.name),oa(o,e.name),be(typeof A=="boolean",e,"internal-error"),be(typeof C=="boolean",e,"internal-error"),oa(c,e.name),oa(d,e.name),oa(g,e.name),oa(p,e.name),oa(y,e.name),oa(T,e.name);const te=new ci({uid:S,auth:e,email:o,emailVerified:A,displayName:a,isAnonymous:C,photoURL:d,phoneNumber:c,tenantId:g,stsTokenManager:F,createdAt:y,lastLoginAt:T});return L&&Array.isArray(L)&&(te.providerData=L.map(ne=>({...ne}))),p&&(te._redirectEventId=p),te}static async _fromIdTokenResponse(e,n,a=!1){const o=new Ao;o.updateFromServerResponse(n);const c=new ci({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:a});return await Yh(c),c}static async _fromGetAccountInfoResponse(e,n,a){const o=n.users[0];be(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?w1(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!c?.length,g=new Ao;g.updateFromIdToken(a);const p=new ci({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new vp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0=new Map;function gs(i){Ss(i instanceof Function,"Expected a class definition");let e=j0.get(i);return e?(Ss(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,j0.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}x1.type="NONE";const O0=x1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(i,e,n){return`firebase:${i}:${e}:${n}`}class wo{constructor(e,n,a){this.persistence=e,this.auth=n,this.userKey=a;const{config:o,name:c}=this.auth;this.fullUserKey=Oh(this.userKey,o.apiKey,c),this.fullPersistenceKey=Oh("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Kh(this.auth,{idToken:e}).catch(()=>{});return n?ci._fromGetAccountInfoResponse(this.auth,n,e):null}return ci._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,a="authUser"){if(!n.length)return new wo(gs(O0),e,a);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||gs(O0);const d=Oh(a,e.config.apiKey,e.name);let g=null;for(const y of n)try{const T=await y._get(d);if(T){let S;if(typeof T=="string"){const A=await Kh(e,{idToken:T}).catch(()=>{});if(!A)break;S=await ci._fromGetAccountInfoResponse(e,A,T)}else S=ci._fromJSON(e,T);y!==c&&(g=S),c=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new wo(c,e,a):(c=p[0],g&&await c._set(d,g.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new wo(c,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(I1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(C1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(j1(e))return"Blackberry";if(O1(e))return"Webos";if(N1(e))return"Safari";if((e.includes("chrome/")||R1(e))&&!e.includes("edge/"))return"Chrome";if(D1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=i.match(n);if(a?.length===2)return a[1]}return"Other"}function C1(i=rn()){return/firefox\//i.test(i)}function N1(i=rn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function R1(i=rn()){return/crios\//i.test(i)}function I1(i=rn()){return/iemobile/i.test(i)}function D1(i=rn()){return/android/i.test(i)}function j1(i=rn()){return/blackberry/i.test(i)}function O1(i=rn()){return/webos/i.test(i)}function Yp(i=rn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function Zx(i=rn()){return Yp(i)&&!!window.navigator?.standalone}function eC(){return dw()&&document.documentMode===10}function M1(i=rn()){return Yp(i)||D1(i)||O1(i)||j1(i)||/windows phone/i.test(i)||I1(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(i,e=[]){let n;switch(i){case"Browser":n=M0(rn());break;case"Worker":n=`${M0(rn())}-${i}`;break;default:n=i}const a=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Lo}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const a=c=>new Promise((d,g)=>{try{const p=e(c);d(p)}catch(p){g(p)}});a.onAbort=n,this.queue.push(a);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const a of this.queue)await a(e),a.onAbort&&n.push(a.onAbort)}catch(a){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nC(i,e={}){return Ca(i,"GET","/v2/passwordPolicy",xa(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=6;class sC{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??iC,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const a=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;a&&(n.meetsMinPasswordLength=e.length>=a),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let a;for(let o=0;o<e.length;o++)a=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,n,a,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,n,a,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=a,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new V0(this),this.idTokenSubscription=new V0(this),this.beforeStateQueue=new tC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=E1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gs(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await wo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Kh(this,{idToken:e}),a=await ci._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(a)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Gn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=a?._redirectEventId,g=await this.tryRedirectSignIn(e);(!c||c===d)&&g?.user&&(a=g.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Px()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gn(this.app))return Promise.reject(ys(this));const n=e?Vt(e):null;return n&&be(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gn(this.app)?Promise.reject(ys(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gn(this.app)?Promise.reject(ys(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nC(this),n=new sC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xc("auth","Firebase",e())}onAuthStateChanged(e,n,a){return this.registerStateListener(this.authStateSubscription,e,n,a)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,a){return this.registerStateListener(this.idTokenSubscription,e,n,a)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(a.tenantId=this.tenantId),await Wx(this,a)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const a=await this.getOrInitRedirectPersistenceManager(n);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gs(e)||this._popupRedirectResolver;be(n,this,"argument-error"),this.redirectPersistenceManager=await wo.create(this,[gs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,a,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(g,this,"internal-error"),g.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,a,o);return()=>{d=!0,p()}}else{const p=e.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=V1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){if(Gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Mx(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Sr(i){return Vt(i)}class V0{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ew(n=>this.observer=n)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let md={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rC(i){md=i}function k1(i){return md.loadJS(i)}function oC(){return md.recaptchaEnterpriseScript}function lC(){return md.gapiScript}function cC(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class uC{constructor(){this.enterprise=new hC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class hC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const dC="recaptcha-enterprise",P1="NO_RECAPTCHA";class fC{constructor(e){this.type=dC,this.auth=Sr(e)}async verify(e="verify",n=!1){async function a(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,g)=>{Hx(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const y=new Fx(p);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,d(y.siteKey)}}).catch(p=>{g(p)})})}function o(c,d,g){const p=window.grecaptcha;I0(p)?p.enterprise.ready(()=>{p.enterprise.execute(c,{action:e}).then(y=>{d(y)}).catch(()=>{d(P1)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new uC().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{a(this.auth).then(g=>{if(!n&&I0(window.grecaptcha))o(g,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let p=oC();p.length!==0&&(p+=g),k1(p).then(()=>{o(g,c,d)}).catch(y=>{d(y)})}}).catch(g=>{d(g)})})}}async function k0(i,e,n,a=!1,o=!1){const c=new fC(i);let d;if(o)d=P1;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const g={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const p=g.phoneEnrollmentInfo.phoneNumber,y=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const p=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return a?Object.assign(g,{captchaResp:d}):Object.assign(g,{captchaResponse:d}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function _p(i,e,n,a,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await k0(i,e,n,n==="getOobCode");return a(i,c)}else return a(i,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await k0(i,e,n,n==="getOobCode");return a(i,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(i,e){const n=Gp(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(pr(c,e??{}))return o;ui(o,"already-initialized")}return n.initialize({options:e})}function pC(i,e){const n=e?.persistence||[],a=(Array.isArray(n)?n:[n]).map(gs);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(a,e?.popupRedirectResolver)}function gC(i,e,n){const a=Sr(i);be(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const o=!1,c=L1(e),{host:d,port:g}=yC(e),p=g===null?"":`:${g}`,y={url:`${c}//${d}${p}/`},T=Object.freeze({host:d,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!a._canInitEmulator){be(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),be(pr(y,a.config.emulator)&&pr(T,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=y,a.emulatorConfig=T,a.settings.appVerificationDisabledForTesting=!0,Po(d)?(h1(`${c}//${d}${p}`),d1("Auth",!0)):vC()}function L1(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function yC(i){const e=L1(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const a=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(a);if(o){const c=o[1];return{host:c,port:P0(a.substr(c.length+1))}}else{const[c,d]=a.split(":");return{host:c,port:P0(d)}}}function P0(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function vC(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ps("not implemented")}_getIdTokenResponse(e){return ps("not implemented")}_linkToIdToken(e,n){return ps("not implemented")}_getReauthenticationResolver(e){return ps("not implemented")}}async function _C(i,e){return Ca(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EC(i,e){return Rc(i,"POST","/v1/accounts:signInWithPassword",xa(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(i,e){return Rc(i,"POST","/v1/accounts:signInWithEmailLink",xa(i,e))}async function SC(i,e){return Rc(i,"POST","/v1/accounts:signInWithEmailLink",xa(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc extends Xp{constructor(e,n,a,o=null){super("password",a),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new pc(e,n,"password")}static _fromEmailAndCode(e,n,a=null){return new pc(e,n,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _p(e,n,"signInWithPassword",EC);case"emailLink":return TC(e,{email:this._email,oobCode:this._password});default:ui(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const a={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _p(e,a,"signUpPassword",_C);case"emailLink":return SC(e,{idToken:n,email:this._email,oobCode:this._password});default:ui(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(i,e){return Rc(i,"POST","/v1/accounts:signInWithIdp",xa(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC="http://localhost";class yr extends Xp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new yr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ui("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:o,...c}=n;if(!a||!o)return null;const d=new yr(a,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return xo(e,n)}_linkToIdToken(e,n){const a=this.buildRequest();return a.idToken=n,xo(e,a)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,xo(e,n)}buildRequest(){const e={requestUri:bC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Cc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wC(i){const e=tc(nc(i)).link,n=e?tc(nc(e)).deep_link_id:null,a=tc(nc(i)).deep_link_id;return(a?tc(nc(a)).link:null)||a||n||e||i}class Jp{constructor(e){const n=tc(nc(e)),a=n.apiKey??null,o=n.oobCode??null,c=AC(n.mode??null);be(a&&o&&c,"argument-error"),this.apiKey=a,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=wC(e);try{return new Jp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(){this.providerId=Uo.PROVIDER_ID}static credential(e,n){return pc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const a=Jp.parseLink(n);return be(a,"argument-error"),pc._fromEmailAndCode(e,a.code,a.tenantId)}}Uo.PROVIDER_ID="password";Uo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Uo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic extends U1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua extends Ic{constructor(){super("facebook.com")}static credential(e){return yr._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ua.credential(e.oauthAccessToken)}catch{return null}}}ua.FACEBOOK_SIGN_IN_METHOD="facebook.com";ua.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends Ic{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return yr._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:a}=e;if(!n&&!a)return null;try{return ha.credential(n,a)}catch{return null}}}ha.GOOGLE_SIGN_IN_METHOD="google.com";ha.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da extends Ic{constructor(){super("github.com")}static credential(e){return yr._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return da.credential(e.oauthAccessToken)}catch{return null}}}da.GITHUB_SIGN_IN_METHOD="github.com";da.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends Ic{constructor(){super("twitter.com")}static credential(e,n){return yr._fromParams({providerId:fa.PROVIDER_ID,signInMethod:fa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return fa.credentialFromTaggedObject(e)}static credentialFromError(e){return fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:a}=e;if(!n||!a)return null;try{return fa.credential(n,a)}catch{return null}}}fa.TWITTER_SIGN_IN_METHOD="twitter.com";fa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xC(i,e){return Rc(i,"POST","/v1/accounts:signUp",xa(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,a,o=!1){const c=await ci._fromIdTokenResponse(e,a,o),d=L0(a);return new vr({user:c,providerId:d,_tokenResponse:a,operationType:n})}static async _forOperation(e,n,a){await e._updateTokensIfNecessary(a,!0);const o=L0(a);return new vr({user:e,providerId:o,_tokenResponse:a,operationType:n})}}function L0(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh extends xs{constructor(e,n,a,o){super(n.code,n.message),this.operationType=a,this.user=o,Object.setPrototypeOf(this,Xh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,n,a,o){return new Xh(e,n,a,o)}}function z1(i,e,n,a){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Xh._fromErrorAndOperation(i,c,e,a):c})}async function CC(i,e,n=!1){const a=await mc(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return vr._forOperation(i,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NC(i,e,n=!1){const{auth:a}=i;if(Gn(a.app))return Promise.reject(ys(a));const o="reauthenticate";try{const c=await mc(i,z1(a,o,e,i),n);be(c.idToken,a,"internal-error");const d=Kp(c.idToken);be(d,a,"internal-error");const{sub:g}=d;return be(i.uid===g,a,"user-mismatch"),vr._forOperation(i,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&ui(a,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q1(i,e,n=!1){if(Gn(i.app))return Promise.reject(ys(i));const a="signIn",o=await z1(i,a,e),c=await vr._fromIdTokenResponse(i,a,o);return n||await i._updateCurrentUser(c.user),c}async function RC(i,e){return q1(Sr(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B1(i){const e=Sr(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function IC(i,e,n){if(Gn(i.app))return Promise.reject(ys(i));const a=Sr(i),d=await _p(a,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xC).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&B1(i),p}),g=await vr._fromIdTokenResponse(a,"signIn",d);return await a._updateCurrentUser(g.user),g}function DC(i,e,n){return Gn(i.app)?Promise.reject(ys(i)):RC(Vt(i),Uo.credential(e,n)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&B1(i),a})}function jC(i,e,n,a){return Vt(i).onIdTokenChanged(e,n,a)}function OC(i,e,n){return Vt(i).beforeAuthStateChanged(e,n)}function MC(i,e,n,a){return Vt(i).onAuthStateChanged(e,n,a)}function VC(i){return Vt(i).signOut()}const Jh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Jh,"1"),this.storage.removeItem(Jh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=1e3,PC=10;class H1 extends F1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=M1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const a=this.storage.getItem(n),o=this.localCache[n];a!==o&&e(n,o,a)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,g,p)=>{this.notifyListeners(d,p)});return}const a=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(a);!n&&this.localCache[a]===d||this.notifyListeners(a,d)},c=this.storage.getItem(a);eC()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,PC):o()}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:a}),!0)})},kC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}H1.type="LOCAL";const LC=H1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1 extends F1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}G1.type="SESSION";const $1=G1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const a=new pd(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:a,eventType:o,data:c}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:a,eventType:o});const g=Array.from(d).map(async y=>y(n.origin,c)),p=await UC(g);n.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(i="",e=10){let n="";for(let a=0;a<e;a++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,a=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((g,p)=>{const y=Wp("",20);o.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},a);d={messageChannel:o,onMessage(S){const A=S;if(A.data.eventId===y)switch(A.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(A.data.response);break;default:clearTimeout(T),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(){return window}function qC(i){Ui().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(){return typeof Ui().WorkerGlobalScope<"u"&&typeof Ui().importScripts=="function"}async function BC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FC(){return navigator?.serviceWorker?.controller||null}function HC(){return Q1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="firebaseLocalStorageDb",GC=1,Wh="firebaseLocalStorage",Y1="fbase_key";class Dc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gd(i,e){return i.transaction([Wh],e?"readwrite":"readonly").objectStore(Wh)}function $C(){const i=indexedDB.deleteDatabase(K1);return new Dc(i).toPromise()}function Ep(){const i=indexedDB.open(K1,GC);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const a=i.result;try{a.createObjectStore(Wh,{keyPath:Y1})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const a=i.result;a.objectStoreNames.contains(Wh)?e(a):(a.close(),await $C(),e(await Ep()))})})}async function U0(i,e,n){const a=gd(i,!0).put({[Y1]:e,value:n});return new Dc(a).toPromise()}async function QC(i,e){const n=gd(i,!1).get(e),a=await new Dc(n).toPromise();return a===void 0?null:a.value}function z0(i,e){const n=gd(i,!0).delete(e);return new Dc(n).toPromise()}const KC=800,YC=3;class X1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ep(),this.db)}async _withRetries(e){let n=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(n++>YC)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Q1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pd._getInstance(HC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await BC(),!this.activeServiceWorker)return;this.sender=new zC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ep();return await U0(e,Jh,"1"),await z0(e,Jh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(a=>U0(a,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(a=>QC(a,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>z0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=gd(o,!1).getAll();return new Dc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],a=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)a.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!a.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}X1.type="LOCAL";const XC=X1;new Nc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(i,e){return e?gs(e):(be(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp extends Xp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return xo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return xo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function WC(i){return q1(i.auth,new Zp(i),i.bypassAuthState)}function ZC(i){const{auth:e,user:n}=i;return be(n,e,"internal-error"),NC(n,new Zp(i),i.bypassAuthState)}async function eN(i){const{auth:e,user:n}=i;return be(n,e,"internal-error"),CC(n,new Zp(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,n,a,o,c=!1){this.auth=e,this.resolver=a,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:a,postBody:o,tenantId:c,error:d,type:g}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:a,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WC;case"linkViaPopup":case"linkViaRedirect":return eN;case"reauthViaPopup":case"reauthViaRedirect":return ZC;default:ui(this.auth,"internal-error")}}resolve(e){Ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=new Nc(2e3,1e4);class bo extends J1{constructor(e,n,a,o,c){super(e,n,o,c),this.provider=a,this.authWindow=null,this.pollId=null,bo.currentPopupAction&&bo.currentPopupAction.cancel(),bo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){Ss(this.filter.length===1,"Popup operations only handle one event");const e=Wp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Li(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Li(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Li(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tN.get())};e()}}bo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN="pendingRedirect",Mh=new Map;class iN extends J1{constructor(e,n,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,a),this.eventId=null}async execute(){let e=Mh.get(this.auth._key());if(!e){try{const a=await sN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(n){e=()=>Promise.reject(n)}Mh.set(this.auth._key(),e)}return this.bypassAuthState||Mh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sN(i,e){const n=oN(e),a=rN(i);if(!await a._isAvailable())return!1;const o=await a._get(n)==="true";return await a._remove(n),o}function aN(i,e){Mh.set(i._key(),e)}function rN(i){return gs(i._redirectPersistence)}function oN(i){return Oh(nN,i.config.apiKey,i.name)}async function lN(i,e,n=!1){if(Gn(i.app))return Promise.reject(ys(i));const a=Sr(i),o=JC(a,e),d=await new iN(a,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await a._persistUserIfCurrent(d.user),await a._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=600*1e3;class uN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(n=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!W1(e)){const a=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Li(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const a=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cN&&this.cachedEventUids.clear(),this.cachedEventUids.has(q0(e))}saveEventToCache(e){this.cachedEventUids.add(q0(e)),this.lastProcessedEventTime=Date.now()}}function q0(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function W1({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function hN(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return W1(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(i,e={}){return Ca(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mN=/^https?/;async function pN(i){if(i.config.emulator)return;const{authorizedDomains:e}=await dN(i);for(const n of e)try{if(gN(n))return}catch{}ui(i,"unauthorized-domain")}function gN(i){const e=yp(),{protocol:n,hostname:a}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&a===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===a}if(!mN.test(n))return!1;if(fN.test(i))return a===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=new Nc(3e4,6e4);function B0(){const i=Ui().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function vN(i){return new Promise((e,n)=>{function a(){B0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{B0(),n(Li(i,"network-request-failed"))},timeout:yN.get()})}if(Ui().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ui().gapi?.load)a();else{const o=cC("iframefcb");return Ui()[o]=()=>{gapi.load?a():n(Li(i,"network-request-failed"))},k1(`${lC()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw Vh=null,e})}let Vh=null;function _N(i){return Vh=Vh||vN(i),Vh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=new Nc(5e3,15e3),TN="__/auth/iframe",SN="emulator/auth/iframe",bN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wN(i){const e=i.config;be(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Qp(e,SN):`https://${i.config.authDomain}/${TN}`,a={apiKey:e.apiKey,appName:i.name,v:Lo},o=AN.get(i.config.apiHost);o&&(a.eid=o);const c=i._getFrameworks();return c.length&&(a.fw=c.join(",")),`${n}?${Cc(a).slice(1)}`}async function xN(i){const e=await _N(i),n=Ui().gapi;return be(n,i,"internal-error"),e.open({where:document.body,url:wN(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bN,dontclear:!0},a=>new Promise(async(o,c)=>{await a.restyle({setHideOnLeave:!1});const d=Li(i,"network-request-failed"),g=Ui().setTimeout(()=>{c(d)},EN.get());function p(){Ui().clearTimeout(g),o(a)}a.ping(p).then(p,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NN=500,RN=600,IN="_blank",DN="http://localhost";class F0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jN(i,e,n,a=NN,o=RN){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-a)/2,0).toString();let g="";const p={...CN,width:a.toString(),height:o.toString(),top:c,left:d},y=rn().toLowerCase();n&&(g=R1(y)?IN:n),C1(y)&&(e=e||DN,p.scrollbars="yes");const T=Object.entries(p).reduce((A,[C,L])=>`${A}${C}=${L},`,"");if(Zx(y)&&g!=="_self")return ON(e||"",g),new F0(null);const S=window.open(e||"",g,T);be(S,i,"popup-blocked");try{S.focus()}catch{}return new F0(S)}function ON(i,e){const n=document.createElement("a");n.href=i,n.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN="__/auth/handler",VN="emulator/auth/handler",kN=encodeURIComponent("fac");async function H0(i,e,n,a,o,c){be(i.config.authDomain,i,"auth-domain-config-required"),be(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:a,v:Lo,eventId:o};if(e instanceof U1){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",_w(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,S]of Object.entries({}))d[T]=S}if(e instanceof Ic){const T=e.getScopes().filter(S=>S!=="");T.length>0&&(d.scopes=T.join(","))}i.tenantId&&(d.tid=i.tenantId);const g=d;for(const T of Object.keys(g))g[T]===void 0&&delete g[T];const p=await i._getAppCheckToken(),y=p?`#${kN}=${encodeURIComponent(p)}`:"";return`${PN(i)}?${Cc(g).slice(1)}${y}`}function PN({config:i}){return i.emulator?Qp(i,VN):`https://${i.authDomain}/${MN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep="webStorageSupport";class LN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$1,this._completeRedirectFn=lN,this._overrideRedirectResult=aN}async _openPopup(e,n,a,o){Ss(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await H0(e,n,a,yp(),o);return jN(e,c,Wp())}async _openRedirect(e,n,a,o){await this._originValidation(e);const c=await H0(e,n,a,yp(),o);return qC(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Ss(c,"If manager is not set, promise should be"),c)}const a=this.initAndGetManager(e);return this.eventManagers[n]={promise:a},a.catch(()=>{delete this.eventManagers[n]}),a}async initAndGetManager(e){const n=await xN(e),a=new uN(e);return n.register("authEvent",o=>(be(o?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=n,a}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ep,{type:ep},o=>{const c=o?.[0]?.[ep];c!==void 0&&n(!!c),ui(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=pN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return M1()||N1()||Yp()}}const UN=LN;var G0="@firebase/auth",$0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function BN(i){Io(new gr("auth",(e,{options:n})=>{const a=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=a.options;be(d&&!d.includes(":"),"invalid-api-key",{appName:a.name});const p={apiKey:d,authDomain:g,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:V1(i)},y=new aC(a,o,c,p);return pC(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,a)=>{e.getProvider("auth-internal").initialize()})),Io(new gr("auth-internal",e=>{const n=Sr(e.getProvider("auth").getImmediate());return(a=>new zN(a))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ya(G0,$0,qN(i)),ya(G0,$0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=300,HN=u1("authIdTokenMaxAge")||FN;let Q0=null;const GN=i=>async e=>{const n=e&&await e.getIdTokenResult(),a=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(a&&a>HN)return;const o=n?.token;Q0!==o&&(Q0=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function $N(i=g1()){const e=Gp(i,"auth");if(e.isInitialized())return e.getImmediate();const n=mC(i,{popupRedirectResolver:UN,persistence:[XC,LC,$1]}),a=u1("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(a,location.origin);if(location.origin===c.origin){const d=GN(c.toString());OC(n,d,()=>d(n.currentUser)),jC(n,g=>d(g))}}const o=l1("auth");return o&&gC(n,`http://${o}`),n}function QN(){return document.getElementsByTagName("head")?.[0]??document}rC({loadJS(i){return new Promise((e,n)=>{const a=document.createElement("script");a.setAttribute("src",i),a.onload=e,a.onerror=o=>{const c=Li("internal-error");c.customData=o,n(c)},a.type="text/javascript",a.charset="UTF-8",QN().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});BN("Browser");var K0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var va,Z1;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,x){function R(){}R.prototype=x.prototype,N.F=x.prototype,N.prototype=new R,N.prototype.constructor=N,N.D=function(M,O,P){for(var I=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)I[Ye-2]=arguments[Ye];return x.prototype[O].apply(M,I)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,n),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,x,R){R||(R=0);const M=Array(16);if(typeof x=="string")for(var O=0;O<16;++O)M[O]=x.charCodeAt(R++)|x.charCodeAt(R++)<<8|x.charCodeAt(R++)<<16|x.charCodeAt(R++)<<24;else for(O=0;O<16;++O)M[O]=x[R++]|x[R++]<<8|x[R++]<<16|x[R++]<<24;x=N.g[0],R=N.g[1],O=N.g[2];let P=N.g[3],I;I=x+(P^R&(O^P))+M[0]+3614090360&4294967295,x=R+(I<<7&4294967295|I>>>25),I=P+(O^x&(R^O))+M[1]+3905402710&4294967295,P=x+(I<<12&4294967295|I>>>20),I=O+(R^P&(x^R))+M[2]+606105819&4294967295,O=P+(I<<17&4294967295|I>>>15),I=R+(x^O&(P^x))+M[3]+3250441966&4294967295,R=O+(I<<22&4294967295|I>>>10),I=x+(P^R&(O^P))+M[4]+4118548399&4294967295,x=R+(I<<7&4294967295|I>>>25),I=P+(O^x&(R^O))+M[5]+1200080426&4294967295,P=x+(I<<12&4294967295|I>>>20),I=O+(R^P&(x^R))+M[6]+2821735955&4294967295,O=P+(I<<17&4294967295|I>>>15),I=R+(x^O&(P^x))+M[7]+4249261313&4294967295,R=O+(I<<22&4294967295|I>>>10),I=x+(P^R&(O^P))+M[8]+1770035416&4294967295,x=R+(I<<7&4294967295|I>>>25),I=P+(O^x&(R^O))+M[9]+2336552879&4294967295,P=x+(I<<12&4294967295|I>>>20),I=O+(R^P&(x^R))+M[10]+4294925233&4294967295,O=P+(I<<17&4294967295|I>>>15),I=R+(x^O&(P^x))+M[11]+2304563134&4294967295,R=O+(I<<22&4294967295|I>>>10),I=x+(P^R&(O^P))+M[12]+1804603682&4294967295,x=R+(I<<7&4294967295|I>>>25),I=P+(O^x&(R^O))+M[13]+4254626195&4294967295,P=x+(I<<12&4294967295|I>>>20),I=O+(R^P&(x^R))+M[14]+2792965006&4294967295,O=P+(I<<17&4294967295|I>>>15),I=R+(x^O&(P^x))+M[15]+1236535329&4294967295,R=O+(I<<22&4294967295|I>>>10),I=x+(O^P&(R^O))+M[1]+4129170786&4294967295,x=R+(I<<5&4294967295|I>>>27),I=P+(R^O&(x^R))+M[6]+3225465664&4294967295,P=x+(I<<9&4294967295|I>>>23),I=O+(x^R&(P^x))+M[11]+643717713&4294967295,O=P+(I<<14&4294967295|I>>>18),I=R+(P^x&(O^P))+M[0]+3921069994&4294967295,R=O+(I<<20&4294967295|I>>>12),I=x+(O^P&(R^O))+M[5]+3593408605&4294967295,x=R+(I<<5&4294967295|I>>>27),I=P+(R^O&(x^R))+M[10]+38016083&4294967295,P=x+(I<<9&4294967295|I>>>23),I=O+(x^R&(P^x))+M[15]+3634488961&4294967295,O=P+(I<<14&4294967295|I>>>18),I=R+(P^x&(O^P))+M[4]+3889429448&4294967295,R=O+(I<<20&4294967295|I>>>12),I=x+(O^P&(R^O))+M[9]+568446438&4294967295,x=R+(I<<5&4294967295|I>>>27),I=P+(R^O&(x^R))+M[14]+3275163606&4294967295,P=x+(I<<9&4294967295|I>>>23),I=O+(x^R&(P^x))+M[3]+4107603335&4294967295,O=P+(I<<14&4294967295|I>>>18),I=R+(P^x&(O^P))+M[8]+1163531501&4294967295,R=O+(I<<20&4294967295|I>>>12),I=x+(O^P&(R^O))+M[13]+2850285829&4294967295,x=R+(I<<5&4294967295|I>>>27),I=P+(R^O&(x^R))+M[2]+4243563512&4294967295,P=x+(I<<9&4294967295|I>>>23),I=O+(x^R&(P^x))+M[7]+1735328473&4294967295,O=P+(I<<14&4294967295|I>>>18),I=R+(P^x&(O^P))+M[12]+2368359562&4294967295,R=O+(I<<20&4294967295|I>>>12),I=x+(R^O^P)+M[5]+4294588738&4294967295,x=R+(I<<4&4294967295|I>>>28),I=P+(x^R^O)+M[8]+2272392833&4294967295,P=x+(I<<11&4294967295|I>>>21),I=O+(P^x^R)+M[11]+1839030562&4294967295,O=P+(I<<16&4294967295|I>>>16),I=R+(O^P^x)+M[14]+4259657740&4294967295,R=O+(I<<23&4294967295|I>>>9),I=x+(R^O^P)+M[1]+2763975236&4294967295,x=R+(I<<4&4294967295|I>>>28),I=P+(x^R^O)+M[4]+1272893353&4294967295,P=x+(I<<11&4294967295|I>>>21),I=O+(P^x^R)+M[7]+4139469664&4294967295,O=P+(I<<16&4294967295|I>>>16),I=R+(O^P^x)+M[10]+3200236656&4294967295,R=O+(I<<23&4294967295|I>>>9),I=x+(R^O^P)+M[13]+681279174&4294967295,x=R+(I<<4&4294967295|I>>>28),I=P+(x^R^O)+M[0]+3936430074&4294967295,P=x+(I<<11&4294967295|I>>>21),I=O+(P^x^R)+M[3]+3572445317&4294967295,O=P+(I<<16&4294967295|I>>>16),I=R+(O^P^x)+M[6]+76029189&4294967295,R=O+(I<<23&4294967295|I>>>9),I=x+(R^O^P)+M[9]+3654602809&4294967295,x=R+(I<<4&4294967295|I>>>28),I=P+(x^R^O)+M[12]+3873151461&4294967295,P=x+(I<<11&4294967295|I>>>21),I=O+(P^x^R)+M[15]+530742520&4294967295,O=P+(I<<16&4294967295|I>>>16),I=R+(O^P^x)+M[2]+3299628645&4294967295,R=O+(I<<23&4294967295|I>>>9),I=x+(O^(R|~P))+M[0]+4096336452&4294967295,x=R+(I<<6&4294967295|I>>>26),I=P+(R^(x|~O))+M[7]+1126891415&4294967295,P=x+(I<<10&4294967295|I>>>22),I=O+(x^(P|~R))+M[14]+2878612391&4294967295,O=P+(I<<15&4294967295|I>>>17),I=R+(P^(O|~x))+M[5]+4237533241&4294967295,R=O+(I<<21&4294967295|I>>>11),I=x+(O^(R|~P))+M[12]+1700485571&4294967295,x=R+(I<<6&4294967295|I>>>26),I=P+(R^(x|~O))+M[3]+2399980690&4294967295,P=x+(I<<10&4294967295|I>>>22),I=O+(x^(P|~R))+M[10]+4293915773&4294967295,O=P+(I<<15&4294967295|I>>>17),I=R+(P^(O|~x))+M[1]+2240044497&4294967295,R=O+(I<<21&4294967295|I>>>11),I=x+(O^(R|~P))+M[8]+1873313359&4294967295,x=R+(I<<6&4294967295|I>>>26),I=P+(R^(x|~O))+M[15]+4264355552&4294967295,P=x+(I<<10&4294967295|I>>>22),I=O+(x^(P|~R))+M[6]+2734768916&4294967295,O=P+(I<<15&4294967295|I>>>17),I=R+(P^(O|~x))+M[13]+1309151649&4294967295,R=O+(I<<21&4294967295|I>>>11),I=x+(O^(R|~P))+M[4]+4149444226&4294967295,x=R+(I<<6&4294967295|I>>>26),I=P+(R^(x|~O))+M[11]+3174756917&4294967295,P=x+(I<<10&4294967295|I>>>22),I=O+(x^(P|~R))+M[2]+718787259&4294967295,O=P+(I<<15&4294967295|I>>>17),I=R+(P^(O|~x))+M[9]+3951481745&4294967295,N.g[0]=N.g[0]+x&4294967295,N.g[1]=N.g[1]+(O+(I<<21&4294967295|I>>>11))&4294967295,N.g[2]=N.g[2]+O&4294967295,N.g[3]=N.g[3]+P&4294967295}a.prototype.v=function(N,x){x===void 0&&(x=N.length);const R=x-this.blockSize,M=this.C;let O=this.h,P=0;for(;P<x;){if(O==0)for(;P<=R;)o(this,N,P),P+=this.blockSize;if(typeof N=="string"){for(;P<x;)if(M[O++]=N.charCodeAt(P++),O==this.blockSize){o(this,M),O=0;break}}else for(;P<x;)if(M[O++]=N[P++],O==this.blockSize){o(this,M),O=0;break}}this.h=O,this.o+=x},a.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var x=1;x<N.length-8;++x)N[x]=0;x=this.o*8;for(var R=N.length-8;R<N.length;++R)N[R]=x&255,x/=256;for(this.v(N),N=Array(16),x=0,R=0;R<4;++R)for(let M=0;M<32;M+=8)N[x++]=this.g[R]>>>M&255;return N};function c(N,x){var R=g;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=x(N)}function d(N,x){this.h=x;const R=[];let M=!0;for(let O=N.length-1;O>=0;O--){const P=N[O]|0;M&&P==x||(R[O]=P,M=!1)}this.g=R}var g={};function p(N){return-128<=N&&N<128?c(N,function(x){return new d([x|0],x<0?-1:0)}):new d([N|0],N<0?-1:0)}function y(N){if(isNaN(N)||!isFinite(N))return S;if(N<0)return F(y(-N));const x=[];let R=1;for(let M=0;N>=R;M++)x[M]=N/R|0,R*=4294967296;return new d(x,0)}function T(N,x){if(N.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(N.charAt(0)=="-")return F(T(N.substring(1),x));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(x,8));let M=S;for(let P=0;P<N.length;P+=8){var O=Math.min(8,N.length-P);const I=parseInt(N.substring(P,P+O),x);O<8?(O=y(Math.pow(x,O)),M=M.j(O).add(y(I))):(M=M.j(R),M=M.add(y(I)))}return M}var S=p(0),A=p(1),C=p(16777216);i=d.prototype,i.m=function(){if(G(this))return-F(this).m();let N=0,x=1;for(let R=0;R<this.g.length;R++){const M=this.i(R);N+=(M>=0?M:4294967296+M)*x,x*=4294967296}return N},i.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(L(this))return"0";if(G(this))return"-"+F(this).toString(N);const x=y(Math.pow(N,6));var R=this;let M="";for(;;){const O=le(R,x).g;R=te(R,O.j(x));let P=((R.g.length>0?R.g[0]:R.h)>>>0).toString(N);if(R=O,L(R))return P+M;for(;P.length<6;)P="0"+P;M=P+M}},i.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function L(N){if(N.h!=0)return!1;for(let x=0;x<N.g.length;x++)if(N.g[x]!=0)return!1;return!0}function G(N){return N.h==-1}i.l=function(N){return N=te(this,N),G(N)?-1:L(N)?0:1};function F(N){const x=N.g.length,R=[];for(let M=0;M<x;M++)R[M]=~N.g[M];return new d(R,~N.h).add(A)}i.abs=function(){return G(this)?F(this):this},i.add=function(N){const x=Math.max(this.g.length,N.g.length),R=[];let M=0;for(let O=0;O<=x;O++){let P=M+(this.i(O)&65535)+(N.i(O)&65535),I=(P>>>16)+(this.i(O)>>>16)+(N.i(O)>>>16);M=I>>>16,P&=65535,I&=65535,R[O]=I<<16|P}return new d(R,R[R.length-1]&-2147483648?-1:0)};function te(N,x){return N.add(F(x))}i.j=function(N){if(L(this)||L(N))return S;if(G(this))return G(N)?F(this).j(F(N)):F(F(this).j(N));if(G(N))return F(this.j(F(N)));if(this.l(C)<0&&N.l(C)<0)return y(this.m()*N.m());const x=this.g.length+N.g.length,R=[];for(var M=0;M<2*x;M++)R[M]=0;for(M=0;M<this.g.length;M++)for(let O=0;O<N.g.length;O++){const P=this.i(M)>>>16,I=this.i(M)&65535,Ye=N.i(O)>>>16,Oe=N.i(O)&65535;R[2*M+2*O]+=I*Oe,ne(R,2*M+2*O),R[2*M+2*O+1]+=P*Oe,ne(R,2*M+2*O+1),R[2*M+2*O+1]+=I*Ye,ne(R,2*M+2*O+1),R[2*M+2*O+2]+=P*Ye,ne(R,2*M+2*O+2)}for(N=0;N<x;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=x;N<2*x;N++)R[N]=0;return new d(R,0)};function ne(N,x){for(;(N[x]&65535)!=N[x];)N[x+1]+=N[x]>>>16,N[x]&=65535,x++}function Q(N,x){this.g=N,this.h=x}function le(N,x){if(L(x))throw Error("division by zero");if(L(N))return new Q(S,S);if(G(N))return x=le(F(N),x),new Q(F(x.g),F(x.h));if(G(x))return x=le(N,F(x)),new Q(F(x.g),x.h);if(N.g.length>30){if(G(N)||G(x))throw Error("slowDivide_ only works with positive integers.");for(var R=A,M=x;M.l(N)<=0;)R=ye(R),M=ye(M);var O=se(R,1),P=se(M,1);for(M=se(M,2),R=se(R,2);!L(M);){var I=P.add(M);I.l(N)<=0&&(O=O.add(R),P=I),M=se(M,1),R=se(R,1)}return x=te(N,O.j(x)),new Q(O,x)}for(O=S;N.l(x)>=0;){for(R=Math.max(1,Math.floor(N.m()/x.m())),M=Math.ceil(Math.log(R)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),P=y(R),I=P.j(x);G(I)||I.l(N)>0;)R-=M,P=y(R),I=P.j(x);L(P)&&(P=A),O=O.add(P),N=te(N,I)}return new Q(O,N)}i.B=function(N){return le(this,N).h},i.and=function(N){const x=Math.max(this.g.length,N.g.length),R=[];for(let M=0;M<x;M++)R[M]=this.i(M)&N.i(M);return new d(R,this.h&N.h)},i.or=function(N){const x=Math.max(this.g.length,N.g.length),R=[];for(let M=0;M<x;M++)R[M]=this.i(M)|N.i(M);return new d(R,this.h|N.h)},i.xor=function(N){const x=Math.max(this.g.length,N.g.length),R=[];for(let M=0;M<x;M++)R[M]=this.i(M)^N.i(M);return new d(R,this.h^N.h)};function ye(N){const x=N.g.length+1,R=[];for(let M=0;M<x;M++)R[M]=N.i(M)<<1|N.i(M-1)>>>31;return new d(R,N.h)}function se(N,x){const R=x>>5;x%=32;const M=N.g.length-R,O=[];for(let P=0;P<M;P++)O[P]=x>0?N.i(P+R)>>>x|N.i(P+R+1)<<32-x:N.i(P+R);return new d(O,N.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,Z1=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=T,va=d}).apply(typeof K0<"u"?K0:typeof self<"u"?self:typeof window<"u"?window:{});var bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eT,ic,tT,kh,Tp,nT,iT,sT;(function(){var i,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof bh=="object"&&bh];for(var v=0;v<h.length;++v){var E=h[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var a=n(this);function o(h,v){if(v)e:{var E=a;h=h.split(".");for(var w=0;w<h.length-1;w++){var z=h[w];if(!(z in E))break e;E=E[z]}h=h[h.length-1],w=E[h],v=v(w),v!=w&&v!=null&&e(E,h,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(v){var E=[],w;for(w in v)Object.prototype.hasOwnProperty.call(v,w)&&E.push([w,v[w]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function g(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function p(h,v,E){return h.call.apply(h.bind,arguments)}function y(h,v,E){return y=p,y.apply(null,arguments)}function T(h,v){var E=Array.prototype.slice.call(arguments,1);return function(){var w=E.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function S(h,v){function E(){}E.prototype=v.prototype,h.Z=v.prototype,h.prototype=new E,h.prototype.constructor=h,h.Ob=function(w,z,$){for(var oe=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)oe[Re-2]=arguments[Re];return v.prototype[z].apply(w,oe)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function C(h){const v=h.length;if(v>0){const E=Array(v);for(let w=0;w<v;w++)E[w]=h[w];return E}return[]}function L(h,v){for(let w=1;w<arguments.length;w++){const z=arguments[w];var E=typeof z;if(E=E!="object"?E:z?Array.isArray(z)?"array":E:"null",E=="array"||E=="object"&&typeof z.length=="number"){E=h.length||0;const $=z.length||0;h.length=E+$;for(let oe=0;oe<$;oe++)h[E+oe]=z[oe]}else h.push(z)}}class G{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function F(h){d.setTimeout(()=>{throw h},0)}function te(){var h=N;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class ne{constructor(){this.h=this.g=null}add(v,E){const w=Q.get();w.set(v,E),this.h?this.h.next=w:this.g=w,this.h=w}}var Q=new G(()=>new le,h=>h.reset());class le{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,se=!1,N=new ne,x=()=>{const h=Promise.resolve(void 0);ye=()=>{h.then(R)}};function R(){for(var h;h=te();){try{h.h.call(h.g)}catch(E){F(E)}var v=Q;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}se=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};d.addEventListener("test",E,v),d.removeEventListener("test",E,v)}catch{}return h})();function I(h){return/^[\s\xa0]*$/.test(h)}function Ye(h,v){O.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}S(Ye,O),Ye.prototype.init=function(h,v){const E=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(E=="mouseover"?v=h.fromElement:E=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ye.Z.h.call(this)},Ye.prototype.h=function(){Ye.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Oe="closure_listenable_"+(Math.random()*1e6|0),Y=0;function re(h,v,E,w,z){this.listener=h,this.proxy=null,this.src=v,this.type=E,this.capture=!!w,this.ha=z,this.key=++Y,this.da=this.fa=!1}function ve(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function qe(h,v,E){for(const w in h)v.call(E,h[w],w,h)}function $e(h,v){for(const E in h)v.call(void 0,h[E],E,h)}function k(h){const v={};for(const E in h)v[E]=h[E];return v}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(h,v){let E,w;for(let z=1;z<arguments.length;z++){w=arguments[z];for(E in w)h[E]=w[E];for(let $=0;$<J.length;$++)E=J[$],Object.prototype.hasOwnProperty.call(w,E)&&(h[E]=w[E])}}function he(h){this.src=h,this.g={},this.h=0}he.prototype.add=function(h,v,E,w,z){const $=h.toString();h=this.g[$],h||(h=this.g[$]=[],this.h++);const oe=fe(h,v,w,z);return oe>-1?(v=h[oe],E||(v.fa=!1)):(v=new re(v,this.src,$,!!w,z),v.fa=E,h.push(v)),v};function ae(h,v){const E=v.type;if(E in h.g){var w=h.g[E],z=Array.prototype.indexOf.call(w,v,void 0),$;($=z>=0)&&Array.prototype.splice.call(w,z,1),$&&(ve(v),h.g[E].length==0&&(delete h.g[E],h.h--))}}function fe(h,v,E,w){for(let z=0;z<h.length;++z){const $=h[z];if(!$.da&&$.listener==v&&$.capture==!!E&&$.ha==w)return z}return-1}var _e="closure_lm_"+(Math.random()*1e6|0),dt={};function ct(h,v,E,w,z){if(Array.isArray(v)){for(let $=0;$<v.length;$++)ct(h,v[$],E,w,z);return null}return E=Yo(E),h&&h[Oe]?h.J(v,E,g(w)?!!w.capture:!1,z):ja(h,v,E,!1,w,z)}function ja(h,v,E,w,z,$){if(!v)throw Error("Invalid event type");const oe=g(z)?!!z.capture:!!z;let Re=Oa(h);if(Re||(h[_e]=Re=new he(h)),E=Re.add(v,E,w,oe,$),E.proxy)return E;if(w=Cr(),E.proxy=w,w.src=h,w.listener=E,h.addEventListener)P||(z=oe),z===void 0&&(z=!1),h.addEventListener(v.toString(),w,z);else if(h.attachEvent)h.attachEvent(fi(v.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Cr(){function h(E){return v.call(h.src,h.listener,E)}const v=Qo;return h}function Nr(h,v,E,w,z){if(Array.isArray(v))for(var $=0;$<v.length;$++)Nr(h,v[$],E,w,z);else w=g(w)?!!w.capture:!!w,E=Yo(E),h&&h[Oe]?(h=h.i,$=String(v).toString(),$ in h.g&&(v=h.g[$],E=fe(v,E,w,z),E>-1&&(ve(v[E]),Array.prototype.splice.call(v,E,1),v.length==0&&(delete h.g[$],h.h--)))):h&&(h=Oa(h))&&(v=h.g[v.toString()],h=-1,v&&(h=fe(v,E,w,z)),(E=h>-1?v[h]:null)&&Rr(E))}function Rr(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Oe])ae(v.i,h);else{var E=h.type,w=h.proxy;v.removeEventListener?v.removeEventListener(E,w,h.capture):v.detachEvent?v.detachEvent(fi(E),w):v.addListener&&v.removeListener&&v.removeListener(w),(E=Oa(v))?(ae(E,h),E.h==0&&(E.src=null,v[_e]=null)):ve(h)}}}function fi(h){return h in dt?dt[h]:dt[h]="on"+h}function Qo(h,v){if(h.da)h=!0;else{v=new Ye(v,this);const E=h.listener,w=h.ha||h.src;h.fa&&Rr(h),h=E.call(w,v)}return h}function Oa(h){return h=h[_e],h instanceof he?h:null}var Ko="__closure_events_fn_"+(Math.random()*1e9>>>0);function Yo(h){return typeof h=="function"?h:(h[Ko]||(h[Ko]=function(v){return h.handleEvent(v)}),h[Ko])}function bt(){M.call(this),this.i=new he(this),this.M=this,this.G=null}S(bt,M),bt.prototype[Oe]=!0,bt.prototype.removeEventListener=function(h,v,E,w){Nr(this,h,v,E,w)};function kt(h,v){var E,w=h.G;if(w)for(E=[];w;w=w.G)E.push(w);if(h=h.M,w=v.type||v,typeof v=="string")v=new O(v,h);else if(v instanceof O)v.target=v.target||h;else{var z=v;v=new O(w,h),ce(v,z)}z=!0;let $,oe;if(E)for(oe=E.length-1;oe>=0;oe--)$=v.g=E[oe],z=Ns($,w,!0,v)&&z;if($=v.g=h,z=Ns($,w,!0,v)&&z,z=Ns($,w,!1,v)&&z,E)for(oe=0;oe<E.length;oe++)$=v.g=E[oe],z=Ns($,w,!1,v)&&z}bt.prototype.N=function(){if(bt.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const E=h.g[v];for(let w=0;w<E.length;w++)ve(E[w]);delete h.g[v],h.h--}}this.G=null},bt.prototype.J=function(h,v,E,w){return this.i.add(String(h),v,!1,E,w)},bt.prototype.K=function(h,v,E,w){return this.i.add(String(h),v,!0,E,w)};function Ns(h,v,E,w){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let z=!0;for(let $=0;$<v.length;++$){const oe=v[$];if(oe&&!oe.da&&oe.capture==E){const Re=oe.listener,vt=oe.ha||oe.src;oe.fa&&ae(h.i,oe),z=Re.call(vt,w)!==!1&&z}}return z&&!w.defaultPrevented}function Fd(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(h,v||0)}function Qc(h){h.g=Fd(()=>{h.g=null,h.i&&(h.i=!1,Qc(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class on extends M{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Qc(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ma(h){M.call(this),this.h=h,this.g={}}S(Ma,M);var Xo=[];function Jo(h){qe(h.g,function(v,E){this.g.hasOwnProperty(E)&&Rr(v)},h),h.g={}}Ma.prototype.N=function(){Ma.Z.N.call(this),Jo(this)},Ma.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rs=d.JSON.stringify,Hd=d.JSON.parse,Kc=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Yc(){}function Xc(){}var Qn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Gt(){O.call(this,"d")}S(Gt,O);function jn(){O.call(this,"c")}S(jn,O);var yt={},Jc=null;function Ir(){return Jc=Jc||new bt}yt.Ia="serverreachability";function Wc(h){O.call(this,yt.Ia,h)}S(Wc,O);function mi(h){const v=Ir();kt(v,new Wc(v))}yt.STAT_EVENT="statevent";function Va(h,v){O.call(this,yt.STAT_EVENT,h),this.stat=v}S(Va,O);function At(h){const v=Ir();kt(v,new Va(v,h))}yt.Ja="timingevent";function pi(h,v){O.call(this,yt.Ja,h),this.size=v}S(pi,O);function gi(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function Kn(){this.g=!0}Kn.prototype.ua=function(){this.g=!1};function Gd(h,v,E,w,z,$){h.info(function(){if(h.g)if($){var oe="",Re=$.split("&");for(let Qe=0;Qe<Re.length;Qe++){var vt=Re[Qe].split("=");if(vt.length>1){const ut=vt[0];vt=vt[1];const kn=ut.split("_");oe=kn.length>=2&&kn[1]=="type"?oe+(ut+"="+vt+"&"):oe+(ut+"=redacted&")}}}else oe=null;else oe=$;return"XMLHTTP REQ ("+w+") [attempt "+z+"]: "+v+`
`+E+`
`+oe})}function Zc(h,v,E,w,z,$,oe){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+z+"]: "+v+`
`+E+`
`+$+" "+oe})}function yi(h,v,E,w){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+$d(h,E)+(w?" "+w:"")})}function ka(h,v){h.info(function(){return"TIMEOUT: "+v})}Kn.prototype.info=function(){};function $d(h,v){if(!h.g)return v;if(!v)return null;try{const $=JSON.parse(v);if($){for(h=0;h<$.length;h++)if(Array.isArray($[h])){var E=$[h];if(!(E.length<2)){var w=E[1];if(Array.isArray(w)&&!(w.length<1)){var z=w[0];if(z!="noop"&&z!="stop"&&z!="close")for(let oe=1;oe<w.length;oe++)w[oe]=""}}}}return Rs($)}catch{return v}}var Pa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Wo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Zo;function La(){}S(La,Yc),La.prototype.g=function(){return new XMLHttpRequest},Zo=new La;function Ki(h){return encodeURIComponent(String(h))}function eu(h){var v=1;h=h.split(":");const E=[];for(;v>0&&h.length;)E.push(h.shift()),v--;return h.length&&E.push(h.join(":")),E}function Yn(h,v,E,w){this.j=h,this.i=v,this.l=E,this.S=w||1,this.V=new Ma(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Xn}function Xn(){this.i=null,this.g="",this.h=!1}var wt={},zt={};function vi(h,v,E){h.M=1,h.A=Ua(Ct(v)),h.u=E,h.R=!0,Dr(h,null)}function Dr(h,v){h.F=Date.now(),_i(h),h.B=Ct(h.A);var E=h.B,w=h.S;Array.isArray(w)||(w=[String(w)]),Vr(E.i,"t",w),h.C=0,E=h.j.L,h.h=new Xn,h.g=pu(h.j,E?v:null,!h.u),h.P>0&&(h.O=new on(y(h.Y,h,h.g),h.P)),v=h.V,E=h.g,w=h.ba;var z="readystatechange";Array.isArray(z)||(z&&(Xo[0]=z.toString()),z=Xo);for(let $=0;$<z.length;$++){const oe=ct(E,z[$],w||v.handleEvent,!1,v.h||v);if(!oe)break;v.g[oe.key]=oe}v=h.J?k(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),mi(),Gd(h.i,h.v,h.B,h.l,h.S,h.u)}Yn.prototype.ba=function(h){h=h.target;const v=this.O;v&&Zn(h)==3?v.j():this.Y(h)},Yn.prototype.Y=function(h){try{if(h==this.g)e:{const Re=Zn(this.g),vt=this.g.ya(),Qe=this.g.ca();if(!(Re<3)&&(Re!=3||this.g&&(this.h.h||this.g.la()||$t(this.g)))){this.K||Re!=4||vt==7||(vt==8||Qe<=0?mi(3):mi(2)),Ei(this);var v=this.g.ca();this.X=v;var E=Qd(this);if(this.o=v==200,Zc(this.i,this.v,this.B,this.l,this.S,Re,v),this.o){if(this.U&&!this.L){t:{if(this.g){var w,z=this.g;if((w=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(w)){var $=w;break t}}$=null}if(h=$)yi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ti(this,h);else{this.o=!1,this.m=3,At(12),En(this),On(this);break e}}if(this.R){h=!0;let ut;for(;!this.K&&this.C<E.length;)if(ut=nu(this,E),ut==zt){Re==4&&(this.m=4,At(14),h=!1),yi(this.i,this.l,null,"[Incomplete Response]");break}else if(ut==wt){this.m=4,At(15),yi(this.i,this.l,E,"[Invalid Chunk]"),h=!1;break}else yi(this.i,this.l,ut,null),Ti(this,ut);if(tu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||E.length!=0||this.h.h||(this.m=1,At(16),h=!1),this.o=this.o&&h,!h)yi(this.i,this.l,E,"[Invalid Chunked Response]"),En(this),On(this);else if(E.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),ml(oe),oe.P=!0,At(11))}}else yi(this.i,this.l,E,null),Ti(this,E);Re==4&&En(this),this.o&&!this.K&&(Re==4?hu(this.j,this):(this.o=!1,_i(this)))}else Xi(this.g),v==400&&E.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),En(this),On(this)}}}catch{}finally{}};function Qd(h){if(!tu(h))return h.g.la();const v=$t(h.g);if(v==="")return"";let E="";const w=v.length,z=Zn(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return En(h),On(h),"";h.h.i=new d.TextDecoder}for(let $=0;$<w;$++)h.h.h=!0,E+=h.h.i.decode(v[$],{stream:!(z&&$==w-1)});return v.length=0,h.h.g+=E,h.C=0,h.h.g}function tu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function nu(h,v){var E=h.C,w=v.indexOf(`
`,E);return w==-1?zt:(E=Number(v.substring(E,w)),isNaN(E)?wt:(w+=1,w+E>v.length?zt:(v=v.slice(w,w+E),h.C=w+E,v)))}Yn.prototype.cancel=function(){this.K=!0,En(this)};function _i(h){h.T=Date.now()+h.H,jr(h,h.H)}function jr(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=gi(y(h.aa,h),v)}function Ei(h){h.D&&(d.clearTimeout(h.D),h.D=null)}Yn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(ka(this.i,this.B),this.M!=2&&(mi(),At(17)),En(this),this.m=2,On(this)):jr(this,this.T-h)};function On(h){h.j.I==0||h.K||hu(h.j,h)}function En(h){Ei(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,Jo(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function Ti(h,v){try{var E=h.j;if(E.I!=0&&(E.g==h||bi(E.h,h))){if(!h.L&&bi(E.h,h)&&E.I==3){try{var w=E.Ba.g.parse(v)}catch{w=null}if(Array.isArray(w)&&w.length==3){var z=w;if(z[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<h.F)zr(E),Ps(E);else break e;$a(E),At(18)}}else E.xa=z[1],0<E.xa-E.K&&z[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=gi(y(E.Va,E),6e3));Si(E.h)<=1&&E.ta&&(E.ta=void 0)}else Ri(E,11)}else if((h.L||E.g==h)&&zr(E),!I(v))for(z=E.Ba.g.parse(v),v=0;v<z.length;v++){let Qe=z[v];const ut=Qe[0];if(!(ut<=E.K))if(E.K=ut,Qe=Qe[1],E.I==2)if(Qe[0]=="c"){E.M=Qe[1],E.ba=Qe[2];const kn=Qe[3];kn!=null&&(E.ka=kn,E.j.info("VER="+E.ka));const Ii=Qe[4];Ii!=null&&(E.za=Ii,E.j.info("SVER="+E.za));const ei=Qe[5];ei!=null&&typeof ei=="number"&&ei>0&&(w=1.5*ei,E.O=w,E.j.info("backChannelRequestTimeoutMs_="+w)),w=E;const ti=h.g;if(ti){const Qa=ti.g?ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qa){var $=w.h;$.g||Qa.indexOf("spdy")==-1&&Qa.indexOf("quic")==-1&&Qa.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(nl($,$.h),$.h=null))}if(w.G){const qr=ti.g?ti.g.getResponseHeader("X-HTTP-Session-Id"):null;qr&&(w.wa=qr,Je(w.J,w.G,qr))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-h.F,E.j.info("Handshake RTT: "+E.T+"ms")),w=E;var oe=h;if(w.na=mu(w,w.L?w.ba:null,w.W),oe.L){il(w.h,oe);var Re=oe,vt=w.O;vt&&(Re.H=vt),Re.D&&(Ei(Re),_i(Re)),w.g=oe}else cu(w);E.i.length>0&&Ni(E)}else Qe[0]!="stop"&&Qe[0]!="close"||Ri(E,7);else E.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Ri(E,7):dl(E):Qe[0]!="noop"&&E.l&&E.l.qa(Qe),E.A=0)}}mi(4)}catch{}}var xt=class{constructor(h,v){this.g=h,this.map=v}};function el(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function tl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Si(h){return h.h?1:h.g?h.g.size:0}function bi(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function nl(h,v){h.g?h.g.add(v):h.h=v}function il(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}el.prototype.cancel=function(){if(this.i=sl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function sl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const E of h.g.values())v=v.concat(E.G);return v}return C(h.i)}var iu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Or(h,v){if(h){h=h.split("&");for(let E=0;E<h.length;E++){const w=h[E].indexOf("=");let z,$=null;w>=0?(z=h[E].substring(0,w),$=h[E].substring(w+1)):z=h[E],v(z,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Tn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof Tn?(this.l=h.l,qt(this,h.j),this.o=h.o,this.g=h.g,Is(this,h.u),this.h=h.h,al(this,ou(h.i)),this.m=h.m):h&&(v=String(h).match(iu))?(this.l=!1,qt(this,v[1]||"",!0),this.o=Ai(v[2]||""),this.g=Ai(v[3]||"",!0),Is(this,v[4]),this.h=Ai(v[5]||"",!0),al(this,v[6]||"",!0),this.m=Ai(v[7]||"")):(this.l=!1,this.i=new js(null,this.l))}Tn.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(za(v,Mr,!0),":");var E=this.g;return(E||v=="file")&&(h.push("//"),(v=this.o)&&h.push(za(v,Mr,!0),"@"),h.push(Ki(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&h.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(za(E,E.charAt(0)=="/"?rl:su,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",za(E,au)),h.join("")},Tn.prototype.resolve=function(h){const v=Ct(this);let E=!!h.j;E?qt(v,h.j):E=!!h.o,E?v.o=h.o:E=!!h.g,E?v.g=h.g:E=h.u!=null;var w=h.h;if(E)Is(v,h.u);else if(E=!!h.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var z=v.h.lastIndexOf("/");z!=-1&&(w=v.h.slice(0,z+1)+w)}if(z=w,z==".."||z==".")w="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){w=z.lastIndexOf("/",0)==0,z=z.split("/");const $=[];for(let oe=0;oe<z.length;){const Re=z[oe++];Re=="."?w&&oe==z.length&&$.push(""):Re==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),w&&oe==z.length&&$.push("")):($.push(Re),w=!0)}w=$.join("/")}else w=z}return E?v.h=w:E=h.i.toString()!=="",E?al(v,ou(h.i)):E=!!h.m,E&&(v.m=h.m),v};function Ct(h){return new Tn(h)}function qt(h,v,E){h.j=E?Ai(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Is(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function al(h,v,E){v instanceof js?(h.i=v,kr(h.i,h.l)):(E||(v=za(v,Ds)),h.i=new js(v,h.l))}function Je(h,v,E){h.i.set(v,E)}function Ua(h){return Je(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ai(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function za(h,v,E){return typeof h=="string"?(h=encodeURI(h).replace(v,un),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function un(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Mr=/[#\/\?@]/g,su=/[#\?:]/g,rl=/[#\?]/g,Ds=/[#\?@]/g,au=/#/g;function js(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function hn(h){h.g||(h.g=new Map,h.h=0,h.i&&Or(h.i,function(v,E){h.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}i=js.prototype,i.add=function(h,v){hn(this),this.i=null,h=Os(this,h);let E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(v),this.h+=1,this};function ru(h,v){hn(h),v=Os(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function ol(h,v){return hn(h),v=Os(h,v),h.g.has(v)}i.forEach=function(h,v){hn(this),this.g.forEach(function(E,w){E.forEach(function(z){h.call(v,z,w,this)},this)},this)};function ll(h,v){hn(h);let E=[];if(typeof v=="string")ol(h,v)&&(E=E.concat(h.g.get(Os(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)E=E.concat(h[v]);return E}i.set=function(h,v){return hn(this),this.i=null,h=Os(this,h),ol(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},i.get=function(h,v){return h?(h=ll(this,h),h.length>0?String(h[0]):v):v};function Vr(h,v,E){ru(h,v),E.length>0&&(h.i=null,h.g.set(Os(h,v),C(E)),h.h+=E.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let w=0;w<v.length;w++){var E=v[w];const z=Ki(E);E=ll(this,E);for(let $=0;$<E.length;$++){let oe=z;E[$]!==""&&(oe+="="+Ki(E[$])),h.push(oe)}}return this.i=h.join("&")};function ou(h){const v=new js;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function Os(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function kr(h,v){v&&!h.j&&(hn(h),h.i=null,h.g.forEach(function(E,w){const z=w.toLowerCase();w!=z&&(ru(this,w),Vr(this,z,E))},h)),h.j=v}function Jn(h,v){const E=new Kn;if(d.Image){const w=new Image;w.onload=T(Mn,E,"TestLoadImage: loaded",!0,v,w),w.onerror=T(Mn,E,"TestLoadImage: error",!1,v,w),w.onabort=T(Mn,E,"TestLoadImage: abort",!1,v,w),w.ontimeout=T(Mn,E,"TestLoadImage: timeout",!1,v,w),d.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else v(!1)}function cl(h,v){const E=new Kn,w=new AbortController,z=setTimeout(()=>{w.abort(),Mn(E,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:w.signal}).then($=>{clearTimeout(z),$.ok?Mn(E,"TestPingServer: ok",!0,v):Mn(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(z),Mn(E,"TestPingServer: error",!1,v)})}function Mn(h,v,E,w,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),w(E)}catch{}}function Ms(){this.g=new Kc}function wi(h){this.i=h.Sb||null,this.h=h.ab||!1}S(wi,Yc),wi.prototype.g=function(){return new qa(this.i,this.h)};function qa(h,v){bt.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(qa,bt),i=qa.prototype,i.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,Wn(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Vs(this)),this.readyState=0},i.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Wn(this)),this.g&&(this.readyState=3,Wn(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Pr(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Pr(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}i.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?Vs(this):Wn(this),this.readyState==3&&Pr(this)}},i.Oa=function(h){this.g&&(this.response=this.responseText=h,Vs(this))},i.Na=function(h){this.g&&(this.response=h,Vs(this))},i.ga=function(){this.g&&Vs(this)};function Vs(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Wn(h)}i.setRequestHeader=function(h,v){this.A.append(h,v)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=v.next();return h.join(`\r
`)};function Wn(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(qa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Vn(h){let v="";return qe(h,function(E,w){v+=w,v+=":",v+=E,v+=`\r
`}),v}function Ba(h,v,E){e:{for(w in E){var w=!1;break e}w=!0}w||(E=Vn(E),typeof h=="string"?E!=null&&Ki(E):Je(h,v,E))}function et(h){bt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(et,bt);var xi=/^https?$/i,ul=["POST","PUT"];i=et.prototype,i.Fa=function(h){this.H=h},i.ea=function(h,v,E,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Zo.g(),this.g.onreadystatechange=A(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch($){Fa(this,$);return}if(h=E||"",E=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var z in w)E.set(z,w[z]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const $ of w.keys())E.set($,w.get($));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(E.keys()).find($=>$.toLowerCase()=="content-type"),z=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(ul,v,void 0)>=0)||w||z||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,oe]of E)this.g.setRequestHeader($,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch($){Fa(this,$)}};function Fa(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,hl(h),Yi(h)}function hl(h){h.A||(h.A=!0,kt(h,"complete"),kt(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,kt(this,"complete"),kt(this,"abort"),Yi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yi(this,!0)),et.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Ha(this):this.Xa())},i.Xa=function(){Ha(this)};function Ha(h){if(h.h&&typeof c<"u"){if(h.v&&Zn(h)==4)setTimeout(h.Ca.bind(h),0);else if(kt(h,"readystatechange"),Zn(h)==4){h.h=!1;try{const $=h.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var w;if(w=$===0){let oe=String(h.D).match(iu)[1]||null;!oe&&d.self&&d.self.location&&(oe=d.self.location.protocol.slice(0,-1)),w=!xi.test(oe?oe.toLowerCase():"")}E=w}if(E)kt(h,"complete"),kt(h,"success");else{h.o=6;try{var z=Zn(h)>2?h.g.statusText:""}catch{z=""}h.l=z+" ["+h.ca()+"]",hl(h)}}finally{Yi(h)}}}}function Yi(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const E=h.g;h.g=null,v||kt(h,"ready");try{E.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Zn(h){return h.g?h.g.readyState:0}i.ca=function(){try{return Zn(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Hd(v)}};function $t(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Xi(h){const v={};h=(h.g&&Zn(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(I(h[w]))continue;var E=eu(h[w]);const z=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const $=v[z]||[];v[z]=$,$.push(E)}$e(v,function(w){return w.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ci(h,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||v}function ks(h){this.za=0,this.i=[],this.j=new Kn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ci("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ci("baseRetryDelayMs",5e3,h),this.Za=Ci("retryDelaySeedMs",1e4,h),this.Ta=Ci("forwardChannelMaxRetries",2,h),this.va=Ci("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new el(h&&h.concurrentRequestLimit),this.Ba=new Ms,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=ks.prototype,i.ka=8,i.I=1,i.connect=function(h,v,E,w){At(0),this.W=h,this.H=v||{},E&&w!==void 0&&(this.H.OSID=E,this.H.OAID=w),this.F=this.X,this.J=mu(this,null,this.W),Ni(this)};function dl(h){if(Lr(h),h.I==3){var v=h.V++,E=Ct(h.J);if(Je(E,"SID",h.M),Je(E,"RID",v),Je(E,"TYPE","terminate"),Ga(h,E),v=new Yn(h,h.j,v),v.M=2,v.A=Ua(Ct(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!E&&d.Image&&(new Image().src=v.A,E=!0),E||(v.g=pu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),_i(v)}fu(h)}function Ps(h){h.g&&(ml(h),h.g.cancel(),h.g=null)}function Lr(h){Ps(h),h.v&&(d.clearTimeout(h.v),h.v=null),zr(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Ni(h){if(!tl(h.h)&&!h.m){h.m=!0;var v=h.Ea;ye||x(),se||(ye(),se=!0),N.add(v,h),h.D=0}}function Ur(h,v){return Si(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=gi(y(h.Ea,h,v),du(h,h.D)),h.D++,!0)}i.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const z=new Yn(this,this.j,h);let $=this.o;if(this.U&&($?($=k($),ce($,this.U)):$=this.U),this.u!==null||this.R||(z.J=$,$=null),this.S)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var w=this.i[E];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(v+=w,v>4096){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=lu(this,z,v),E=Ct(this.J),Je(E,"RID",h),Je(E,"CVER",22),this.G&&Je(E,"X-HTTP-Session-Id",this.G),Ga(this,E),$&&(this.R?v="headers="+Ki(Vn($))+"&"+v:this.u&&Ba(E,this.u,$)),nl(this.h,z),this.Ra&&Je(E,"TYPE","init"),this.S?(Je(E,"$req",v),Je(E,"SID","null"),z.U=!0,vi(z,E,null)):vi(z,E,v),this.I=2}}else this.I==3&&(h?fl(this,h):this.i.length==0||tl(this.h)||fl(this))};function fl(h,v){var E;v?E=v.l:E=h.V++;const w=Ct(h.J);Je(w,"SID",h.M),Je(w,"RID",E),Je(w,"AID",h.K),Ga(h,w),h.u&&h.o&&Ba(w,h.u,h.o),E=new Yn(h,h.j,E,h.D+1),h.u===null&&(E.J=h.o),v&&(h.i=v.G.concat(h.i)),v=lu(h,E,1e3),E.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),nl(h.h,E),vi(E,w,v)}function Ga(h,v){h.H&&qe(h.H,function(E,w){Je(v,w,E)}),h.l&&qe({},function(E,w){Je(v,w,E)})}function lu(h,v,E){E=Math.min(h.i.length,E);const w=h.l?y(h.l.Ka,h.l,h):null;e:{var z=h.i;let Re=-1;for(;;){const vt=["count="+E];Re==-1?E>0?(Re=z[0].g,vt.push("ofs="+Re)):Re=0:vt.push("ofs="+Re);let Qe=!0;for(let ut=0;ut<E;ut++){var $=z[ut].g;const kn=z[ut].map;if($-=Re,$<0)Re=Math.max(0,z[ut].g-100),Qe=!1;else try{$="req"+$+"_"||"";try{var oe=kn instanceof Map?kn:Object.entries(kn);for(const[Ii,ei]of oe){let ti=ei;g(ei)&&(ti=Rs(ei)),vt.push($+Ii+"="+encodeURIComponent(ti))}}catch(Ii){throw vt.push($+"type="+encodeURIComponent("_badmap")),Ii}}catch{w&&w(kn)}}if(Qe){oe=vt.join("&");break e}}oe=void 0}return h=h.i.splice(0,E),v.G=h,oe}function cu(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;ye||x(),se||(ye(),se=!0),N.add(v,h),h.A=0}}function $a(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=gi(y(h.Da,h),du(h,h.A)),h.A++,!0)}i.Da=function(){if(this.v=null,uu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=gi(y(this.Wa,this),h)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),Ps(this),uu(this))};function ml(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function uu(h){h.g=new Yn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=Ct(h.na);Je(v,"RID","rpc"),Je(v,"SID",h.M),Je(v,"AID",h.K),Je(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&Je(v,"TO",h.ia),Je(v,"TYPE","xmlhttp"),Ga(h,v),h.u&&h.o&&Ba(v,h.u,h.o),h.O&&(h.g.H=h.O);var E=h.g;h=h.ba,E.M=1,E.A=Ua(Ct(v)),E.u=null,E.R=!0,Dr(E,h)}i.Va=function(){this.C!=null&&(this.C=null,Ps(this),$a(this),At(19))};function zr(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function hu(h,v){var E=null;if(h.g==v){zr(h),ml(h),h.g=null;var w=2}else if(bi(h.h,v))E=v.G,il(h.h,v),w=1;else return;if(h.I!=0){if(v.o)if(w==1){E=v.u?v.u.length:0,v=Date.now()-v.F;var z=h.D;w=Ir(),kt(w,new pi(w,E)),Ni(h)}else cu(h);else if(z=v.m,z==3||z==0&&v.X>0||!(w==1&&Ur(h,v)||w==2&&$a(h)))switch(E&&E.length>0&&(v=h.h,v.i=v.i.concat(E)),z){case 1:Ri(h,5);break;case 4:Ri(h,10);break;case 3:Ri(h,6);break;default:Ri(h,2)}}}function du(h,v){let E=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(E*=2),E*v}function Ri(h,v){if(h.j.info("Error code "+v),v==2){var E=y(h.bb,h),w=h.Ua;const z=!w;w=new Tn(w||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||qt(w,"https"),Ua(w),z?Jn(w.toString(),E):cl(w.toString(),E)}else At(2);h.I=0,h.l&&h.l.pa(v),fu(h),Lr(h)}i.bb=function(h){h?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function fu(h){if(h.I=0,h.ja=[],h.l){const v=sl(h.h);(v.length!=0||h.i.length!=0)&&(L(h.ja,v),L(h.ja,h.i),h.h.i.length=0,C(h.i),h.i.length=0),h.l.oa()}}function mu(h,v,E){var w=E instanceof Tn?Ct(E):new Tn(E);if(w.g!="")v&&(w.g=v+"."+w.g),Is(w,w.u);else{var z=d.location;w=z.protocol,v=v?v+"."+z.hostname:z.hostname,z=+z.port;const $=new Tn(null);w&&qt($,w),v&&($.g=v),z&&Is($,z),E&&($.h=E),w=$}return E=h.G,v=h.wa,E&&v&&Je(w,E,v),Je(w,"VER",h.ka),Ga(h,w),w}function pu(h,v,E){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new et(new wi({ab:E})):new et(h.ma),v.Fa(h.L),v}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function gu(){}i=gu.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Ls(){}Ls.prototype.g=function(h,v){return new ln(h,v)};function ln(h,v){bt.call(this),this.g=new ks(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!I(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!I(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Ji(this)}S(ln,bt),ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){dl(this.g)},ln.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.v&&(E={},E.__data__=Rs(h),h=E);v.i.push(new xt(v.Ya++,h)),v.I==3&&Ni(v)},ln.prototype.N=function(){this.g.l=null,delete this.j,dl(this.g),delete this.g,ln.Z.N.call(this)};function yu(h){Gt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const E in v){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}S(yu,Gt);function vu(){jn.call(this),this.status=1}S(vu,jn);function Ji(h){this.g=h}S(Ji,gu),Ji.prototype.ra=function(){kt(this.g,"a")},Ji.prototype.qa=function(h){kt(this.g,new yu(h))},Ji.prototype.pa=function(h){kt(this.g,new vu)},Ji.prototype.oa=function(){kt(this.g,"b")},Ls.prototype.createWebChannel=Ls.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,sT=function(){return new Ls},iT=function(){return Ir()},nT=yt,Tp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Pa.NO_ERROR=0,Pa.TIMEOUT=8,Pa.HTTP_ERROR=6,kh=Pa,Wo.COMPLETE="complete",tT=Wo,Xc.EventType=Qn,Qn.OPEN="a",Qn.CLOSE="b",Qn.ERROR="c",Qn.MESSAGE="d",bt.prototype.listen=bt.prototype.J,ic=Xc,et.prototype.listenOnce=et.prototype.K,et.prototype.getLastError=et.prototype.Ha,et.prototype.getLastErrorCode=et.prototype.ya,et.prototype.getStatus=et.prototype.ca,et.prototype.getResponseJson=et.prototype.La,et.prototype.getResponseText=et.prototype.la,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Fa,eT=et}).apply(typeof bh<"u"?bh:typeof self<"u"?self:typeof window<"u"?window:{});const Y0="@firebase/firestore",X0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r=new Fp("@firebase/firestore");function _o(){return _r.logLevel}function de(i,...e){if(_r.logLevel<=Le.DEBUG){const n=e.map(eg);_r.debug(`Firestore (${zo}): ${i}`,...n)}}function bs(i,...e){if(_r.logLevel<=Le.ERROR){const n=e.map(eg);_r.error(`Firestore (${zo}): ${i}`,...n)}}function Do(i,...e){if(_r.logLevel<=Le.WARN){const n=e.map(eg);_r.warn(`Firestore (${zo}): ${i}`,...n)}}function eg(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(i,e,n){let a="Unexpected state";typeof e=="string"?a=e:n=e,aT(i,a,n)}function aT(i,e,n){let a=`FIRESTORE (${zo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw bs(a),new Error(a)}function Xe(i,e,n,a){let o="Unexpected state";typeof n=="string"?o=n:a=n,i||aT(e,o,a)}function Ne(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends xs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(nn.UNAUTHENTICATED)))}shutdown(){}}class YN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class XN{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Xe(this.o===void 0,42304);let a=this.i;const o=p=>this.i!==a?(a=this.i,n(p)):Promise.resolve();let c=new vs;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new vs,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const p=c;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},g=p=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((p=>g(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new vs)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((a=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Xe(typeof a.accessToken=="string",31837,{l:a}),new rT(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class JN{constructor(e,n,a){this.P=e,this.T=n,this.I=a,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class WN{constructor(e,n,a){this.P=e,this.T=n,this.I=a}getToken(){return Promise.resolve(new JN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class J0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Xe(this.o===void 0,3512);const a=c=>{c.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,de("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>a(c)))};const o=c=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new J0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Xe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new J0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let a=0;a<i;a++)n[a]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=e2(40);for(let c=0;c<o.length;++c)a.length<20&&o[c]<n&&(a+=e.charAt(o[c]%62))}return a}}function Ue(i,e){return i<e?-1:i>e?1:0}function Sp(i,e){const n=Math.min(i.length,e.length);for(let a=0;a<n;a++){const o=i.charAt(a),c=e.charAt(a);if(o!==c)return tp(o)===tp(c)?Ue(o,c):tp(o)?1:-1}return Ue(i.length,e.length)}const t2=55296,n2=57343;function tp(i){const e=i.charCodeAt(0);return e>=t2&&e<=n2}function jo(i,e,n){return i.length===e.length&&i.every(((a,o)=>n(a,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="__name__";class Vi{constructor(e,n,a){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),a===void 0?a=e.length-n:a>e.length-n&&Ae(1746,{length:a,range:e.length-n}),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return Vi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vi?e.forEach((a=>{n.push(a)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let o=0;o<a;o++){const c=Vi.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Ue(e.length,n.length)}static compareSegments(e,n){const a=Vi.isNumericId(e),o=Vi.isNumericId(n);return a&&!o?-1:!a&&o?1:a&&o?Vi.extractNumericId(e).compare(Vi.extractNumericId(n)):Sp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return va.fromString(e.substring(4,e.length-2))}}class rt extends Vi{construct(e,n,a){return new rt(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new ue(W.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter((o=>o.length>0)))}return new rt(n)}static emptyPath(){return new rt([])}}const i2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends Vi{construct(e,n,a){return new Wt(e,n,a)}static isValidIdentifier(e){return i2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===W0}static keyField(){return new Wt([W0])}static fromServerFormat(e){const n=[];let a="",o=0;const c=()=>{if(a.length===0)throw new ue(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let d=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new ue(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ue(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=p,o+=2}else g==="`"?(d=!d,o++):g!=="."||d?(a+=g,o++):(c(),o++)}if(c(),d)throw new ue(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(n)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(rt.fromString(e))}static fromName(e){return new Te(rt.fromString(e).popFirst(5))}static empty(){return new Te(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return rt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new rt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(i,e,n){if(!n)throw new ue(W.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function s2(i,e,n,a){if(e===!0&&a===!0)throw new ue(W.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Z0(i){if(!Te.isDocumentKey(i))throw new ue(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function eE(i){if(Te.isDocumentKey(i))throw new ue(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function lT(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function yd(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ae(12329,{type:typeof i})}function hi(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ue(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yd(i);throw new ue(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function a2(i,e){if(e<=0)throw new ue(W.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(i,e){const n={typeString:i};return e&&(n.value=e),n}function jc(i,e){if(!lT(i))throw new ue(W.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in e)if(e[a]){const o=e[a].typeString,c="value"in e[a]?{value:e[a].value}:void 0;if(!(a in i)){n=`JSON missing required field: '${a}'`;break}const d=i[a];if(o&&typeof d!==o){n=`JSON field '${a}' must be a ${o}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${a}' field to equal '${c.value}'`;break}}if(n)throw new ue(W.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=-62135596800,nE=1e6;class me{static now(){return me.fromMillis(Date.now())}static fromDate(e){return me.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor((e-1e3*n)*nE);return new me(n,a)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<tE)throw new ue(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/nE}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:me._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(jc(e,me._jsonSchema))return new me(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-tE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}me._jsonSchemaVersion="firestore/timestamp/1.0",me._jsonSchema={type:Mt("string",me._jsonSchemaVersion),seconds:Mt("number"),nanoseconds:Mt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new me(0,0))}static max(){return new xe(new me(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=-1;function r2(i,e){const n=i.toTimestamp().seconds,a=i.toTimestamp().nanoseconds+1,o=xe.fromTimestamp(a===1e9?new me(n+1,0):new me(n,a));return new Ea(o,Te.empty(),e)}function o2(i){return new Ea(i.readTime,i.key,gc)}class Ea{constructor(e,n,a){this.readTime=e,this.documentKey=n,this.largestBatchId=a}static min(){return new Ea(xe.min(),Te.empty(),gc)}static max(){return new Ea(xe.max(),Te.empty(),gc)}}function l2(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(i.documentKey,e.documentKey),n!==0?n:Ue(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class u2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(i){if(i.code!==W.FAILED_PRECONDITION||i.message!==c2)throw i;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ie(((a,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(a,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(a,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ie?n:ie.resolve(n)}catch(n){return ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.reject(n)}static resolve(e){return new ie(((n,a)=>{n(e)}))}static reject(e){return new ie(((n,a)=>{a(e)}))}static waitFor(e){return new ie(((n,a)=>{let o=0,c=0,d=!1;e.forEach((g=>{++o,g.next((()=>{++c,d&&c===o&&n()}),(p=>a(p)))})),d=!0,c===o&&n()}))}static or(e){let n=ie.resolve(!1);for(const a of e)n=n.next((o=>o?ie.resolve(o):a()));return n}static forEach(e,n){const a=[];return e.forEach(((o,c)=>{a.push(n.call(this,o,c))})),this.waitFor(a)}static mapArray(e,n){return new ie(((a,o)=>{const c=e.length,d=new Array(c);let g=0;for(let p=0;p<c;p++){const y=p;n(e[y]).next((T=>{d[y]=T,++g,g===c&&a(d)}),(T=>o(T)))}}))}static doWhile(e,n){return new ie(((a,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):a()};c()}))}}function h2(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Bo(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>n.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng=-1;function _d(i){return i==null}function Zh(i){return i===0&&1/i==-1/0}function d2(i){return typeof i=="number"&&Number.isInteger(i)&&!Zh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="";function f2(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=iE(e)),e=m2(i.get(n),e);return iE(e)}function m2(i,e){let n=e;const a=i.length;for(let o=0;o<a;o++){const c=i.charAt(o);switch(c){case"\0":n+="";break;case cT:n+="";break;default:n+=c}}return n}function iE(i){return i+cT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Na(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function uT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n){this.comparator=e,this.root=n||Jt.EMPTY}insert(e,n){return new mt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return n.value;a<0?n=n.left:a>0&&(n=n.right)}return null}indexOf(e){let n=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return n+a.left.size;o<0?a=a.left:(n+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,a)=>(e(n,a),!1)))}toString(){const e=[];return this.inorderTraversal(((n,a)=>(e.push(`${n}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ah(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ah(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ah(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ah(this.root,e,this.comparator,!0)}}class Ah{constructor(e,n,a,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?a(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jt{constructor(e,n,a,o,c){this.key=e,this.value=n,this.color=a??Jt.RED,this.left=o??Jt.EMPTY,this.right=c??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,a,o,c){return new Jt(e??this.key,n??this.value,a??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let o=this;const c=a(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,a),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let a,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Jt.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,a,o,c){return this}insert(e,n,a){return new Jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,a)=>(e(n),!1)))}forEachInRange(e,n){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let a;for(a=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new aE(this.data.getIterator())}getIteratorFrom(e){return new aE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((a=>{n=n.add(a)})),n}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),a=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=a.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ut(this.comparator);return n.data=e,n}}class aE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new In([])}unionWith(e){let n=new Ut(Wt.comparator);for(const a of this.fields)n=n.add(a);for(const a of e)n=n.add(a);return new In(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return jo(this.fields,e.fields,((n,a)=>n.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new hT("Invalid base64 string: "+c):c}})(e);return new Zt(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c})(e);return new Zt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const a=new Uint8Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const p2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ta(i){if(Xe(!!i,39018),typeof i=="string"){let e=0;const n=p2.exec(i);if(Xe(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(i);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Tt(i.seconds),nanos:Tt(i.nanos)}}function Tt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Sa(i){return typeof i=="string"?Zt.fromBase64String(i):Zt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="server_timestamp",fT="__type__",mT="__previous_value__",pT="__local_write_time__";function ig(i){return(i?.mapValue?.fields||{})[fT]?.stringValue===dT}function Ed(i){const e=i.mapValue.fields[mT];return ig(e)?Ed(e):e}function yc(i){const e=Ta(i.mapValue.fields[pT].timestampValue);return new me(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,n,a,o,c,d,g,p,y,T){this.databaseId=e,this.appId=n,this.persistenceKey=a,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=T}}const ed="(default)";class vc{constructor(e,n){this.projectId=e,this.database=n||ed}static empty(){return new vc("","")}get isDefaultDatabase(){return this.database===ed}isEqual(e){return e instanceof vc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="__type__",y2="__max__",wh={mapValue:{}},yT="__vector__",td="value";function ba(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?ig(i)?4:_2(i)?9007199254740991:v2(i)?10:11:Ae(28295,{value:i})}function Hi(i,e){if(i===e)return!0;const n=ba(i);if(n!==ba(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return yc(i).isEqual(yc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=Ta(o.timestampValue),g=Ta(c.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,c){return Sa(o.bytesValue).isEqual(Sa(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,c){return Tt(o.geoPointValue.latitude)===Tt(c.geoPointValue.latitude)&&Tt(o.geoPointValue.longitude)===Tt(c.geoPointValue.longitude)})(i,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Tt(o.integerValue)===Tt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=Tt(o.doubleValue),g=Tt(c.doubleValue);return d===g?Zh(d)===Zh(g):isNaN(d)&&isNaN(g)}return!1})(i,e);case 9:return jo(i.arrayValue.values||[],e.arrayValue.values||[],Hi);case 10:case 11:return(function(o,c){const d=o.mapValue.fields||{},g=c.mapValue.fields||{};if(sE(d)!==sE(g))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(g[p]===void 0||!Hi(d[p],g[p])))return!1;return!0})(i,e);default:return Ae(52216,{left:i})}}function _c(i,e){return(i.values||[]).find((n=>Hi(n,e)))!==void 0}function Oo(i,e){if(i===e)return 0;const n=ba(i),a=ba(e);if(n!==a)return Ue(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ue(i.booleanValue,e.booleanValue);case 2:return(function(c,d){const g=Tt(c.integerValue||c.doubleValue),p=Tt(d.integerValue||d.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1})(i,e);case 3:return rE(i.timestampValue,e.timestampValue);case 4:return rE(yc(i),yc(e));case 5:return Sp(i.stringValue,e.stringValue);case 6:return(function(c,d){const g=Sa(c),p=Sa(d);return g.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(c,d){const g=c.split("/"),p=d.split("/");for(let y=0;y<g.length&&y<p.length;y++){const T=Ue(g[y],p[y]);if(T!==0)return T}return Ue(g.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,d){const g=Ue(Tt(c.latitude),Tt(d.latitude));return g!==0?g:Ue(Tt(c.longitude),Tt(d.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return oE(i.arrayValue,e.arrayValue);case 10:return(function(c,d){const g=c.fields||{},p=d.fields||{},y=g[td]?.arrayValue,T=p[td]?.arrayValue,S=Ue(y?.values?.length||0,T?.values?.length||0);return S!==0?S:oE(y,T)})(i.mapValue,e.mapValue);case 11:return(function(c,d){if(c===wh.mapValue&&d===wh.mapValue)return 0;if(c===wh.mapValue)return 1;if(d===wh.mapValue)return-1;const g=c.fields||{},p=Object.keys(g),y=d.fields||{},T=Object.keys(y);p.sort(),T.sort();for(let S=0;S<p.length&&S<T.length;++S){const A=Sp(p[S],T[S]);if(A!==0)return A;const C=Oo(g[p[S]],y[T[S]]);if(C!==0)return C}return Ue(p.length,T.length)})(i.mapValue,e.mapValue);default:throw Ae(23264,{he:n})}}function rE(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ue(i,e);const n=Ta(i),a=Ta(e),o=Ue(n.seconds,a.seconds);return o!==0?o:Ue(n.nanos,a.nanos)}function oE(i,e){const n=i.values||[],a=e.values||[];for(let o=0;o<n.length&&o<a.length;++o){const c=Oo(n[o],a[o]);if(c)return c}return Ue(n.length,a.length)}function Mo(i){return bp(i)}function bp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const a=Ta(n);return`time(${a.seconds},${a.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return Sa(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Te.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let a="[",o=!0;for(const c of n.values||[])o?o=!1:a+=",",a+=bp(c);return a+"]"})(i.arrayValue):"mapValue"in i?(function(n){const a=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const d of a)c?c=!1:o+=",",o+=`${d}:${bp(n.fields[d])}`;return o+"}"})(i.mapValue):Ae(61005,{value:i})}function Ph(i){switch(ba(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ed(i);return e?16+Ph(e):16;case 5:return 2*i.stringValue.length;case 6:return Sa(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,c)=>o+Ph(c)),0)})(i.arrayValue);case 10:case 11:return(function(a){let o=0;return Na(a.fields,((c,d)=>{o+=c.length+Ph(d)})),o})(i.mapValue);default:throw Ae(13486,{value:i})}}function lE(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Ap(i){return!!i&&"integerValue"in i}function sg(i){return!!i&&"arrayValue"in i}function cE(i){return!!i&&"nullValue"in i}function uE(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Lh(i){return!!i&&"mapValue"in i}function v2(i){return(i?.mapValue?.fields||{})[gT]?.stringValue===yT}function cc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Na(i.mapValue.fields,((n,a)=>e.mapValue.fields[n]=cc(a))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=cc(i.arrayValue.values[n]);return e}return{...i}}function _2(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===y2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let a=0;a<e.length-1;++a)if(n=(n.mapValue.fields||{})[e.get(a)],!Lh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=cc(n)}setAll(e){let n=Wt.emptyPath(),a={},o=[];e.forEach(((d,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,a,o),a={},o=[],n=g.popLast()}d?a[g.lastSegment()]=cc(d):o.push(g.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,a,o)}delete(e){const n=this.field(e.popLast());Lh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=n.mapValue.fields[e.get(a)];Lh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(a)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,a){Na(n,((o,c)=>e[o]=c));for(const o of a)delete e[o]}clone(){return new vn(cc(this.value))}}function vT(i){const e=[];return Na(i.fields,((n,a)=>{const o=new Wt([n]);if(Lh(a)){const c=vT(a.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)})),new In(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n,a,o,c,d,g){this.key=e,this.documentType=n,this.version=a,this.readTime=o,this.createTime=c,this.data=d,this.documentState=g}static newInvalidDocument(e){return new sn(e,0,xe.min(),xe.min(),xe.min(),vn.empty(),0)}static newFoundDocument(e,n,a,o){return new sn(e,1,n,xe.min(),a,o,0)}static newNoDocument(e,n){return new sn(e,2,n,xe.min(),xe.min(),vn.empty(),0)}static newUnknownDocument(e,n){return new sn(e,3,n,xe.min(),xe.min(),vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n){this.position=e,this.inclusive=n}}function hE(i,e,n){let a=0;for(let o=0;o<i.position.length;o++){const c=e[o],d=i.position[o];if(c.field.isKeyField()?a=Te.comparator(Te.fromName(d.referenceValue),n.key):a=Oo(d,n.data.field(c.field)),c.dir==="desc"&&(a*=-1),a!==0)break}return a}function dE(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Hi(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,n="asc"){this.field=e,this.dir=n}}function E2(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{}class Ot extends _T{constructor(e,n,a){super(),this.field=e,this.op=n,this.value=a}static create(e,n,a){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,a):new S2(e,n,a):n==="array-contains"?new w2(e,a):n==="in"?new x2(e,a):n==="not-in"?new C2(e,a):n==="array-contains-any"?new N2(e,a):new Ot(e,n,a)}static createKeyFieldInFilter(e,n,a){return n==="in"?new b2(e,a):new A2(e,a)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Oo(n,this.value)):n!==null&&ba(this.value)===ba(n)&&this.matchesComparison(Oo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class di extends _T{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new di(e,n)}matches(e){return ET(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ET(i){return i.op==="and"}function TT(i){return T2(i)&&ET(i)}function T2(i){for(const e of i.filters)if(e instanceof di)return!1;return!0}function wp(i){if(i instanceof Ot)return i.field.canonicalString()+i.op.toString()+Mo(i.value);if(TT(i))return i.filters.map((e=>wp(e))).join(",");{const e=i.filters.map((n=>wp(n))).join(",");return`${i.op}(${e})`}}function ST(i,e){return i instanceof Ot?(function(a,o){return o instanceof Ot&&a.op===o.op&&a.field.isEqual(o.field)&&Hi(a.value,o.value)})(i,e):i instanceof di?(function(a,o){return o instanceof di&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((c,d,g)=>c&&ST(d,o.filters[g])),!0):!1})(i,e):void Ae(19439)}function bT(i){return i instanceof Ot?(function(n){return`${n.field.canonicalString()} ${n.op} ${Mo(n.value)}`})(i):i instanceof di?(function(n){return n.op.toString()+" {"+n.getFilters().map(bT).join(" ,")+"}"})(i):"Filter"}class S2 extends Ot{constructor(e,n,a){super(e,n,a),this.key=Te.fromName(a.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class b2 extends Ot{constructor(e,n){super(e,"in",n),this.keys=AT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class A2 extends Ot{constructor(e,n){super(e,"not-in",n),this.keys=AT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function AT(i,e){return(e.arrayValue?.values||[]).map((n=>Te.fromName(n.referenceValue)))}class w2 extends Ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sg(n)&&_c(n.arrayValue,this.value)}}class x2 extends Ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_c(this.value.arrayValue,n)}}class C2 extends Ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(_c(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!_c(this.value.arrayValue,n)}}class N2 extends Ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((a=>_c(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,n=null,a=[],o=[],c=null,d=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=a,this.filters=o,this.limit=c,this.startAt=d,this.endAt=g,this.Te=null}}function fE(i,e=null,n=[],a=[],o=null,c=null,d=null){return new R2(i,e,n,a,o,c,d)}function ag(i){const e=Ne(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((a=>wp(a))).join(","),n+="|ob:",n+=e.orderBy.map((a=>(function(c){return c.field.canonicalString()+c.dir})(a))).join(","),_d(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((a=>Mo(a))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((a=>Mo(a))).join(",")),e.Te=n}return e.Te}function rg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!E2(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!ST(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!dE(i.startAt,e.startAt)&&dE(i.endAt,e.endAt)}function xp(i){return Te.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n=null,a=[],o=[],c=null,d="F",g=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=o,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function I2(i,e,n,a,o,c,d,g){return new Fo(i,e,n,a,o,c,d,g)}function og(i){return new Fo(i)}function mE(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function wT(i){return i.collectionGroup!==null}function uc(i){const e=Ne(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Ut(Wt.comparator);return d.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(g=g.add(y.field))}))})),g})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Ec(c,a))})),n.has(Wt.keyField().canonicalString())||e.Ie.push(new Ec(Wt.keyField(),a))}return e.Ie}function zi(i){const e=Ne(i);return e.Ee||(e.Ee=D2(e,uc(i))),e.Ee}function D2(i,e){if(i.limitType==="F")return fE(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new Ec(o.field,c)}));const n=i.endAt?new nd(i.endAt.position,i.endAt.inclusive):null,a=i.startAt?new nd(i.startAt.position,i.startAt.inclusive):null;return fE(i.path,i.collectionGroup,e,i.filters,i.limit,n,a)}}function Cp(i,e){const n=i.filters.concat([e]);return new Fo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function id(i,e,n){return new Fo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Td(i,e){return rg(zi(i),zi(e))&&i.limitType===e.limitType}function xT(i){return`${ag(zi(i))}|lt:${i.limitType}`}function Eo(i){return`Query(target=${(function(n){let a=n.path.canonicalString();return n.collectionGroup!==null&&(a+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(a+=`, filters: [${n.filters.map((o=>bT(o))).join(", ")}]`),_d(n.limit)||(a+=", limit: "+n.limit),n.orderBy.length>0&&(a+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(a+=", startAt: ",a+=n.startAt.inclusive?"b:":"a:",a+=n.startAt.position.map((o=>Mo(o))).join(",")),n.endAt&&(a+=", endAt: ",a+=n.endAt.inclusive?"a:":"b:",a+=n.endAt.position.map((o=>Mo(o))).join(",")),`Target(${a})`})(zi(i))}; limitType=${i.limitType})`}function Sd(i,e){return e.isFoundDocument()&&(function(a,o){const c=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(c):Te.isDocumentKey(a.path)?a.path.isEqual(c):a.path.isImmediateParentOf(c)})(i,e)&&(function(a,o){for(const c of uc(a))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(a,o){for(const c of a.filters)if(!c.matches(o))return!1;return!0})(i,e)&&(function(a,o){return!(a.startAt&&!(function(d,g,p){const y=hE(d,g,p);return d.inclusive?y<=0:y<0})(a.startAt,uc(a),o)||a.endAt&&!(function(d,g,p){const y=hE(d,g,p);return d.inclusive?y>=0:y>0})(a.endAt,uc(a),o))})(i,e)}function j2(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function CT(i){return(e,n)=>{let a=!1;for(const o of uc(i)){const c=O2(o,e,n);if(c!==0)return c;a=a||o.field.isKeyField()}return 0}}function O2(i,e,n){const a=i.field.isKeyField()?Te.comparator(e.key,n.key):(function(c,d,g){const p=d.data.field(c),y=g.data.field(c);return p!==null&&y!==null?Oo(p,y):Ae(42886)})(i.field,e,n);switch(i.dir){case"asc":return a;case"desc":return-1*a;default:return Ae(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a!==void 0){for(const[o,c]of a)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[n]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Na(this.inner,((n,a)=>{for(const[o,c]of a)e(o,c)}))}isEmpty(){return uT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=new mt(Te.comparator);function As(){return M2}const NT=new mt(Te.comparator);function sc(...i){let e=NT;for(const n of i)e=e.insert(n.key,n);return e}function RT(i){let e=NT;return i.forEach(((n,a)=>e=e.insert(n,a.overlayedDocument))),e}function ur(){return hc()}function IT(){return hc()}function hc(){return new br((i=>i.toString()),((i,e)=>i.isEqual(e)))}const V2=new mt(Te.comparator),k2=new Ut(Te.comparator);function ze(...i){let e=k2;for(const n of i)e=e.add(n);return e}const P2=new Ut(Ue);function L2(){return P2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zh(e)?"-0":e}}function DT(i){return{integerValue:""+i}}function U2(i,e){return d2(e)?DT(e):lg(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(){this._=void 0}}function z2(i,e,n){return i instanceof sd?(function(o,c){const d={fields:{[fT]:{stringValue:dT},[pT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&ig(c)&&(c=Ed(c)),c&&(d.fields[mT]=c),{mapValue:d}})(n,e):i instanceof Tc?OT(i,e):i instanceof Sc?MT(i,e):(function(o,c){const d=jT(o,c),g=pE(d)+pE(o.Ae);return Ap(d)&&Ap(o.Ae)?DT(g):lg(o.serializer,g)})(i,e)}function q2(i,e,n){return i instanceof Tc?OT(i,e):i instanceof Sc?MT(i,e):n}function jT(i,e){return i instanceof ad?(function(a){return Ap(a)||(function(c){return!!c&&"doubleValue"in c})(a)})(e)?e:{integerValue:0}:null}class sd extends bd{}class Tc extends bd{constructor(e){super(),this.elements=e}}function OT(i,e){const n=VT(e);for(const a of i.elements)n.some((o=>Hi(o,a)))||n.push(a);return{arrayValue:{values:n}}}class Sc extends bd{constructor(e){super(),this.elements=e}}function MT(i,e){let n=VT(e);for(const a of i.elements)n=n.filter((o=>!Hi(o,a)));return{arrayValue:{values:n}}}class ad extends bd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function pE(i){return Tt(i.integerValue||i.doubleValue)}function VT(i){return sg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function B2(i,e){return i.field.isEqual(e.field)&&(function(a,o){return a instanceof Tc&&o instanceof Tc||a instanceof Sc&&o instanceof Sc?jo(a.elements,o.elements,Hi):a instanceof ad&&o instanceof ad?Hi(a.Ae,o.Ae):a instanceof sd&&o instanceof sd})(i.transform,e.transform)}class F2{constructor(e,n){this.version=e,this.transformResults=n}}class _n{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _n}static exists(e){return new _n(void 0,e)}static updateTime(e){return new _n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Ad{}function kT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new wd(i.key,_n.none()):new Oc(i.key,i.data,_n.none());{const n=i.data,a=vn.empty();let o=new Ut(Wt.comparator);for(let c of e.fields)if(!o.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?a.delete(c):a.set(c,d),o=o.add(c)}return new Ra(i.key,a,new In(o.toArray()),_n.none())}}function H2(i,e,n){i instanceof Oc?(function(o,c,d){const g=o.value.clone(),p=yE(o.fieldTransforms,c,d.transformResults);g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(i,e,n):i instanceof Ra?(function(o,c,d){if(!Uh(o.precondition,c))return void c.convertToUnknownDocument(d.version);const g=yE(o.fieldTransforms,c,d.transformResults),p=c.data;p.setAll(PT(o)),p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(i,e,n):(function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function dc(i,e,n,a){return i instanceof Oc?(function(c,d,g,p){if(!Uh(c.precondition,d))return g;const y=c.value.clone(),T=vE(c.fieldTransforms,p,d);return y.setAll(T),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(i,e,n,a):i instanceof Ra?(function(c,d,g,p){if(!Uh(c.precondition,d))return g;const y=vE(c.fieldTransforms,p,d),T=d.data;return T.setAll(PT(c)),T.setAll(y),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((S=>S.field)))})(i,e,n,a):(function(c,d,g){return Uh(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(i,e,n)}function G2(i,e){let n=null;for(const a of i.fieldTransforms){const o=e.data.field(a.field),c=jT(a.transform,o||null);c!=null&&(n===null&&(n=vn.empty()),n.set(a.field,c))}return n||null}function gE(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&jo(a,o,((c,d)=>B2(c,d)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Oc extends Ad{constructor(e,n,a,o=[]){super(),this.key=e,this.value=n,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ra extends Ad{constructor(e,n,a,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=a,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function PT(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const a=i.data.field(n);e.set(n,a)}})),e}function yE(i,e,n){const a=new Map;Xe(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const c=i[o],d=c.transform,g=e.data.field(c.field);a.set(c.field,q2(d,g,n[o]))}return a}function vE(i,e,n){const a=new Map;for(const o of i){const c=o.transform,d=n.data.field(o.field);a.set(o.field,z2(c,d,e))}return a}class wd extends Ad{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $2 extends Ad{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,n,a,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,n){const a=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&H2(c,e,a[o])}}applyToLocalView(e,n){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(n=dc(a,e,n,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(n=dc(a,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const a=IT();return this.mutations.forEach((o=>{const c=e.get(o.key),d=c.overlayedDocument;let g=this.applyToLocalView(d,c.mutatedFields);g=n.has(o.key)?null:g;const p=kT(d,g);p!==null&&a.set(o.key,p),d.isValidDocument()||d.convertToNoDocument(xe.min())})),a}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ze())}isEqual(e){return this.batchId===e.batchId&&jo(this.mutations,e.mutations,((n,a)=>gE(n,a)))&&jo(this.baseMutations,e.baseMutations,((n,a)=>gE(n,a)))}}class cg{constructor(e,n,a,o){this.batch=e,this.commitVersion=n,this.mutationResults=a,this.docVersions=o}static from(e,n,a){Xe(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return V2})();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,a[d].version);return new cg(e,n,a,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,Fe;function X2(i){switch(i){case W.OK:return Ae(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return Ae(15467,{code:i})}}function LT(i){if(i===void 0)return bs("GRPC error has no .code"),W.UNKNOWN;switch(i){case jt.OK:return W.OK;case jt.CANCELLED:return W.CANCELLED;case jt.UNKNOWN:return W.UNKNOWN;case jt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case jt.INTERNAL:return W.INTERNAL;case jt.UNAVAILABLE:return W.UNAVAILABLE;case jt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case jt.NOT_FOUND:return W.NOT_FOUND;case jt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case jt.ABORTED:return W.ABORTED;case jt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case jt.DATA_LOSS:return W.DATA_LOSS;default:return Ae(39323,{code:i})}}(Fe=jt||(jt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=new va([4294967295,4294967295],0);function _E(i){const e=J2().encode(i),n=new Z1;return n.update(e),new Uint8Array(n.digest())}function EE(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new va([n,a],0),new va([o,c],0)]}class ug{constructor(e,n,a){if(this.bitmap=e,this.padding=n,this.hashCount=a,n<0||n>=8)throw new ac(`Invalid padding: ${n}`);if(a<0)throw new ac(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new ac(`Invalid hash count: ${a}`);if(e.length===0&&n!==0)throw new ac(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=va.fromNumber(this.ge)}ye(e,n,a){let o=e.add(n.multiply(va.fromNumber(a)));return o.compare(W2)===1&&(o=new va([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=_E(e),[a,o]=EE(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(a,o,c);if(!this.we(d))return!1}return!0}static create(e,n,a){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new ug(c,o,n);return a.forEach((g=>d.insert(g))),d}insert(e){if(this.ge===0)return;const n=_E(e),[a,o]=EE(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(a,o,c);this.Se(d)}}Se(e){const n=Math.floor(e/8),a=e%8;this.bitmap[n]|=1<<a}}class ac extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,n,a,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,a){const o=new Map;return o.set(e,Mc.createSynthesizedTargetChangeForCurrentChange(e,n,a)),new xd(xe.min(),o,new mt(Ue),As(),ze())}}class Mc{constructor(e,n,a,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,a){return new Mc(a,n,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n,a,o){this.be=e,this.removedTargetIds=n,this.key=a,this.De=o}}class UT{constructor(e,n){this.targetId=e,this.Ce=n}}class zT{constructor(e,n,a=Zt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=a,this.cause=o}}class TE{constructor(){this.ve=0,this.Fe=SE(),this.Me=Zt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),n=ze(),a=ze();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:a=a.add(o);break;default:Ae(38017,{changeType:c})}})),new Mc(this.Me,this.xe,e,n,a)}qe(){this.Oe=!1,this.Fe=SE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Z2{constructor(e){this.Ge=e,this.ze=new Map,this.je=As(),this.Je=xh(),this.He=xh(),this.Ye=new mt(Ue)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const a=this.nt(n);switch(e.state){case 0:this.rt(n)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),a.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((a,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,a=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(xp(c))if(a===0){const d=new Te(c.path);this.et(n,d,sn.newNoDocument(d,xe.min()))}else Xe(a===1,20013,{expectedCount:a});else{const d=this._t(n);if(d!==a){const g=this.ut(e),p=g?this.ct(g,e,d):1;if(p!==0){this.it(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:c=0}=n;let d,g;try{d=Sa(a).toUint8Array()}catch(p){if(p instanceof hT)return Do("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new ug(d,o,c)}catch(p){return Do(p instanceof ac?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(e,n,a){return n.Ce.count===a-this.Pt(e,n.targetId)?0:2}Pt(e,n){const a=this.Ge.getRemoteKeysForTarget(n);let o=0;return a.forEach((c=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,d)=>{const g=this.ot(d);if(g){if(c.current&&xp(g.target)){const p=new Te(g.target.path);this.It(p).has(d)||this.Et(d,p)||this.et(d,p,sn.newNoDocument(p,e))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let a=ze();this.He.forEach(((c,d)=>{let g=!0;d.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(a=a.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const o=new xd(e,n,this.Ye,this.je,a);return this.je=As(),this.Je=xh(),this.He=xh(),this.Ye=new mt(Ue),o}Xe(e,n){if(!this.rt(e))return;const a=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,a),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),a&&(this.je=this.je.insert(n,a))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new TE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ut(Ue),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ut(Ue),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new TE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function xh(){return new mt(Te.comparator)}function SE(){return new mt(Te.comparator)}const eR={asc:"ASCENDING",desc:"DESCENDING"},tR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nR={and:"AND",or:"OR"};class iR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Np(i,e){return i.useProto3Json||_d(e)?e:{value:e}}function rd(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function sR(i,e){return rd(i,e.toTimestamp())}function qi(i){return Xe(!!i,49232),xe.fromTimestamp((function(n){const a=Ta(n);return new me(a.seconds,a.nanos)})(i))}function hg(i,e){return Rp(i,e).canonicalString()}function Rp(i,e){const n=(function(o){return new rt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function BT(i){const e=rt.fromString(i);return Xe(QT(e),10190,{key:e.toString()}),e}function Ip(i,e){return hg(i.databaseId,e.path)}function np(i,e){const n=BT(e);if(n.get(1)!==i.databaseId.projectId)throw new ue(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ue(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Te(HT(n))}function FT(i,e){return hg(i.databaseId,e)}function aR(i){const e=BT(i);return e.length===4?rt.emptyPath():HT(e)}function Dp(i){return new rt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function HT(i){return Xe(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function bE(i,e,n){return{name:Ip(i,e),fields:n.value.mapValue.fields}}function rR(i,e){let n;if("targetChange"in e){e.targetChange;const a=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ae(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(y,T){return y.useProto3Json?(Xe(T===void 0||typeof T=="string",58123),Zt.fromBase64String(T||"")):(Xe(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Zt.fromUint8Array(T||new Uint8Array))})(i,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&(function(y){const T=y.code===void 0?W.UNKNOWN:LT(y.code);return new ue(T,y.message||"")})(d);n=new zT(a,o,c,g||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=np(i,a.document.name),c=qi(a.document.updateTime),d=a.document.createTime?qi(a.document.createTime):xe.min(),g=new vn({mapValue:{fields:a.document.fields}}),p=sn.newFoundDocument(o,c,d,g),y=a.targetIds||[],T=a.removedTargetIds||[];n=new zh(y,T,p.key,p)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=np(i,a.document),c=a.readTime?qi(a.readTime):xe.min(),d=sn.newNoDocument(o,c),g=a.removedTargetIds||[];n=new zh([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=np(i,a.document),c=a.removedTargetIds||[];n=new zh([],c,o,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:c}=a,d=new Y2(o,c),g=a.targetId;n=new UT(g,d)}}return n}function oR(i,e){let n;if(e instanceof Oc)n={update:bE(i,e.key,e.value)};else if(e instanceof wd)n={delete:Ip(i,e.key)};else if(e instanceof Ra)n={update:bE(i,e.key,e.data),updateMask:gR(e.fieldMask)};else{if(!(e instanceof $2))return Ae(16599,{Vt:e.type});n={verify:Ip(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((a=>(function(c,d){const g=d.transform;if(g instanceof sd)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Tc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Sc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof ad)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw Ae(20930,{transform:d.transform})})(0,a)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:sR(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ae(27497)})(i,e.precondition)),n}function lR(i,e){return i&&i.length>0?(Xe(e!==void 0,14353),i.map((n=>(function(o,c){let d=o.updateTime?qi(o.updateTime):qi(c);return d.isEqual(xe.min())&&(d=qi(c)),new F2(d,o.transformResults||[])})(n,e)))):[]}function cR(i,e){return{documents:[FT(i,e.path)]}}function uR(i,e){const n={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),n.structuredQuery.from=[{collectionId:a.lastSegment()}]),n.parent=FT(i,o);const c=(function(y){if(y.length!==0)return $T(di.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((T=>(function(A){return{field:To(A.field),direction:fR(A.dir)}})(T)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const g=Np(i,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function hR(i){let e=aR(i.parent);const n=i.structuredQuery,a=n.from?n.from.length:0;let o=null;if(a>0){Xe(a===1,65062);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let c=[];n.where&&(c=(function(S){const A=GT(S);return A instanceof di&&TT(A)?A.getFilters():[A]})(n.where));let d=[];n.orderBy&&(d=(function(S){return S.map((A=>(function(L){return new Ec(So(L.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(A)))})(n.orderBy));let g=null;n.limit&&(g=(function(S){let A;return A=typeof S=="object"?S.value:S,_d(A)?null:A})(n.limit));let p=null;n.startAt&&(p=(function(S){const A=!!S.before,C=S.values||[];return new nd(C,A)})(n.startAt));let y=null;return n.endAt&&(y=(function(S){const A=!S.before,C=S.values||[];return new nd(C,A)})(n.endAt)),I2(e,o,d,c,g,"F",p,y)}function dR(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function GT(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const a=So(n.unaryFilter.field);return Ot.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=So(n.unaryFilter.field);return Ot.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=So(n.unaryFilter.field);return Ot.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=So(n.unaryFilter.field);return Ot.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(i):i.fieldFilter!==void 0?(function(n){return Ot.create(So(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return di.create(n.compositeFilter.filters.map((a=>GT(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(n.compositeFilter.op))})(i):Ae(30097,{filter:i})}function fR(i){return eR[i]}function mR(i){return tR[i]}function pR(i){return nR[i]}function To(i){return{fieldPath:i.canonicalString()}}function So(i){return Wt.fromServerFormat(i.fieldPath)}function $T(i){return i instanceof Ot?(function(n){if(n.op==="=="){if(uE(n.value))return{unaryFilter:{field:To(n.field),op:"IS_NAN"}};if(cE(n.value))return{unaryFilter:{field:To(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(uE(n.value))return{unaryFilter:{field:To(n.field),op:"IS_NOT_NAN"}};if(cE(n.value))return{unaryFilter:{field:To(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:To(n.field),op:mR(n.op),value:n.value}}})(i):i instanceof di?(function(n){const a=n.getFilters().map((o=>$T(o)));return a.length===1?a[0]:{compositeFilter:{op:pR(n.op),filters:a}}})(i):Ae(54877,{filter:i})}function gR(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function QT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n,a,o,c=xe.min(),d=xe.min(),g=Zt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(e){return new ma(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ma(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ma(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ma(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.yt=e}}function vR(i){const e=hR({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?id(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(){this.Cn=new ER}addToCollectionParentIndex(e,n){return this.Cn.add(n),ie.resolve()}getCollectionParents(e,n){return ie.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ie.resolve()}deleteFieldIndex(e,n){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,n){return ie.resolve()}getDocumentsMatchingTarget(e,n){return ie.resolve(null)}getIndexType(e,n){return ie.resolve(0)}getFieldIndexes(e,n){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,n){return ie.resolve(Ea.min())}getMinOffsetFromCollectionGroup(e,n){return ie.resolve(Ea.min())}updateCollectionGroup(e,n,a){return ie.resolve()}updateIndexEntries(e,n){return ie.resolve()}}class ER{constructor(){this.index={}}add(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n]||new Ut(rt.comparator),c=!o.has(a);return this.index[n]=o.add(a),c}has(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n];return o&&o.has(a)}getEntries(e){return(this.index[e]||new Ut(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},KT=41943040;class yn{static withCacheSize(e){return new yn(e,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yn.DEFAULT_COLLECTION_PERCENTILE=10,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yn.DEFAULT=new yn(KT,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yn.DISABLED=new yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Vo(0)}static cr(){return new Vo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="LruGarbageCollector",TR=1048576;function xE([i,e],[n,a]){const o=Ue(i,n);return o===0?Ue(e,a):o}class SR{constructor(e){this.Ir=e,this.buffer=new Ut(xE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const a=this.buffer.last();xE(n,a)<0&&(this.buffer=this.buffer.delete(a).add(n))}}get maxValue(){return this.buffer.last()[0]}}class bR{constructor(e,n,a){this.garbageCollector=e,this.asyncQueue=n,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(wE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Bo(n)?de(wE,"Ignoring IndexedDB error during garbage collection: ",n):await qo(n)}await this.Vr(3e5)}))}}class AR{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((a=>Math.floor(n/100*a)))}nthSequenceNumber(e,n){if(n===0)return ie.resolve(vd.ce);const a=new SR(n);return this.mr.forEachTarget(e,(o=>a.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>a.Ar(o))))).next((()=>a.maxValue))}removeTargets(e,n,a){return this.mr.removeTargets(e,n,a)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(AE)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),AE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let a,o,c,d,g,p,y;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,d=Date.now(),this.nthSequenceNumber(e,o)))).next((S=>(a=S,g=Date.now(),this.removeTargets(e,a,n)))).next((S=>(c=S,p=Date.now(),this.removeOrphanedDocuments(e,a)))).next((S=>(y=Date.now(),_o()<=Le.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${o} in `+(g-d)+`ms
	Removed ${c} targets in `+(p-g)+`ms
	Removed ${S} documents in `+(y-p)+`ms
Total Duration: ${y-T}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:S}))))}}function wR(i,e){return new AR(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(){this.changes=new br((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const a=this.changes.get(n);return a!==void 0?ie.resolve(a):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n,a,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,n){let a=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(a!==null&&dc(a.mutation,o,In.empty(),me.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.getLocalViewOfDocuments(e,a,ze()).next((()=>a))))}getLocalViewOfDocuments(e,n,a=ze()){const o=ur();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,a).next((c=>{let d=sc();return c.forEach(((g,p)=>{d=d.insert(g,p.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const a=ur();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,ze())))}populateOverlays(e,n,a){const o=[];return a.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((d,g)=>{n.set(d,g)}))}))}computeViews(e,n,a,o){let c=As();const d=hc(),g=(function(){return hc()})();return n.forEach(((p,y)=>{const T=a.get(y.key);o.has(y.key)&&(T===void 0||T.mutation instanceof Ra)?c=c.insert(y.key,y):T!==void 0?(d.set(y.key,T.mutation.getFieldMask()),dc(T.mutation,y,T.mutation.getFieldMask(),me.now())):d.set(y.key,In.empty())})),this.recalculateAndSaveOverlays(e,c).next((p=>(p.forEach(((y,T)=>d.set(y,T))),n.forEach(((y,T)=>g.set(y,new CR(T,d.get(y)??null)))),g)))}recalculateAndSaveOverlays(e,n){const a=hc();let o=new mt(((d,g)=>d-g)),c=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const g of d)g.keys().forEach((p=>{const y=n.get(p);if(y===null)return;let T=a.get(p)||In.empty();T=g.applyToLocalView(y,T),a.set(p,T);const S=(o.get(g.batchId)||ze()).add(p);o=o.insert(g.batchId,S)}))})).next((()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),y=p.key,T=p.value,S=IT();T.forEach((A=>{if(!c.has(A)){const C=kT(n.get(A),a.get(A));C!==null&&S.set(A,C),c=c.add(A)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,S))}return ie.waitFor(d)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,n,a,o){return(function(d){return Te.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,a,o):this.getDocumentsMatchingCollectionQuery(e,n,a,o)}getNextDocuments(e,n,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,a,o).next((c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,a.largestBatchId,o-c.size):ie.resolve(ur());let g=gc,p=c;return d.next((y=>ie.forEach(y,((T,S)=>(g<S.largestBatchId&&(g=S.largestBatchId),c.get(T)?ie.resolve():this.remoteDocumentCache.getEntry(e,T).next((A=>{p=p.insert(T,A)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,p,y,ze()))).next((T=>({batchId:g,changes:RT(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next((a=>{let o=sc();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,a,o){const c=n.collectionGroup;let d=sc();return this.indexManager.getCollectionParents(e,c).next((g=>ie.forEach(g,(p=>{const y=(function(S,A){return new Fo(A,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(n,p.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,a,o).next((T=>{T.forEach(((S,A)=>{d=d.insert(S,A)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,a,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,a.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,a,c,o)))).next((d=>{c.forEach(((p,y)=>{const T=y.getKey();d.get(T)===null&&(d=d.insert(T,sn.newInvalidDocument(T)))}));let g=sc();return d.forEach(((p,y)=>{const T=c.get(p);T!==void 0&&dc(T.mutation,y,In.empty(),me.now()),Sd(n,y)&&(g=g.insert(p,y))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ie.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:qi(o.createTime)}})(n)),ie.resolve()}getNamedQuery(e,n){return ie.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:vR(o.bundledQuery),readTime:qi(o.readTime)}})(n)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(){this.overlays=new mt(Te.comparator),this.qr=new Map}getOverlay(e,n){return ie.resolve(this.overlays.get(n))}getOverlays(e,n){const a=ur();return ie.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&a.set(o,c)})))).next((()=>a))}saveOverlays(e,n,a){return a.forEach(((o,c)=>{this.St(e,n,c)})),ie.resolve()}removeOverlaysForBatchId(e,n,a){const o=this.qr.get(a);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(a)),ie.resolve()}getOverlaysForCollection(e,n,a){const o=ur(),c=n.length+1,d=new Te(n.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const p=g.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&p.largestBatchId>a&&o.set(p.getKey(),p)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,n,a,o){let c=new mt(((y,T)=>y-T));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>a){let T=c.get(y.largestBatchId);T===null&&(T=ur(),c=c.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const g=ur(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,T)=>g.set(y,T))),!(g.size()>=o)););return ie.resolve(g)}St(e,n,a){const o=this.overlays.get(a.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(a.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new K2(n,a));let c=this.qr.get(n);c===void 0&&(c=ze(),this.qr.set(n,c)),this.qr.set(n,c.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(){this.Qr=new Ut(Ht.$r),this.Ur=new Ut(Ht.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const a=new Ht(e,n);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,n){e.forEach((a=>this.addReference(a,n)))}removeReference(e,n){this.Gr(new Ht(e,n))}zr(e,n){e.forEach((a=>this.removeReference(a,n)))}jr(e){const n=new Te(new rt([])),a=new Ht(n,e),o=new Ht(n,e+1),c=[];return this.Ur.forEachInRange([a,o],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Te(new rt([])),a=new Ht(n,e),o=new Ht(n,e+1);let c=ze();return this.Ur.forEachInRange([a,o],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new Ht(e,0),a=this.Qr.firstAfterOrEqual(n);return a!==null&&e.isEqual(a.key)}}class Ht{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Te.comparator(e.key,n.key)||Ue(e.Yr,n.Yr)}static Kr(e,n){return Ue(e.Yr,n.Yr)||Te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ut(Ht.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,a,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new Q2(c,n,a,o);this.mutationQueue.push(d);for(const g of o)this.Zr=this.Zr.add(new Ht(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ie.resolve(d)}lookupMutationBatch(e,n){return ie.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const a=n+1,o=this.ei(a),c=o<0?0:o;return ie.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?ng:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const a=new Ht(n,0),o=new Ht(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([a,o],(d=>{const g=this.Xr(d.Yr);c.push(g)})),ie.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new Ut(Ue);return n.forEach((o=>{const c=new Ht(o,0),d=new Ht(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(g=>{a=a.add(g.Yr)}))})),ie.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,o=a.length+1;let c=a;Te.isDocumentKey(c)||(c=c.child(""));const d=new Ht(new Te(c),0);let g=new Ut(Ue);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!a.isPrefixOf(y)&&(y.length===o&&(g=g.add(p.Yr)),!0)}),d),ie.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((a=>{const o=this.Xr(a);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Xe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return ie.forEach(n.mutations,(o=>{const c=new Ht(o.key,n.batchId);return a=a.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=a}))}ir(e){}containsKey(e,n){const a=new Ht(n,0),o=this.Zr.firstAfterOrEqual(a);return ie.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.ri=e,this.docs=(function(){return new mt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const a=n.key,o=this.docs.get(a),c=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(a,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const a=this.docs.get(n);return ie.resolve(a?a.document.mutableCopy():sn.newInvalidDocument(n))}getEntries(e,n){let a=As();return n.forEach((o=>{const c=this.docs.get(o);a=a.insert(o,c?c.document.mutableCopy():sn.newInvalidDocument(o))})),ie.resolve(a)}getDocumentsMatchingQuery(e,n,a,o){let c=As();const d=n.path,g=new Te(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:y,value:{document:T}}=p.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||l2(o2(T),a)<=0||(o.has(T.key)||Sd(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return ie.resolve(c)}getAllFromCollectionGroup(e,n,a,o){Ae(9500)}ii(e,n){return ie.forEach(this.docs,(a=>n(a)))}newChangeBuffer(e){return new MR(this)}getSize(e){return ie.resolve(this.size)}}class MR extends xR{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(a)})),ie.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e){this.persistence=e,this.si=new br((n=>ag(n)),rg),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.oi=0,this._i=new dg,this.targetCount=0,this.ai=Vo.ur()}forEachTarget(e,n){return this.si.forEach(((a,o)=>n(o))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,a){return a&&(this.lastRemoteSnapshotVersion=a),n>this.oi&&(this.oi=n),ie.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Vo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ie.resolve()}updateTargetData(e,n){return this.Pr(n),ie.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,n,a){let o=0;const c=[];return this.si.forEach(((d,g)=>{g.sequenceNumber<=n&&a.get(g.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),ie.waitFor(c).next((()=>o))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,n){const a=this.si.get(n)||null;return ie.resolve(a)}addMatchingKeys(e,n,a){return this._i.Wr(n,a),ie.resolve()}removeMatchingKeys(e,n,a){this._i.zr(n,a);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((d=>{c.push(o.markPotentiallyOrphaned(e,d))})),ie.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ie.resolve()}getMatchingKeysForTargetId(e,n){const a=this._i.Hr(n);return ie.resolve(a)}containsKey(e,n){return ie.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,n){this.ui={},this.overlays={},this.ci=new vd(0),this.li=!1,this.li=!0,this.hi=new DR,this.referenceDelegate=e(this),this.Pi=new VR(this),this.indexManager=new _R,this.remoteDocumentCache=(function(o){return new OR(o)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new yR(n),this.Ii=new RR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new IR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let a=this.ui[e.toKey()];return a||(a=new jR(n,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,a){de("MemoryPersistence","Starting transaction:",e);const o=new kR(this.ci.next());return this.referenceDelegate.Ei(),a(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return ie.or(Object.values(this.ui).map((a=>()=>a.containsKey(e,n))))}}class kR extends u2{constructor(e){super(),this.currentSequenceNumber=e}}class fg{constructor(e){this.persistence=e,this.Ri=new dg,this.Vi=null}static mi(e){return new fg(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,n,a){return this.Ri.addReference(a,n),this.fi.delete(a.toString()),ie.resolve()}removeReference(e,n,a){return this.Ri.removeReference(a,n),this.fi.add(a.toString()),ie.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ie.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>a.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(a=>{const o=Te.fromPath(a);return this.gi(e,o).next((c=>{c||n.removeEntry(o,xe.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((a=>{a?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ie.or([()=>ie.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class od{constructor(e,n){this.persistence=e,this.pi=new br((a=>f2(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=wR(this,n)}static mi(e,n){return new od(e,n)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>n.next((o=>a+o))))}wr(e){let n=0;return this.pr(e,(a=>{n++})).next((()=>n))}pr(e,n){return ie.forEach(this.pi,((a,o)=>this.br(e,a,o).next((c=>c?ie.resolve():n(o)))))}removeTargets(e,n,a){return this.persistence.getTargetCache().removeTargets(e,n,a)}removeOrphanedDocuments(e,n){let a=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((g=>{g||(a++,c.removeEntry(d,xe.min()))})))).next((()=>c.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ie.resolve()}removeTarget(e,n){const a=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,n,a){return this.pi.set(a,e.currentSequenceNumber),ie.resolve()}removeReference(e,n,a){return this.pi.set(a,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ie.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ph(e.data.value)),n}br(e,n,a){return ie.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ie.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,n,a,o){this.targetId=e,this.fromCache=n,this.Es=a,this.ds=o}static As(e,n){let a=ze(),o=ze();for(const c of n.docChanges)switch(c.type){case 0:a=a.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new mg(e,n.fromCache,a,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return fw()?8:h2(rn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,a,o){const c={result:null};return this.ys(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,n,o,a).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new PR;return this.Ss(e,n,d).next((g=>{if(c.result=g,this.Vs)return this.bs(e,n,d,g.size)}))})).next((()=>c.result))}bs(e,n,a,o){return a.documentReadCount<this.fs?(_o()<=Le.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Eo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(_o()<=Le.DEBUG&&de("QueryEngine","Query:",Eo(n),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.gs*o?(_o()<=Le.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Eo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zi(n))):ie.resolve())}ys(e,n){if(mE(n))return ie.resolve(null);let a=zi(n);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=id(n,null,"F"),a=zi(n)),this.indexManager.getDocumentsMatchingTarget(e,a).next((c=>{const d=ze(...c);return this.ps.getDocuments(e,d).next((g=>this.indexManager.getMinOffset(e,a).next((p=>{const y=this.Ds(n,g);return this.Cs(n,y,d,p.readTime)?this.ys(e,id(n,null,"F")):this.vs(e,y,n,p)}))))})))))}ws(e,n,a,o){return mE(n)||o.isEqual(xe.min())?ie.resolve(null):this.ps.getDocuments(e,a).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,a,o)?ie.resolve(null):(_o()<=Le.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Eo(n)),this.vs(e,d,n,r2(o,gc)).next((g=>g)))}))}Ds(e,n){let a=new Ut(CT(e));return n.forEach(((o,c)=>{Sd(e,c)&&(a=a.add(c))})),a}Cs(e,n,a,o){if(e.limit===null)return!1;if(a.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,a){return _o()<=Le.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Eo(n)),this.ps.getDocumentsMatchingQuery(e,n,Ea.min(),a)}vs(e,n,a,o){return this.ps.getDocumentsMatchingQuery(e,a,o).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="LocalStore",UR=3e8;class zR{constructor(e,n,a,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new mt(Ue),this.xs=new br((c=>ag(c)),rg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function qR(i,e,n,a){return new zR(i,e,n,a)}async function XT(i,e){const n=Ne(i);return await n.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return n.mutationQueue.getAllMutationBatches(a).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(a)))).next((c=>{const d=[],g=[];let p=ze();for(const y of o){d.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}for(const y of c){g.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}return n.localDocuments.getDocuments(a,p).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:g})))}))}))}function BR(i,e){const n=Ne(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,p,y,T){const S=y.batch,A=S.keys();let C=ie.resolve();return A.forEach((L=>{C=C.next((()=>T.getEntry(p,L))).next((G=>{const F=y.docVersions.get(L);Xe(F!==null,48541),G.version.compareTo(F)<0&&(S.applyToRemoteDocument(G,y),G.isValidDocument()&&(G.setReadTime(y.commitVersion),T.addEntry(G)))}))})),C.next((()=>g.mutationQueue.removeMutationBatch(p,S)))})(n,a,e,c).next((()=>c.apply(a))).next((()=>n.mutationQueue.performConsistencyCheck(a))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(g){let p=ze();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(p=p.add(g.batch.mutations[y].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(a,o)))}))}function JT(i){const e=Ne(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function FR(i,e){const n=Ne(i),a=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];e.targetChanges.forEach(((T,S)=>{const A=o.get(S);if(!A)return;g.push(n.Pi.removeMatchingKeys(c,T.removedDocuments,S).next((()=>n.Pi.addMatchingKeys(c,T.addedDocuments,S))));let C=A.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(S)!==null?C=C.withResumeToken(Zt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):T.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(T.resumeToken,a)),o=o.insert(S,C),(function(G,F,te){return G.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=UR?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(A,C,T)&&g.push(n.Pi.updateTargetData(c,C))}));let p=As(),y=ze();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),g.push(HR(c,d,e.documentUpdates).next((T=>{p=T.ks,y=T.qs}))),!a.isEqual(xe.min())){const T=n.Pi.getLastRemoteSnapshotVersion(c).next((S=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,a)));g.push(T)}return ie.waitFor(g).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,p,y))).next((()=>p))})).then((c=>(n.Ms=o,c)))}function HR(i,e,n){let a=ze(),o=ze();return n.forEach((c=>a=a.add(c))),e.getEntries(i,a).next((c=>{let d=As();return n.forEach(((g,p)=>{const y=c.get(g);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(g)),p.isNoDocument()&&p.version.isEqual(xe.min())?(e.removeEntry(g,p.readTime),d=d.insert(g,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),d=d.insert(g,p)):de(pg,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",p.version)})),{ks:d,qs:o}}))}function GR(i,e){const n=Ne(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=ng),n.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function $R(i,e){const n=Ne(i);return n.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return n.Pi.getTargetData(a,e).next((c=>c?(o=c,ie.resolve(o)):n.Pi.allocateTargetId(a).next((d=>(o=new ma(e,d,"TargetPurposeListen",a.currentSequenceNumber),n.Pi.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=n.Ms.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(a.targetId,a),n.xs.set(e,a.targetId)),a}))}async function jp(i,e,n){const a=Ne(i),o=a.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await a.persistence.runTransaction("Release target",c,(d=>a.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Bo(d))throw d;de(pg,`Failed to update sequence numbers for target ${e}: ${d}`)}a.Ms=a.Ms.remove(e),a.xs.delete(o.target)}function CE(i,e,n){const a=Ne(i);let o=xe.min(),c=ze();return a.persistence.runTransaction("Execute query","readwrite",(d=>(function(p,y,T){const S=Ne(p),A=S.xs.get(T);return A!==void 0?ie.resolve(S.Ms.get(A)):S.Pi.getTargetData(y,T)})(a,d,zi(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(d,g.targetId).next((p=>{c=p}))})).next((()=>a.Fs.getDocumentsMatchingQuery(d,e,n?o:xe.min(),n?c:ze()))).next((g=>(QR(a,j2(e),g),{documents:g,Qs:c})))))}function QR(i,e,n){let a=i.Os.get(e)||xe.min();n.forEach(((o,c)=>{c.readTime.compareTo(a)>0&&(a=c.readTime)})),i.Os.set(e,a)}class NE{constructor(){this.activeTargetIds=L2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KR{constructor(){this.Mo=new NE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,a){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,a){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new NE,Promise.resolve()}handleUserChange(e,n,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE="ConnectivityMonitor";class IE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(RE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(RE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ch=null;function Op(){return Ch===null?Ch=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ch++,"0x"+Ch.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip="RestConnection",XR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${a}/databases/${o}`,this.Wo=this.databaseId.database===ed?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Go(e,n,a,o,c){const d=Op(),g=this.zo(e,n.toUriEncodedString());de(ip,`Sending RPC '${e}' ${d}:`,g,a);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,c);const{host:y}=new URL(g),T=Po(y);return this.Jo(e,g,p,a,T).then((S=>(de(ip,`Received RPC '${e}' ${d}: `,S),S)),(S=>{throw Do(ip,`RPC '${e}' ${d} failed with error: `,S,"url: ",g,"request:",a),S}))}Ho(e,n,a,o,c,d){return this.Go(e,n,a,o,c)}jo(e,n,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+zo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),a&&a.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const a=XR[e];return`${this.Uo}/v1/${n}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class ZR extends JR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,a,o,c){const d=Op();return new Promise(((g,p)=>{const y=new eT;y.setWithCredentials(!0),y.listenOnce(tT.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case kh.NO_ERROR:const S=y.getResponseJson();de(tn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(S)),g(S);break;case kh.TIMEOUT:de(tn,`RPC '${e}' ${d} timed out`),p(new ue(W.DEADLINE_EXCEEDED,"Request time out"));break;case kh.HTTP_ERROR:const A=y.getStatus();if(de(tn,`RPC '${e}' ${d} failed with status:`,A,"response text:",y.getResponseText()),A>0){let C=y.getResponseJson();Array.isArray(C)&&(C=C[0]);const L=C?.error;if(L&&L.status&&L.message){const G=(function(te){const ne=te.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(ne)>=0?ne:W.UNKNOWN})(L.status);p(new ue(G,L.message))}else p(new ue(W.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new ue(W.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{de(tn,`RPC '${e}' ${d} completed.`)}}));const T=JSON.stringify(o);de(tn,`RPC '${e}' ${d} sending request:`,o),y.send(n,"POST",T,a,15)}))}T_(e,n,a){const o=Op(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=sT(),g=iT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,a),p.encodeInitMessageHeaders=!0;const T=c.join("");de(tn,`Creating RPC '${e}' stream ${o}: ${T}`,p);const S=d.createWebChannel(T,p);this.I_(S);let A=!1,C=!1;const L=new WR({Yo:F=>{C?de(tn,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(A||(de(tn,`Opening RPC '${e}' stream ${o} transport.`),S.open(),A=!0),de(tn,`RPC '${e}' stream ${o} sending:`,F),S.send(F))},Zo:()=>S.close()}),G=(F,te,ne)=>{F.listen(te,(Q=>{try{ne(Q)}catch(le){setTimeout((()=>{throw le}),0)}}))};return G(S,ic.EventType.OPEN,(()=>{C||(de(tn,`RPC '${e}' stream ${o} transport opened.`),L.o_())})),G(S,ic.EventType.CLOSE,(()=>{C||(C=!0,de(tn,`RPC '${e}' stream ${o} transport closed`),L.a_(),this.E_(S))})),G(S,ic.EventType.ERROR,(F=>{C||(C=!0,Do(tn,`RPC '${e}' stream ${o} transport errored. Name:`,F.name,"Message:",F.message),L.a_(new ue(W.UNAVAILABLE,"The operation could not be completed")))})),G(S,ic.EventType.MESSAGE,(F=>{if(!C){const te=F.data[0];Xe(!!te,16349);const ne=te,Q=ne?.error||ne[0]?.error;if(Q){de(tn,`RPC '${e}' stream ${o} received error:`,Q);const le=Q.status;let ye=(function(x){const R=jt[x];if(R!==void 0)return LT(R)})(le),se=Q.message;ye===void 0&&(ye=W.INTERNAL,se="Unknown error status: "+le+" with message "+Q.message),C=!0,L.a_(new ue(ye,se)),S.close()}else de(tn,`RPC '${e}' stream ${o} received:`,te),L.u_(te)}})),G(g,nT.STAT_EVENT,(F=>{F.stat===Tp.PROXY?de(tn,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===Tp.NOPROXY&&de(tn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{L.__()}),0),L}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function sp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(i){return new iR(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,n,a=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=a,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-a);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="PersistentStream";class ZT{constructor(e,n,a,o,c,d,g,p){this.Mi=e,this.S_=a,this.b_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new WT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(bs(n.toString()),bs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===n&&this.G_(a,o)}),(a=>{e((()=>{const o=new ue(W.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,n){const a=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(DE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(de(DE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class eI extends ZT{constructor(e,n,a,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,a,o,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=rR(this.serializer,e),a=(function(c){if(!("targetChange"in c))return xe.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?xe.min():d.readTime?qi(d.readTime):xe.min()})(e);return this.listener.H_(n,a)}Y_(e){const n={};n.database=Dp(this.serializer),n.addTarget=(function(c,d){let g;const p=d.target;if(g=xp(p)?{documents:cR(c,p)}:{query:uR(c,p).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=qT(c,d.resumeToken);const y=Np(c,d.expectedCount);y!==null&&(g.expectedCount=y)}else if(d.snapshotVersion.compareTo(xe.min())>0){g.readTime=rd(c,d.snapshotVersion.toTimestamp());const y=Np(c,d.expectedCount);y!==null&&(g.expectedCount=y)}return g})(this.serializer,e);const a=dR(this.serializer,e);a&&(n.labels=a),this.q_(n)}Z_(e){const n={};n.database=Dp(this.serializer),n.removeTarget=e,this.q_(n)}}class tI extends ZT{constructor(e,n,a,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,a,o,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=lR(e.writeResults,e.commitTime),a=qi(e.commitTime);return this.listener.na(a,n)}ra(){const e={};e.database=Dp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((a=>oR(this.serializer,a)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{}class iI extends nI{constructor(e,n,a,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ue(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,Rp(n,a),o,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ue(W.UNKNOWN,c.toString())}))}Ho(e,n,a,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.Ho(e,Rp(n,a),o,d,g,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ue(W.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class sI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(bs(n),this.aa=!1):de("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="RemoteStore";class aI{constructor(e,n,a,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{a.enqueueAndForget((async()=>{Ar(this)&&(de(Er,"Restarting streams for network reachability change."),await(async function(p){const y=Ne(p);y.Ea.add(4),await Vc(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Nd(y)})(this))}))})),this.Ra=new sI(a,o)}}async function Nd(i){if(Ar(i))for(const e of i.da)await e(!0)}async function Vc(i){for(const e of i.da)await e(!1)}function eS(i,e){const n=Ne(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),_g(n)?vg(n):Ho(n).O_()&&yg(n,e))}function gg(i,e){const n=Ne(i),a=Ho(n);n.Ia.delete(e),a.O_()&&tS(n,e),n.Ia.size===0&&(a.O_()?a.L_():Ar(n)&&n.Ra.set("Unknown"))}function yg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ho(i).Y_(e)}function tS(i,e){i.Va.Ue(e),Ho(i).Z_(e)}function vg(i){i.Va=new Z2({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Ho(i).start(),i.Ra.ua()}function _g(i){return Ar(i)&&!Ho(i).x_()&&i.Ia.size>0}function Ar(i){return Ne(i).Ea.size===0}function nS(i){i.Va=void 0}async function rI(i){i.Ra.set("Online")}async function oI(i){i.Ia.forEach(((e,n)=>{yg(i,e)}))}async function lI(i,e){nS(i),_g(i)?(i.Ra.ha(e),vg(i)):i.Ra.set("Unknown")}async function cI(i,e,n){if(i.Ra.set("Online"),e instanceof zT&&e.state===2&&e.cause)try{await(async function(o,c){const d=c.cause;for(const g of c.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,d),o.Ia.delete(g),o.Va.removeTarget(g))})(i,e)}catch(a){de(Er,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await ld(i,a)}else if(e instanceof zh?i.Va.Ze(e):e instanceof UT?i.Va.st(e):i.Va.tt(e),!n.isEqual(xe.min()))try{const a=await JT(i.localStore);n.compareTo(a)>=0&&await(function(c,d){const g=c.Va.Tt(d);return g.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const T=c.Ia.get(y);T&&c.Ia.set(y,T.withResumeToken(p.resumeToken,d))}})),g.targetMismatches.forEach(((p,y)=>{const T=c.Ia.get(p);if(!T)return;c.Ia.set(p,T.withResumeToken(Zt.EMPTY_BYTE_STRING,T.snapshotVersion)),tS(c,p);const S=new ma(T.target,p,y,T.sequenceNumber);yg(c,S)})),c.remoteSyncer.applyRemoteEvent(g)})(i,n)}catch(a){de(Er,"Failed to raise snapshot:",a),await ld(i,a)}}async function ld(i,e,n){if(!Bo(e))throw e;i.Ea.add(1),await Vc(i),i.Ra.set("Offline"),n||(n=()=>JT(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{de(Er,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await Nd(i)}))}function iS(i,e){return e().catch((n=>ld(i,n,e)))}async function Rd(i){const e=Ne(i),n=Aa(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ng;for(;uI(e);)try{const o=await GR(e.localStore,a);if(o===null){e.Ta.length===0&&n.L_();break}a=o.batchId,hI(e,o)}catch(o){await ld(e,o)}sS(e)&&aS(e)}function uI(i){return Ar(i)&&i.Ta.length<10}function hI(i,e){i.Ta.push(e);const n=Aa(i);n.O_()&&n.X_&&n.ea(e.mutations)}function sS(i){return Ar(i)&&!Aa(i).x_()&&i.Ta.length>0}function aS(i){Aa(i).start()}async function dI(i){Aa(i).ra()}async function fI(i){const e=Aa(i);for(const n of i.Ta)e.ea(n.mutations)}async function mI(i,e,n){const a=i.Ta.shift(),o=cg.from(a,e,n);await iS(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Rd(i)}async function pI(i,e){e&&Aa(i).X_&&await(async function(a,o){if((function(d){return X2(d)&&d!==W.ABORTED})(o.code)){const c=a.Ta.shift();Aa(a).B_(),await iS(a,(()=>a.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Rd(a)}})(i,e),sS(i)&&aS(i)}async function jE(i,e){const n=Ne(i);n.asyncQueue.verifyOperationInProgress(),de(Er,"RemoteStore received new credentials");const a=Ar(n);n.Ea.add(3),await Vc(n),a&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Nd(n)}async function gI(i,e){const n=Ne(i);e?(n.Ea.delete(2),await Nd(n)):e||(n.Ea.add(2),await Vc(n),n.Ra.set("Unknown"))}function Ho(i){return i.ma||(i.ma=(function(n,a,o){const c=Ne(n);return c.sa(),new eI(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:rI.bind(null,i),t_:oI.bind(null,i),r_:lI.bind(null,i),H_:cI.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),_g(i)?vg(i):i.Ra.set("Unknown")):(await i.ma.stop(),nS(i))}))),i.ma}function Aa(i){return i.fa||(i.fa=(function(n,a,o){const c=Ne(n);return c.sa(),new tI(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:dI.bind(null,i),r_:pI.bind(null,i),ta:fI.bind(null,i),na:mI.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Rd(i)):(await i.fa.stop(),i.Ta.length>0&&(de(Er,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,n,a,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=o,this.removalCallback=c,this.deferred=new vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,a,o,c){const d=Date.now()+a,g=new Eg(e,n,d,o,c);return g.start(a),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tg(i,e){if(bs("AsyncQueue",`${e}: ${i}`),Bo(i))return new ue(W.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{static emptySet(e){return new Co(e.comparator)}constructor(e){this.comparator=e?(n,a)=>e(n,a)||Te.comparator(n.key,a.key):(n,a)=>Te.comparator(n.key,a.key),this.keyedMap=sc(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,a)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=a.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const a=new Co;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=n,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(){this.ga=new mt(Te.comparator)}track(e){const n=e.doc.key,a=this.ga.get(n);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(n,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(n,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(n):e.type===1&&a.type===2?this.ga=this.ga.insert(n,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,a)=>{e.push(a)})),e}}class ko{constructor(e,n,a,o,c,d,g,p,y){this.query=e,this.docs=n,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,a,o,c){const d=[];return n.forEach((g=>{d.push({type:0,doc:g})})),new ko(e,n,Co.emptySet(n),d,a,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Td(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,a=e.docChanges;if(n.length!==a.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==a[o].type||!n[o].doc.isEqual(a[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class vI{constructor(){this.queries=ME(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,a){const o=Ne(n),c=o.queries;o.queries=ME(),c.forEach(((d,g)=>{for(const p of g.Sa)p.onError(a)}))})(this,new ue(W.ABORTED,"Firestore shutting down"))}}function ME(){return new br((i=>xT(i)),Td)}async function rS(i,e){const n=Ne(i);let a=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(a=2):(c=new yI,a=e.Da()?0:1);try{switch(a){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const g=Tg(d,`Initialization of query '${Eo(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&Sg(n)}async function oS(i,e){const n=Ne(i),a=e.query;let o=3;const c=n.queries.get(a);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(a),n.onUnlisten(a,!0);case 1:return n.queries.delete(a),n.onUnlisten(a,!1);case 2:return n.onLastRemoteStoreUnlisten(a);default:return}}function _I(i,e){const n=Ne(i);let a=!1;for(const o of e){const c=o.query,d=n.queries.get(c);if(d){for(const g of d.Sa)g.Fa(o)&&(a=!0);d.wa=o}}a&&Sg(n)}function EI(i,e,n){const a=Ne(i),o=a.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);a.queries.delete(e)}function Sg(i){i.Ca.forEach((e=>{e.next()}))}var Mp,VE;(VE=Mp||(Mp={})).Ma="default",VE.Cache="cache";class lS{constructor(e,n,a){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new ko(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const a=n!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ko.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Mp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e){this.key=e}}class uS{constructor(e){this.key=e}}class TI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=CT(e),this.tu=new Co(this.eu)}get nu(){return this.Ya}ru(e,n){const a=n?n.iu:new OE,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=o,g=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,S)=>{const A=o.get(T),C=Sd(this.query,S)?S:null,L=!!A&&this.mutatedKeys.has(A.key),G=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let F=!1;A&&C?A.data.isEqual(C.data)?L!==G&&(a.track({type:3,doc:C}),F=!0):this.su(A,C)||(a.track({type:2,doc:C}),F=!0,(p&&this.eu(C,p)>0||y&&this.eu(C,y)<0)&&(g=!0)):!A&&C?(a.track({type:0,doc:C}),F=!0):A&&!C&&(a.track({type:1,doc:A}),F=!0,(p||y)&&(g=!0)),F&&(C?(d=d.add(C),c=G?c.add(T):c.delete(T)):(d=d.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),c=c.delete(T.key),a.track({type:1,doc:T})}return{tu:d,iu:a,Cs:g,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,a,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((T,S)=>(function(C,L){const G=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:F})}};return G(C)-G(L)})(T.type,S.type)||this.eu(T.doc,S.doc))),this.ou(a),o=o??!1;const g=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,d.length!==0||y?{snapshot:new ko(this.query,e.tu,c,d,e.mutatedKeys,p===0,y,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new OE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const n=[];return e.forEach((a=>{this.Xa.has(a)||n.push(new uS(a))})),this.Xa.forEach((a=>{e.has(a)||n.push(new cS(a))})),n}cu(e){this.Ya=e.Qs,this.Xa=ze();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ko.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const bg="SyncEngine";class SI{constructor(e,n,a){this.query=e,this.targetId=n,this.view=a}}class bI{constructor(e){this.key=e,this.hu=!1}}class AI{constructor(e,n,a,o,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=a,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new br((g=>xT(g)),Td),this.Iu=new Map,this.Eu=new Set,this.du=new mt(Te.comparator),this.Au=new Map,this.Ru=new dg,this.Vu={},this.mu=new Map,this.fu=Vo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function wI(i,e,n=!0){const a=gS(i);let o;const c=a.Tu.get(e);return c?(a.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await hS(a,e,n,!0),o}async function xI(i,e){const n=gS(i);await hS(n,e,!0,!1)}async function hS(i,e,n,a){const o=await $R(i.localStore,zi(e)),c=o.targetId,d=i.sharedClientState.addLocalQueryTarget(c,n);let g;return a&&(g=await CI(i,e,c,d==="current",o.resumeToken)),i.isPrimaryClient&&n&&eS(i.remoteStore,o),g}async function CI(i,e,n,a,o){i.pu=(S,A,C)=>(async function(G,F,te,ne){let Q=F.view.ru(te);Q.Cs&&(Q=await CE(G.localStore,F.query,!1).then((({documents:N})=>F.view.ru(N,Q))));const le=ne&&ne.targetChanges.get(F.targetId),ye=ne&&ne.targetMismatches.get(F.targetId)!=null,se=F.view.applyChanges(Q,G.isPrimaryClient,le,ye);return PE(G,F.targetId,se.au),se.snapshot})(i,S,A,C);const c=await CE(i.localStore,e,!0),d=new TI(e,c.Qs),g=d.ru(c.documents),p=Mc.createSynthesizedTargetChangeForCurrentChange(n,a&&i.onlineState!=="Offline",o),y=d.applyChanges(g,i.isPrimaryClient,p);PE(i,n,y.au);const T=new SI(e,n,d);return i.Tu.set(e,T),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),y.snapshot}async function NI(i,e,n){const a=Ne(i),o=a.Tu.get(e),c=a.Iu.get(o.targetId);if(c.length>1)return a.Iu.set(o.targetId,c.filter((d=>!Td(d,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await jp(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),n&&gg(a.remoteStore,o.targetId),Vp(a,o.targetId)})).catch(qo)):(Vp(a,o.targetId),await jp(a.localStore,o.targetId,!0))}async function RI(i,e){const n=Ne(i),a=n.Tu.get(e),o=n.Iu.get(a.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(a.targetId),gg(n.remoteStore,a.targetId))}async function II(i,e,n){const a=PI(i);try{const o=await(function(d,g){const p=Ne(d),y=me.now(),T=g.reduce(((C,L)=>C.add(L.key)),ze());let S,A;return p.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let L=As(),G=ze();return p.Ns.getEntries(C,T).next((F=>{L=F,L.forEach(((te,ne)=>{ne.isValidDocument()||(G=G.add(te))}))})).next((()=>p.localDocuments.getOverlayedDocuments(C,L))).next((F=>{S=F;const te=[];for(const ne of g){const Q=G2(ne,S.get(ne.key).overlayedDocument);Q!=null&&te.push(new Ra(ne.key,Q,vT(Q.value.mapValue),_n.exists(!0)))}return p.mutationQueue.addMutationBatch(C,y,te,g)})).next((F=>{A=F;const te=F.applyToLocalDocumentSet(S,G);return p.documentOverlayCache.saveOverlays(C,F.batchId,te)}))})).then((()=>({batchId:A.batchId,changes:RT(S)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(d,g,p){let y=d.Vu[d.currentUser.toKey()];y||(y=new mt(Ue)),y=y.insert(g,p),d.Vu[d.currentUser.toKey()]=y})(a,o.batchId,n),await kc(a,o.changes),await Rd(a.remoteStore)}catch(o){const c=Tg(o,"Failed to persist write");n.reject(c)}}async function dS(i,e){const n=Ne(i);try{const a=await FR(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const d=n.Au.get(c);d&&(Xe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Xe(d.hu,14607):o.removedDocuments.size>0&&(Xe(d.hu,42227),d.hu=!1))})),await kc(n,a,e)}catch(a){await qo(a)}}function kE(i,e,n){const a=Ne(i);if(a.isPrimaryClient&&n===0||!a.isPrimaryClient&&n===1){const o=[];a.Tu.forEach(((c,d)=>{const g=d.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(d,g){const p=Ne(d);p.onlineState=g;let y=!1;p.queries.forEach(((T,S)=>{for(const A of S.Sa)A.va(g)&&(y=!0)})),y&&Sg(p)})(a.eventManager,e),o.length&&a.Pu.H_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function DI(i,e,n){const a=Ne(i);a.sharedClientState.updateQueryState(e,"rejected",n);const o=a.Au.get(e),c=o&&o.key;if(c){let d=new mt(Te.comparator);d=d.insert(c,sn.newNoDocument(c,xe.min()));const g=ze().add(c),p=new xd(xe.min(),new Map,new mt(Ue),d,g);await dS(a,p),a.du=a.du.remove(c),a.Au.delete(e),Ag(a)}else await jp(a.localStore,e,!1).then((()=>Vp(a,e,n))).catch(qo)}async function jI(i,e){const n=Ne(i),a=e.batch.batchId;try{const o=await BR(n.localStore,e);mS(n,a,null),fS(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await kc(n,o)}catch(o){await qo(o)}}async function OI(i,e,n){const a=Ne(i);try{const o=await(function(d,g){const p=Ne(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let T;return p.mutationQueue.lookupMutationBatch(y,g).next((S=>(Xe(S!==null,37113),T=S.keys(),p.mutationQueue.removeMutationBatch(y,S)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,T,g))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T))).next((()=>p.localDocuments.getDocuments(y,T)))}))})(a.localStore,e);mS(a,e,n),fS(a,e),a.sharedClientState.updateMutationState(e,"rejected",n),await kc(a,o)}catch(o){await qo(o)}}function fS(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function mS(i,e,n){const a=Ne(i);let o=a.Vu[a.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),a.Vu[a.currentUser.toKey()]=o}}function Vp(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const a of i.Iu.get(e))i.Tu.delete(a),n&&i.Pu.yu(a,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((a=>{i.Ru.containsKey(a)||pS(i,a)}))}function pS(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(gg(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),Ag(i))}function PE(i,e,n){for(const a of n)a instanceof cS?(i.Ru.addReference(a.key,e),MI(i,a)):a instanceof uS?(de(bg,"Document no longer in limbo: "+a.key),i.Ru.removeReference(a.key,e),i.Ru.containsKey(a.key)||pS(i,a.key)):Ae(19791,{wu:a})}function MI(i,e){const n=e.key,a=n.path.canonicalString();i.du.get(n)||i.Eu.has(a)||(de(bg,"New document in limbo: "+n),i.Eu.add(a),Ag(i))}function Ag(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new Te(rt.fromString(e)),a=i.fu.next();i.Au.set(a,new bI(n)),i.du=i.du.insert(n,a),eS(i.remoteStore,new ma(zi(og(n.path)),a,"TargetPurposeLimboResolution",vd.ce))}}async function kc(i,e,n){const a=Ne(i),o=[],c=[],d=[];a.Tu.isEmpty()||(a.Tu.forEach(((g,p)=>{d.push(a.pu(p,e,n).then((y=>{if((y||n)&&a.isPrimaryClient){const T=y?!y.fromCache:n?.targetChanges.get(p.targetId)?.current;a.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(y){o.push(y);const T=mg.As(p.targetId,y);c.push(T)}})))})),await Promise.all(d),a.Pu.H_(o),await(async function(p,y){const T=Ne(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>ie.forEach(y,(A=>ie.forEach(A.Es,(C=>T.persistence.referenceDelegate.addReference(S,A.targetId,C))).next((()=>ie.forEach(A.ds,(C=>T.persistence.referenceDelegate.removeReference(S,A.targetId,C)))))))))}catch(S){if(!Bo(S))throw S;de(pg,"Failed to update sequence numbers: "+S)}for(const S of y){const A=S.targetId;if(!S.fromCache){const C=T.Ms.get(A),L=C.snapshotVersion,G=C.withLastLimboFreeSnapshotVersion(L);T.Ms=T.Ms.insert(A,G)}}})(a.localStore,c))}async function VI(i,e){const n=Ne(i);if(!n.currentUser.isEqual(e)){de(bg,"User change. New user:",e.toKey());const a=await XT(n.localStore,e);n.currentUser=e,(function(c,d){c.mu.forEach((g=>{g.forEach((p=>{p.reject(new ue(W.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await kc(n,a.Ls)}}function kI(i,e){const n=Ne(i),a=n.Au.get(e);if(a&&a.hu)return ze().add(a.key);{let o=ze();const c=n.Iu.get(e);if(!c)return o;for(const d of c){const g=n.Tu.get(d);o=o.unionWith(g.view.nu)}return o}}function gS(i){const e=Ne(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=dS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=DI.bind(null,e),e.Pu.H_=_I.bind(null,e.eventManager),e.Pu.yu=EI.bind(null,e.eventManager),e}function PI(i){const e=Ne(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=OI.bind(null,e),e}class cd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return qR(this.persistence,new LR,e.initialUser,this.serializer)}Cu(e){return new YT(fg.mi,this.serializer)}Du(e){return new KR}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cd.provider={build:()=>new cd};class LI extends cd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Xe(this.persistence.referenceDelegate instanceof od,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new bR(a,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?yn.withCacheSize(this.cacheSizeBytes):yn.DEFAULT;return new YT((a=>od.mi(a,n)),this.serializer)}}class kp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>kE(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=VI.bind(null,this.syncEngine),await gI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new vI})()}createDatastore(e){const n=Cd(e.databaseInfo.databaseId),a=(function(c){return new ZR(c)})(e.databaseInfo);return(function(c,d,g,p){return new iI(c,d,g,p)})(e.authCredentials,e.appCheckCredentials,a,n)}createRemoteStore(e){return(function(a,o,c,d,g){return new aI(a,o,c,d,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>kE(this.syncEngine,n,0)),(function(){return IE.v()?new IE:new YR})())}createSyncEngine(e,n){return(function(o,c,d,g,p,y,T){const S=new AI(o,c,d,g,p,y);return T&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const a=Ne(n);de(Er,"RemoteStore shutting down."),a.Ea.add(5),await Vc(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}kp.provider={build:()=>new kp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):bs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa="FirestoreClient";class UI{constructor(e,n,a,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=a,this.databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=tg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(a,(async d=>{de(wa,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(a,(d=>(de(wa,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const a=Tg(n,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function ap(i,e){i.asyncQueue.verifyOperationInProgress(),de(wa,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let a=n.initialUser;i.setCredentialChangeListener((async o=>{a.isEqual(o)||(await XT(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function LE(i,e){i.asyncQueue.verifyOperationInProgress();const n=await zI(i);de(wa,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((a=>jE(e.remoteStore,a))),i.setAppCheckTokenChangeListener(((a,o)=>jE(e.remoteStore,o))),i._onlineComponents=e}async function zI(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){de(wa,"Using user provided OfflineComponentProvider");try{await ap(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===W.FAILED_PRECONDITION||o.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Do("Error using user provided cache. Falling back to memory cache: "+n),await ap(i,new cd)}}else de(wa,"Using default OfflineComponentProvider"),await ap(i,new LI(void 0));return i._offlineComponents}async function vS(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(de(wa,"Using user provided OnlineComponentProvider"),await LE(i,i._uninitializedComponentsProvider._online)):(de(wa,"Using default OnlineComponentProvider"),await LE(i,new kp))),i._onlineComponents}function qI(i){return vS(i).then((e=>e.syncEngine))}async function _S(i){const e=await vS(i),n=e.eventManager;return n.onListen=wI.bind(null,e.syncEngine),n.onUnlisten=NI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=xI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=RI.bind(null,e.syncEngine),n}function BI(i,e,n={}){const a=new vs;return i.asyncQueue.enqueueAndForget((async()=>(function(c,d,g,p,y){const T=new yS({next:A=>{T.Nu(),d.enqueueAndForget((()=>oS(c,S)));const C=A.docs.has(g);!C&&A.fromCache?y.reject(new ue(W.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&A.fromCache&&p&&p.source==="server"?y.reject(new ue(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(A)},error:A=>y.reject(A)}),S=new lS(og(g.path),T,{includeMetadataChanges:!0,qa:!0});return rS(c,S)})(await _S(i),i.asyncQueue,e,n,a))),a.promise}function FI(i,e,n={}){const a=new vs;return i.asyncQueue.enqueueAndForget((async()=>(function(c,d,g,p,y){const T=new yS({next:A=>{T.Nu(),d.enqueueAndForget((()=>oS(c,S))),A.fromCache&&p.source==="server"?y.reject(new ue(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(A)},error:A=>y.reject(A)}),S=new lS(g,T,{includeMetadataChanges:!0,qa:!0});return rS(c,S)})(await _S(i),i.asyncQueue,e,n,a))),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="firestore.googleapis.com",zE=!0;class qE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TS,this.ssl=zE}else this.host=e.host,this.ssl=e.ssl??zE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=KT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TR)throw new ue(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}s2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ES(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ue(W.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ue(W.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ue(W.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Id{constructor(e,n,a,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new KN;switch(a.type){case"firstParty":return new WN(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new ue(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const a=UE.get(n);a&&(de("ComponentProvider","Removing Datastore"),UE.delete(n),a.terminate())})(this),Promise.resolve()}}function HI(i,e,n,a={}){i=hi(i,Id);const o=Po(e),c=i._getSettings(),d={...c,emulatorOptions:i._getEmulatorOptions()},g=`${e}:${n}`;o&&(h1(`https://${g}`),d1("Firestore",!0)),c.host!==TS&&c.host!==g&&Do("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:g,ssl:o,emulatorOptions:a};if(!pr(p,d)&&(i._setSettings(p),a.mockUserToken)){let y,T;if(typeof a.mockUserToken=="string")y=a.mockUserToken,T=nn.MOCK_USER;else{y=sw(a.mockUserToken,i._app?.options.projectId);const S=a.mockUserToken.sub||a.mockUserToken.user_id;if(!S)throw new ue(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new nn(S)}i._authCredentials=new YN(new rT(y,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Ia(this.firestore,e,this._query)}}class St{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _a(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new St(this.firestore,e,this._key)}toJSON(){return{type:St._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,a){if(jc(n,St._jsonSchema))return new St(e,a||null,new Te(rt.fromString(n.referencePath)))}}St._jsonSchemaVersion="firestore/documentReference/1.0",St._jsonSchema={type:Mt("string",St._jsonSchemaVersion),referencePath:Mt("string")};class _a extends Ia{constructor(e,n,a){super(e,n,og(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new Te(e))}withConverter(e){return new _a(this.firestore,e,this._path)}}function Ft(i,e,...n){if(i=Vt(i),oT("collection","path",e),i instanceof Id){const a=rt.fromString(e,...n);return eE(a),new _a(i,null,a)}{if(!(i instanceof St||i instanceof _a))throw new ue(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(rt.fromString(e,...n));return eE(a),new _a(i.firestore,null,a)}}function st(i,e,...n){if(i=Vt(i),arguments.length===1&&(e=tg.newId()),oT("doc","path",e),i instanceof Id){const a=rt.fromString(e,...n);return Z0(a),new St(i,null,new Te(a))}{if(!(i instanceof St||i instanceof _a))throw new ue(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(rt.fromString(e,...n));return Z0(a),new St(i.firestore,i instanceof _a?i.converter:null,new Te(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="AsyncQueue";class FE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new WT(this,"async_queue_retry"),this._c=()=>{const a=sp();a&&de(BE,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const n=sp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=sp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new vs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Bo(e))throw e;de(BE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,bs("INTERNAL UNHANDLED ERROR: ",HE(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=n,n}enqueueAfterDelay(e,n,a){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Eg.createAndSchedule(this,e,n,a,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Ae(47125,{Pc:HE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,a)=>n.targetTimeMs-a.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function HE(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class wr extends Id{constructor(e,n,a,o){super(e,n,a,o),this.type="firestore",this._queue=new FE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new FE(e),this._firestoreClient=void 0,await e}}}function GI(i,e){const n=typeof i=="object"?i:g1(),a=typeof i=="string"?i:ed,o=Gp(n,"firestore").getImmediate({identifier:a});if(!o._initialized){const c=nw("firestore");c&&HI(o,...c)}return o}function Dd(i){if(i._terminated)throw new ue(W.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||$I(i),i._firestoreClient}function $I(i){const e=i._freezeSettings(),n=(function(o,c,d,g){return new g2(o,c,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,ES(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new UI(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $n(Zt.fromBase64String(e))}catch(n){throw new ue(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $n(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(jc(e,$n._jsonSchema))return $n.fromBase64String(e.bytes)}}$n._jsonSchemaVersion="firestore/bytes/1.0",$n._jsonSchema={type:Mt("string",$n._jsonSchemaVersion),bytes:Mt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bi._jsonSchemaVersion}}static fromJSON(e){if(jc(e,Bi._jsonSchema))return new Bi(e.latitude,e.longitude)}}Bi._jsonSchemaVersion="firestore/geoPoint/1.0",Bi._jsonSchema={type:Mt("string",Bi._jsonSchemaVersion),latitude:Mt("number"),longitude:Mt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let c=0;c<a.length;++c)if(a[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Fi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(jc(e,Fi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Fi(e.vectorValues);throw new ue(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fi._jsonSchemaVersion="firestore/vectorValue/1.0",Fi._jsonSchema={type:Mt("string",Fi._jsonSchemaVersion),vectorValues:Mt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=/^__.*__$/;class KI{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return this.fieldMask!==null?new Ra(e,this.data,this.fieldMask,n,this.fieldTransforms):new Oc(e,this.data,n,this.fieldTransforms)}}class SS{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return new Ra(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function bS(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:i})}}class xg{constructor(e,n,a,o,c,d){this.settings=e,this.databaseId=n,this.serializer=a,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new xg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),a=this.Vc({path:n,fc:!1});return a.gc(e),a}yc(e){const n=this.path?.child(e),a=this.Vc({path:n,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ud(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(bS(this.Ac)&&QI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class YI{constructor(e,n,a){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=a||Cd(e)}Cc(e,n,a,o=!1){return new xg({Ac:e,methodName:n,Dc:a,path:Wt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jd(i){const e=i._freezeSettings(),n=Cd(i._databaseId);return new YI(i._databaseId,!!e.ignoreUndefinedProperties,n)}function AS(i,e,n,a,o,c={}){const d=i.Cc(c.merge||c.mergeFields?2:0,e,n,o);Cg("Data must be an object, but it was:",d,a);const g=CS(a,d);let p,y;if(c.merge)p=new In(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const T=[];for(const S of c.mergeFields){const A=Pp(e,S,n);if(!d.contains(A))throw new ue(W.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);RS(T,A)||T.push(A)}p=new In(T),y=d.fieldTransforms.filter((S=>p.covers(S.field)))}else p=null,y=d.fieldTransforms;return new KI(new vn(g),p,y)}class Od extends wg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Od}}function wS(i,e,n,a){const o=i.Cc(1,e,n);Cg("Data must be an object, but it was:",o,a);const c=[],d=vn.empty();Na(a,((p,y)=>{const T=Ng(e,p,n);y=Vt(y);const S=o.yc(T);if(y instanceof Od)c.push(T);else{const A=Lc(y,S);A!=null&&(c.push(T),d.set(T,A))}}));const g=new In(c);return new SS(d,g,o.fieldTransforms)}function xS(i,e,n,a,o,c){const d=i.Cc(1,e,n),g=[Pp(e,a,n)],p=[o];if(c.length%2!=0)throw new ue(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<c.length;A+=2)g.push(Pp(e,c[A])),p.push(c[A+1]);const y=[],T=vn.empty();for(let A=g.length-1;A>=0;--A)if(!RS(y,g[A])){const C=g[A];let L=p[A];L=Vt(L);const G=d.yc(C);if(L instanceof Od)y.push(C);else{const F=Lc(L,G);F!=null&&(y.push(C),T.set(C,F))}}const S=new In(y);return new SS(T,S,d.fieldTransforms)}function XI(i,e,n,a=!1){return Lc(n,i.Cc(a?4:3,e))}function Lc(i,e){if(NS(i=Vt(i)))return Cg("Unsupported field value:",e,i),CS(i,e);if(i instanceof wg)return(function(a,o){if(!bS(o.Ac))throw o.Sc(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${a._methodName}() is not currently supported inside arrays`);const c=a._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(a,o){const c=[];let d=0;for(const g of a){let p=Lc(g,o.wc(d));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),d++}return{arrayValue:{values:c}}})(i,e)}return(function(a,o){if((a=Vt(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return U2(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const c=me.fromDate(a);return{timestampValue:rd(o.serializer,c)}}if(a instanceof me){const c=new me(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:rd(o.serializer,c)}}if(a instanceof Bi)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof $n)return{bytesValue:qT(o.serializer,a._byteString)};if(a instanceof St){const c=o.databaseId,d=a.firestore._databaseId;if(!d.isEqual(c))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:hg(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof Fi)return(function(d,g){return{mapValue:{fields:{[gT]:{stringValue:yT},[td]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw g.Sc("VectorValues must only contain numeric values.");return lg(g.serializer,y)}))}}}}}})(a,o);throw o.Sc(`Unsupported field value: ${yd(a)}`)})(i,e)}function CS(i,e){const n={};return uT(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Na(i,((a,o)=>{const c=Lc(o,e.mc(a));c!=null&&(n[a]=c)})),{mapValue:{fields:n}}}function NS(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof me||i instanceof Bi||i instanceof $n||i instanceof St||i instanceof wg||i instanceof Fi)}function Cg(i,e,n){if(!NS(n)||!lT(n)){const a=yd(n);throw a==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+a)}}function Pp(i,e,n){if((e=Vt(e))instanceof Pc)return e._internalPath;if(typeof e=="string")return Ng(i,e);throw ud("Field path arguments must be of type string or ",i,!1,void 0,n)}const JI=new RegExp("[~\\*/\\[\\]]");function Ng(i,e,n){if(e.search(JI)>=0)throw ud(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Pc(...e.split("."))._internalPath}catch{throw ud(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function ud(i,e,n,a,o){const c=a&&!a.isEmpty(),d=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(c||d)&&(p+=" (found",c&&(p+=` in field ${a}`),d&&(p+=` in document ${o}`),p+=")"),new ue(W.INVALID_ARGUMENT,g+i+p)}function RS(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,n,a,o,c){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Md("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class WI extends IS{data(){return super.data()}}function Md(i,e){return typeof e=="string"?Ng(i,e):e instanceof Pc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ue(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rg{}class Ig extends Rg{}function ki(i,e,...n){let a=[];e instanceof Rg&&a.push(e),a=a.concat(n),(function(c){const d=c.filter((p=>p instanceof Dg)).length,g=c.filter((p=>p instanceof Vd)).length;if(d>1||d>0&&g>0)throw new ue(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const o of a)i=o._apply(i);return i}class Vd extends Ig{constructor(e,n,a){super(),this._field=e,this._op=n,this._value=a,this.type="where"}static _create(e,n,a){return new Vd(e,n,a)}_apply(e){const n=this._parse(e);return DS(e._query,n),new Ia(e.firestore,e.converter,Cp(e._query,n))}_parse(e){const n=jd(e.firestore);return(function(c,d,g,p,y,T,S){let A;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new ue(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){$E(S,T);const L=[];for(const G of S)L.push(GE(p,c,G));A={arrayValue:{values:L}}}else A=GE(p,c,S)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||$E(S,T),A=XI(g,d,S,T==="in"||T==="not-in");return Ot.create(y,T,A)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function hr(i,e,n){const a=e,o=Md("where",i);return Vd._create(o,a,n)}class Dg extends Rg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Dg(e,n)}_parse(e){const n=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return n.length===1?n[0]:di.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let d=o;const g=c.getFlattenedFilters();for(const p of g)DS(d,p),d=Cp(d,p)})(e._query,n),new Ia(e.firestore,e.converter,Cp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jg extends Ig{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new jg(e,n)}_apply(e){const n=(function(o,c,d){if(o.startAt!==null)throw new ue(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ue(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ec(c,d)})(e._query,this._field,this._direction);return new Ia(e.firestore,e.converter,(function(o,c){const d=o.explicitOrderBy.concat([c]);return new Fo(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function Pi(i,e="asc"){const n=e,a=Md("orderBy",i);return jg._create(a,n)}class Og extends Ig{constructor(e,n,a){super(),this.type=e,this._limit=n,this._limitType=a}static _create(e,n,a){return new Og(e,n,a)}_apply(e){return new Ia(e.firestore,e.converter,id(e._query,this._limit,this._limitType))}}function eD(i){return a2("limit",i),Og._create("limit",i,"F")}function GE(i,e,n){if(typeof(n=Vt(n))=="string"){if(n==="")throw new ue(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wT(e)&&n.indexOf("/")!==-1)throw new ue(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const a=e.path.child(rt.fromString(n));if(!Te.isDocumentKey(a))throw new ue(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return lE(i,new Te(a))}if(n instanceof St)return lE(i,n._key);throw new ue(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yd(n)}.`)}function $E(i,e){if(!Array.isArray(i)||i.length===0)throw new ue(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function DS(i,e){const n=(function(o,c){for(const d of o)for(const g of d.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ue(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class tD{convertValue(e,n="none"){switch(ba(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Sa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const a={};return Na(e,((o,c)=>{a[o]=this.convertValue(c,n)})),a}convertVectorValue(e){const n=e.fields?.[td].arrayValue?.values?.map((a=>Tt(a.doubleValue)));return new Fi(n)}convertGeoPoint(e){return new Bi(Tt(e.latitude),Tt(e.longitude))}convertArray(e,n){return(e.values||[]).map((a=>this.convertValue(a,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const a=Ed(e);return a==null?null:this.convertValue(a,n);case"estimate":return this.convertTimestamp(yc(e));default:return null}}convertTimestamp(e){const n=Ta(e);return new me(n.seconds,n.nanos)}convertDocumentKey(e,n){const a=rt.fromString(e);Xe(QT(a),9688,{name:e});const o=new vc(a.get(1),a.get(3)),c=new Te(a.popFirst(5));return o.isEqual(n)||bs(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(i,e,n){let a;return a=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,a}class rc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dr extends IS{constructor(e,n,a,o,c,d){super(e,n,a,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(Md("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=dr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}dr._jsonSchemaVersion="firestore/documentSnapshot/1.0",dr._jsonSchema={type:Mt("string",dr._jsonSchemaVersion),bundleSource:Mt("string","DocumentSnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class qh extends dr{data(e={}){return super.data(e)}}class No{constructor(e,n,a,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new rc(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((a=>{e.call(n,new qh(this._firestore,this._userDataWriter,a.key,a,new rc(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((g=>{const p=new qh(o._firestore,o._userDataWriter,g.doc.key,g.doc,new rc(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const p=new qh(o._firestore,o._userDataWriter,g.doc.key,g.doc,new rc(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,T=-1;return g.type!==0&&(y=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),T=d.indexOf(g.doc.key)),{type:nD(g.type),doc:p,oldIndex:y,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=No._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=tg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),a.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function nD(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(i){i=hi(i,St);const e=hi(i.firestore,wr);return BI(Dd(e),i._key).then((n=>iD(e,i,n)))}No._jsonSchemaVersion="firestore/querySnapshot/1.0",No._jsonSchema={type:Mt("string",No._jsonSchemaVersion),bundleSource:Mt("string","QuerySnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class OS extends tD{constructor(e){super(),this.firestore=e}convertBytes(e){return new $n(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,n)}}function li(i){i=hi(i,Ia);const e=hi(i.firestore,wr),n=Dd(e),a=new OS(e);return ZI(i._query),FI(n,i._query).then((o=>new No(e,a,i,o)))}function fr(i,e,n){i=hi(i,St);const a=hi(i.firestore,wr),o=jS(i.converter,e,n);return kd(a,[AS(jd(a),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,_n.none())])}function mr(i,e,n,...a){i=hi(i,St);const o=hi(i.firestore,wr),c=jd(o);let d;return d=typeof(e=Vt(e))=="string"||e instanceof Pc?xS(c,"updateDoc",i._key,e,n,a):wS(c,"updateDoc",i._key,e),kd(o,[d.toMutation(i._key,_n.exists(!0))])}function Mg(i){return kd(hi(i.firestore,wr),[new wd(i._key,_n.none())])}function kd(i,e){return(function(a,o){const c=new vs;return a.asyncQueue.enqueueAndForget((async()=>II(await qI(a),o,c))),c.promise})(Dd(i),e)}function iD(i,e,n){const a=n.docs.get(e._key),o=new OS(i);return new dr(i,o,e._key,a,new rc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=jd(e)}set(e,n,a){this._verifyNotCommitted();const o=rp(e,this._firestore),c=jS(o.converter,n,a),d=AS(this._dataReader,"WriteBatch.set",o._key,c,o.converter!==null,a);return this._mutations.push(d.toMutation(o._key,_n.none())),this}update(e,n,a,...o){this._verifyNotCommitted();const c=rp(e,this._firestore);let d;return d=typeof(n=Vt(n))=="string"||n instanceof Pc?xS(this._dataReader,"WriteBatch.update",c._key,n,a,o):wS(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(d.toMutation(c._key,_n.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=rp(e,this._firestore);return this._mutations=this._mutations.concat(new wd(n._key,_n.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ue(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rp(i,e){if((i=Vt(i)).firestore!==e)throw new ue(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(i){return Dd(i=hi(i,wr)),new sD(i,(e=>kd(i,e)))}(function(e,n=!0){(function(o){zo=o})(Lo),Io(new gr("firestore",((a,{instanceIdentifier:o,options:c})=>{const d=a.getProvider("app").getImmediate(),g=new wr(new XN(a.getProvider("auth-internal")),new ZN(d,a.getProvider("app-check-internal")),(function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ue(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vc(y.options.projectId,T)})(d,o),d);return c={useFetchStreams:n,...c},g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),ya(Y0,X0,e),ya(Y0,X0,"esm2020")})();const aD={apiKey:"mock-api-key-123456789",authDomain:"dolphinfast-mock.firebaseapp.com",projectId:"dolphinfast-mock",storageBucket:"dolphinfast-mock.appspot.com",messagingSenderId:"123456789012",appId:"1:123456789012:web:abcdef123456789"},MS=p1(aD),Nh=$N(MS),De=GI(MS);function Ro(i){if(typeof i=="string")return i;switch(i?.code||""){case"auth/user-not-found":return"Usurio no encontrado. Verifique seu email.";case"auth/wrong-password":return"Senha incorreta. Tente novamente.";case"auth/invalid-email":return"Email invlido. Verifique o formato.";case"auth/too-many-requests":return"Muitas tentativas. Tente novamente em alguns minutos.";case"auth/user-disabled":return"Conta desabilitada. Entre em contato com o suporte.";case"auth/network-request-failed":return"Erro de conexo. Verifique sua internet.";case"auth/invalid-api-key":return"Erro de configurao. Entre em contato com o suporte.";default:return"Erro inesperado. Tente novamente."}}const Rh={async logOut(){try{await VC(Nh)}catch(i){const e=Ro(i);throw new Error(e)}},async login(i){try{const n=(await DC(Nh,i.email,i.password)).user,a=await Lt(st(De,"users",n.uid));if(!a.exists())throw new Error("Usurio no encontrado");const c={...a.data(),lastLogin:new Date};return await fr(st(De,"users",n.uid),c),c}catch(e){const n=Ro(e);throw new Error(n)}},async register(i){try{if(!i.email||!i.password||!i.name)throw new Error("Todos os campos so obrigatrios");if(i.password.length<6)throw new Error("A senha deve ter pelo menos 6 caracteres");const n=(await IC(Nh,i.email,i.password)).user,a={uid:n.uid,name:i.name,email:i.email,phone:i.phone,createdAt:new Date,updatedAt:new Date,role:i.role||"user"};return await fr(st(De,"users",n.uid),a),a}catch(e){const n=Ro(e);throw new Error(n)}},observeAuthState(i){try{return MC(Nh,async e=>{if(console.log(" Auth state changed:",e?e.uid:"null"),e)try{const n=await Lt(st(De,"users",e.uid));if(n.exists()){const a=n.data();console.log(" Usurio autenticado:",a),i(a)}else console.log(" Usurio no encontrado no Firestore"),i(null)}catch(n){console.error(" Erro ao buscar dados do usurio:",n),i(null)}else console.log(" Usurio deslogado"),i(null)})}catch(e){throw new Error("Erro ao observar estado de autenticao: "+e)}}},VS=j.createContext(void 0);function rD({children:i}){const[e,n]=j.useState(null),[a,o]=j.useState(!0),[c,d]=j.useState(null);j.useEffect(()=>{console.log(" Configurando observer de autenticao");const A=Rh.observeAuthState(C=>{n(C),o(!1)});return()=>{A()}},[]);const S={user:e,loading:a,error:c,login:async A=>{try{o(!0),d(null);const C=await Rh.login(A);n(C),o(!1)}catch(C){const L=Ro(C);d(L),o(!1),n(null)}},register:async A=>{try{o(!0),d(null),await Rh.register(A),n(null),o(!1)}catch(C){const L=Ro(C);d(L),o(!1),n(null)}},logOut:async()=>{try{o(!0),d(null),await Rh.logOut(),n(null),o(!1)}catch(A){const C=Ro(A);d(C),o(!1)}},clearError:()=>{d(null)}};return u.jsx(VS.Provider,{value:S,children:i})}/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var QE="popstate";function oD(i={}){function e(a,o){let{pathname:c,search:d,hash:g}=a.location;return Lp("",{pathname:c,search:d,hash:g},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(a,o){return typeof o=="string"?o:bc(o)}return cD(e,n,null,i)}function ft(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Gi(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lD(){return Math.random().toString(36).substring(2,10)}function KE(i,e){return{usr:i.state,key:i.key,idx:e}}function Lp(i,e,n=null,a){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Go(e):e,state:n,key:e&&e.key||a||lD()}}function bc({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Go(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let a=i.indexOf("?");a>=0&&(e.search=i.substring(a),i=i.substring(0,a)),i&&(e.pathname=i)}return e}function cD(i,e,n,a={}){let{window:o=document.defaultView,v5Compat:c=!1}=a,d=o.history,g="POP",p=null,y=T();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function T(){return(d.state||{idx:null}).idx}function S(){g="POP";let F=T(),te=F==null?null:F-y;y=F,p&&p({action:g,location:G.location,delta:te})}function A(F,te){g="PUSH";let ne=Lp(G.location,F,te);y=T()+1;let Q=KE(ne,y),le=G.createHref(ne);try{d.pushState(Q,"",le)}catch(ye){if(ye instanceof DOMException&&ye.name==="DataCloneError")throw ye;o.location.assign(le)}c&&p&&p({action:g,location:G.location,delta:1})}function C(F,te){g="REPLACE";let ne=Lp(G.location,F,te);y=T();let Q=KE(ne,y),le=G.createHref(ne);d.replaceState(Q,"",le),c&&p&&p({action:g,location:G.location,delta:0})}function L(F){return uD(F)}let G={get action(){return g},get location(){return i(o,d)},listen(F){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(QE,S),p=F,()=>{o.removeEventListener(QE,S),p=null}},createHref(F){return e(o,F)},createURL:L,encodeLocation(F){let te=L(F);return{pathname:te.pathname,search:te.search,hash:te.hash}},push:A,replace:C,go(F){return d.go(F)}};return G}function uD(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ft(n,"No window.location.(origin|href) available to create URL");let a=typeof i=="string"?i:bc(i);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=n+a),new URL(a,n)}function kS(i,e,n="/"){return hD(i,e,n,!1)}function hD(i,e,n,a){let o=typeof e=="string"?Go(e):e,c=ws(o.pathname||"/",n);if(c==null)return null;let d=PS(i);dD(d);let g=null;for(let p=0;g==null&&p<d.length;++p){let y=bD(c);g=TD(d[p],y,a)}return g}function PS(i,e=[],n=[],a="",o=!1){let c=(d,g,p=o,y)=>{let T={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:g,route:d};if(T.relativePath.startsWith("/")){if(!T.relativePath.startsWith(a)&&p)return;ft(T.relativePath.startsWith(a),`Absolute route path "${T.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),T.relativePath=T.relativePath.slice(a.length)}let S=_s([a,T.relativePath]),A=n.concat(T);d.children&&d.children.length>0&&(ft(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${S}".`),PS(d.children,e,A,S,p)),!(d.path==null&&!d.index)&&e.push({path:S,score:_D(S,d.index),routesMeta:A})};return i.forEach((d,g)=>{if(d.path===""||!d.path?.includes("?"))c(d,g);else for(let p of LS(d.path))c(d,g,!0,p)}),e}function LS(i){let e=i.split("/");if(e.length===0)return[];let[n,...a]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(a.length===0)return o?[c,""]:[c];let d=LS(a.join("/")),g=[];return g.push(...d.map(p=>p===""?c:[c,p].join("/"))),o&&g.push(...d),g.map(p=>i.startsWith("/")&&p===""?"/":p)}function dD(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:ED(e.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var fD=/^:[\w-]+$/,mD=3,pD=2,gD=1,yD=10,vD=-2,YE=i=>i==="*";function _D(i,e){let n=i.split("/"),a=n.length;return n.some(YE)&&(a+=vD),e&&(a+=pD),n.filter(o=>!YE(o)).reduce((o,c)=>o+(fD.test(c)?mD:c===""?gD:yD),a)}function ED(i,e){return i.length===e.length&&i.slice(0,-1).every((a,o)=>a===e[o])?i[i.length-1]-e[e.length-1]:0}function TD(i,e,n=!1){let{routesMeta:a}=i,o={},c="/",d=[];for(let g=0;g<a.length;++g){let p=a[g],y=g===a.length-1,T=c==="/"?e:e.slice(c.length)||"/",S=hd({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},T),A=p.route;if(!S&&y&&n&&!a[a.length-1].route.index&&(S=hd({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},T)),!S)return null;Object.assign(o,S.params),d.push({params:o,pathname:_s([c,S.pathname]),pathnameBase:CD(_s([c,S.pathnameBase])),route:A}),S.pathnameBase!=="/"&&(c=_s([c,S.pathnameBase]))}return d}function hd(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,a]=SD(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:a.reduce((y,{paramName:T,isOptional:S},A)=>{if(T==="*"){let L=g[A]||"";d=c.slice(0,c.length-L.length).replace(/(.)\/+$/,"$1")}const C=g[A];return S&&!C?y[T]=void 0:y[T]=(C||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:d,pattern:i}}function SD(i,e=!1,n=!0){Gi(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let a=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,g,p)=>(a.push({paramName:g,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(a.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),a]}function bD(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Gi(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function ws(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=i.charAt(n);return a&&a!=="/"?null:i.slice(n)||"/"}function AD(i,e="/"){let{pathname:n,search:a="",hash:o=""}=typeof i=="string"?Go(i):i;return{pathname:n?n.startsWith("/")?n:wD(n,e):e,search:ND(a),hash:RD(o)}}function wD(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function lp(i,e,n,a){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xD(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function US(i){let e=xD(i);return e.map((n,a)=>a===e.length-1?n.pathname:n.pathnameBase)}function zS(i,e,n,a=!1){let o;typeof i=="string"?o=Go(i):(o={...i},ft(!o.pathname||!o.pathname.includes("?"),lp("?","pathname","search",o)),ft(!o.pathname||!o.pathname.includes("#"),lp("#","pathname","hash",o)),ft(!o.search||!o.search.includes("#"),lp("#","search","hash",o)));let c=i===""||o.pathname==="",d=c?"/":o.pathname,g;if(d==null)g=n;else{let S=e.length-1;if(!a&&d.startsWith("..")){let A=d.split("/");for(;A[0]==="..";)A.shift(),S-=1;o.pathname=A.join("/")}g=S>=0?e[S]:"/"}let p=AD(o,g),y=d&&d!=="/"&&d.endsWith("/"),T=(c||d===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(y||T)&&(p.pathname+="/"),p}var _s=i=>i.join("/").replace(/\/\/+/g,"/"),CD=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),ND=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,RD=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function ID(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var qS=["POST","PUT","PATCH","DELETE"];new Set(qS);var DD=["GET",...qS];new Set(DD);var $o=j.createContext(null);$o.displayName="DataRouter";var Pd=j.createContext(null);Pd.displayName="DataRouterState";j.createContext(!1);var BS=j.createContext({isTransitioning:!1});BS.displayName="ViewTransition";var jD=j.createContext(new Map);jD.displayName="Fetchers";var OD=j.createContext(null);OD.displayName="Await";var Qi=j.createContext(null);Qi.displayName="Navigation";var Uc=j.createContext(null);Uc.displayName="Location";var Cs=j.createContext({outlet:null,matches:[],isDataRoute:!1});Cs.displayName="Route";var Vg=j.createContext(null);Vg.displayName="RouteError";function MD(i,{relative:e}={}){ft(zc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=j.useContext(Qi),{hash:o,pathname:c,search:d}=qc(i,{relative:e}),g=c;return n!=="/"&&(g=c==="/"?n:_s([n,c])),a.createHref({pathname:g,search:d,hash:o})}function zc(){return j.useContext(Uc)!=null}function Da(){return ft(zc(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Uc).location}var FS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function HS(i){j.useContext(Qi).static||j.useLayoutEffect(i)}function Ld(){let{isDataRoute:i}=j.useContext(Cs);return i?QD():VD()}function VD(){ft(zc(),"useNavigate() may be used only in the context of a <Router> component.");let i=j.useContext($o),{basename:e,navigator:n}=j.useContext(Qi),{matches:a}=j.useContext(Cs),{pathname:o}=Da(),c=JSON.stringify(US(a)),d=j.useRef(!1);return HS(()=>{d.current=!0}),j.useCallback((p,y={})=>{if(Gi(d.current,FS),!d.current)return;if(typeof p=="number"){n.go(p);return}let T=zS(p,JSON.parse(c),o,y.relative==="path");i==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:_s([e,T.pathname])),(y.replace?n.replace:n.push)(T,y.state,y)},[e,n,c,o,i])}j.createContext(null);function qc(i,{relative:e}={}){let{matches:n}=j.useContext(Cs),{pathname:a}=Da(),o=JSON.stringify(US(n));return j.useMemo(()=>zS(i,JSON.parse(o),a,e==="path"),[i,o,a,e])}function kD(i,e){return GS(i,e)}function GS(i,e,n,a,o){ft(zc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=j.useContext(Qi),{matches:d}=j.useContext(Cs),g=d[d.length-1],p=g?g.params:{},y=g?g.pathname:"/",T=g?g.pathnameBase:"/",S=g&&g.route;{let ne=S&&S.path||"";$S(y,!S||ne.endsWith("*")||ne.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${ne}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ne}"> to <Route path="${ne==="/"?"*":`${ne}/*`}">.`)}let A=Da(),C;if(e){let ne=typeof e=="string"?Go(e):e;ft(T==="/"||ne.pathname?.startsWith(T),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${T}" but pathname "${ne.pathname}" was given in the \`location\` prop.`),C=ne}else C=A;let L=C.pathname||"/",G=L;if(T!=="/"){let ne=T.replace(/^\//,"").split("/");G="/"+L.replace(/^\//,"").split("/").slice(ne.length).join("/")}let F=kS(i,{pathname:G});Gi(S||F!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),Gi(F==null||F[F.length-1].route.element!==void 0||F[F.length-1].route.Component!==void 0||F[F.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let te=qD(F&&F.map(ne=>Object.assign({},ne,{params:Object.assign({},p,ne.params),pathname:_s([T,c.encodeLocation?c.encodeLocation(ne.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ne.pathname]),pathnameBase:ne.pathnameBase==="/"?T:_s([T,c.encodeLocation?c.encodeLocation(ne.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ne.pathnameBase])})),d,n,a,o);return e&&te?j.createElement(Uc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},te):te}function PD(){let i=$D(),e=ID(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},c={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",i),d=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:c},"ErrorBoundary")," or"," ",j.createElement("code",{style:c},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:o},n):null,d)}var LD=j.createElement(PD,null),UD=class extends j.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.unstable_onError?this.props.unstable_onError(i,e):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?j.createElement(Cs.Provider,{value:this.props.routeContext},j.createElement(Vg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function zD({routeContext:i,match:e,children:n}){let a=j.useContext($o);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(Cs.Provider,{value:i},n)}function qD(i,e=[],n=null,a=null,o=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let c=i,d=n?.errors;if(d!=null){let y=c.findIndex(T=>T.route.id&&d?.[T.route.id]!==void 0);ft(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,y+1))}let g=!1,p=-1;if(n)for(let y=0;y<c.length;y++){let T=c[y];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(p=y),T.route.id){let{loaderData:S,errors:A}=n,C=T.route.loader&&!S.hasOwnProperty(T.route.id)&&(!A||A[T.route.id]===void 0);if(T.route.lazy||C){g=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}return c.reduceRight((y,T,S)=>{let A,C=!1,L=null,G=null;n&&(A=d&&T.route.id?d[T.route.id]:void 0,L=T.route.errorElement||LD,g&&(p<0&&S===0?($S("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,G=null):p===S&&(C=!0,G=T.route.hydrateFallbackElement||null)));let F=e.concat(c.slice(0,S+1)),te=()=>{let ne;return A?ne=L:C?ne=G:T.route.Component?ne=j.createElement(T.route.Component,null):T.route.element?ne=T.route.element:ne=y,j.createElement(zD,{match:T,routeContext:{outlet:y,matches:F,isDataRoute:n!=null},children:ne})};return n&&(T.route.ErrorBoundary||T.route.errorElement||S===0)?j.createElement(UD,{location:n.location,revalidation:n.revalidation,component:L,error:A,children:te(),routeContext:{outlet:null,matches:F,isDataRoute:!0},unstable_onError:a}):te()},null)}function kg(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BD(i){let e=j.useContext($o);return ft(e,kg(i)),e}function FD(i){let e=j.useContext(Pd);return ft(e,kg(i)),e}function HD(i){let e=j.useContext(Cs);return ft(e,kg(i)),e}function Pg(i){let e=HD(i),n=e.matches[e.matches.length-1];return ft(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function GD(){return Pg("useRouteId")}function $D(){let i=j.useContext(Vg),e=FD("useRouteError"),n=Pg("useRouteError");return i!==void 0?i:e.errors?.[n]}function QD(){let{router:i}=BD("useNavigate"),e=Pg("useNavigate"),n=j.useRef(!1);return HS(()=>{n.current=!0}),j.useCallback(async(o,c={})=>{Gi(n.current,FS),n.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...c}))},[i,e])}var XE={};function $S(i,e,n){!e&&!XE[i]&&(XE[i]=!0,Gi(!1,n))}j.memo(KD);function KD({routes:i,future:e,state:n,unstable_onError:a}){return GS(i,void 0,n,a,e)}function ca(i){ft(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function YD({basename:i="/",children:e=null,location:n,navigationType:a="POP",navigator:o,static:c=!1}){ft(!zc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=i.replace(/^\/*/,"/"),g=j.useMemo(()=>({basename:d,navigator:o,static:c,future:{}}),[d,o,c]);typeof n=="string"&&(n=Go(n));let{pathname:p="/",search:y="",hash:T="",state:S=null,key:A="default"}=n,C=j.useMemo(()=>{let L=ws(p,d);return L==null?null:{location:{pathname:L,search:y,hash:T,state:S,key:A},navigationType:a}},[d,p,y,T,S,A,a]);return Gi(C!=null,`<Router basename="${d}"> is not able to match the URL "${p}${y}${T}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:j.createElement(Qi.Provider,{value:g},j.createElement(Uc.Provider,{children:e,value:C}))}function XD({children:i,location:e}){return kD(Up(i),e)}function Up(i,e=[]){let n=[];return j.Children.forEach(i,(a,o)=>{if(!j.isValidElement(a))return;let c=[...e,o];if(a.type===j.Fragment){n.push.apply(n,Up(a.props.children,c));return}ft(a.type===ca,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ft(!a.props.index||!a.props.children,"An index route cannot have child routes.");let d={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=Up(a.props.children,c)),n.push(d)}),n}var Bh="get",Fh="application/x-www-form-urlencoded";function Ud(i){return i!=null&&typeof i.tagName=="string"}function JD(i){return Ud(i)&&i.tagName.toLowerCase()==="button"}function WD(i){return Ud(i)&&i.tagName.toLowerCase()==="form"}function ZD(i){return Ud(i)&&i.tagName.toLowerCase()==="input"}function ej(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function tj(i,e){return i.button===0&&(!e||e==="_self")&&!ej(i)}var Ih=null;function nj(){if(Ih===null)try{new FormData(document.createElement("form"),0),Ih=!1}catch{Ih=!0}return Ih}var ij=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function cp(i){return i!=null&&!ij.has(i)?(Gi(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fh}"`),null):i}function sj(i,e){let n,a,o,c,d;if(WD(i)){let g=i.getAttribute("action");a=g?ws(g,e):null,n=i.getAttribute("method")||Bh,o=cp(i.getAttribute("enctype"))||Fh,c=new FormData(i)}else if(JD(i)||ZD(i)&&(i.type==="submit"||i.type==="image")){let g=i.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||g.getAttribute("action");if(a=p?ws(p,e):null,n=i.getAttribute("formmethod")||g.getAttribute("method")||Bh,o=cp(i.getAttribute("formenctype"))||cp(g.getAttribute("enctype"))||Fh,c=new FormData(g,i),!nj()){let{name:y,type:T,value:S}=i;if(T==="image"){let A=y?`${y}.`:"";c.append(`${A}x`,"0"),c.append(`${A}y`,"0")}else y&&c.append(y,S)}}else{if(Ud(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Bh,a=null,o=Fh,d=i}return c&&o==="text/plain"&&(d=c,c=void 0),{action:a,method:n.toLowerCase(),encType:o,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Lg(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function aj(i,e,n){let a=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return a.pathname==="/"?a.pathname=`_root.${n}`:e&&ws(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${n}`,a}async function rj(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function oj(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function lj(i,e,n){let a=await Promise.all(i.map(async o=>{let c=e.routes[o.route.id];if(c){let d=await rj(c,n);return d.links?d.links():[]}return[]}));return dj(a.flat(1).filter(oj).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function JE(i,e,n,a,o,c){let d=(p,y)=>n[y]?p.route.id!==n[y].route.id:!0,g=(p,y)=>n[y].pathname!==p.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==p.params["*"];return c==="assets"?e.filter((p,y)=>d(p,y)||g(p,y)):c==="data"?e.filter((p,y)=>{let T=a.routes[p.route.id];if(!T||!T.hasLoader)return!1;if(d(p,y)||g(p,y))return!0;if(p.route.shouldRevalidate){let S=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function cj(i,e,{includeHydrateFallback:n}={}){return uj(i.map(a=>{let o=e.routes[a.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function uj(i){return[...new Set(i)]}function hj(i){let e={},n=Object.keys(i).sort();for(let a of n)e[a]=i[a];return e}function dj(i,e){let n=new Set;return new Set(e),i.reduce((a,o)=>{let c=JSON.stringify(hj(o));return n.has(c)||(n.add(c),a.push({key:c,link:o})),a},[])}function QS(){let i=j.useContext($o);return Lg(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function fj(){let i=j.useContext(Pd);return Lg(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Ug=j.createContext(void 0);Ug.displayName="FrameworkContext";function KS(){let i=j.useContext(Ug);return Lg(i,"You must render this element inside a <HydratedRouter> element"),i}function mj(i,e){let n=j.useContext(Ug),[a,o]=j.useState(!1),[c,d]=j.useState(!1),{onFocus:g,onBlur:p,onMouseEnter:y,onMouseLeave:T,onTouchStart:S}=e,A=j.useRef(null);j.useEffect(()=>{if(i==="render"&&d(!0),i==="viewport"){let G=te=>{te.forEach(ne=>{d(ne.isIntersecting)})},F=new IntersectionObserver(G,{threshold:.5});return A.current&&F.observe(A.current),()=>{F.disconnect()}}},[i]),j.useEffect(()=>{if(a){let G=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(G)}}},[a]);let C=()=>{o(!0)},L=()=>{o(!1),d(!1)};return n?i!=="intent"?[c,A,{}]:[c,A,{onFocus:Zl(g,C),onBlur:Zl(p,L),onMouseEnter:Zl(y,C),onMouseLeave:Zl(T,L),onTouchStart:Zl(S,C)}]:[!1,A,{}]}function Zl(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function pj({page:i,...e}){let{router:n}=QS(),a=j.useMemo(()=>kS(n.routes,i,n.basename),[n.routes,i,n.basename]);return a?j.createElement(yj,{page:i,matches:a,...e}):null}function gj(i){let{manifest:e,routeModules:n}=KS(),[a,o]=j.useState([]);return j.useEffect(()=>{let c=!1;return lj(i,e,n).then(d=>{c||o(d)}),()=>{c=!0}},[i,e,n]),a}function yj({page:i,matches:e,...n}){let a=Da(),{manifest:o,routeModules:c}=KS(),{basename:d}=QS(),{loaderData:g,matches:p}=fj(),y=j.useMemo(()=>JE(i,e,p,o,a,"data"),[i,e,p,o,a]),T=j.useMemo(()=>JE(i,e,p,o,a,"assets"),[i,e,p,o,a]),S=j.useMemo(()=>{if(i===a.pathname+a.search+a.hash)return[];let L=new Set,G=!1;if(e.forEach(te=>{let ne=o.routes[te.route.id];!ne||!ne.hasLoader||(!y.some(Q=>Q.route.id===te.route.id)&&te.route.id in g&&c[te.route.id]?.shouldRevalidate||ne.hasClientLoader?G=!0:L.add(te.route.id))}),L.size===0)return[];let F=aj(i,d,"data");return G&&L.size>0&&F.searchParams.set("_routes",e.filter(te=>L.has(te.route.id)).map(te=>te.route.id).join(",")),[F.pathname+F.search]},[d,g,a,o,y,e,i,c]),A=j.useMemo(()=>cj(T,o),[T,o]),C=gj(T);return j.createElement(j.Fragment,null,S.map(L=>j.createElement("link",{key:L,rel:"prefetch",as:"fetch",href:L,...n})),A.map(L=>j.createElement("link",{key:L,rel:"modulepreload",href:L,...n})),C.map(({key:L,link:G})=>j.createElement("link",{key:L,nonce:n.nonce,...G})))}function vj(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var YS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{YS&&(window.__reactRouterVersion="7.9.4")}catch{}function _j({basename:i,children:e,window:n}){let a=j.useRef();a.current==null&&(a.current=oD({window:n,v5Compat:!0}));let o=a.current,[c,d]=j.useState({action:o.action,location:o.location}),g=j.useCallback(p=>{j.startTransition(()=>d(p))},[d]);return j.useLayoutEffect(()=>o.listen(g),[o,g]),j.createElement(YD,{basename:i,children:e,location:c.location,navigationType:c.action,navigator:o})}var XS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bc=j.forwardRef(function({onClick:e,discover:n="render",prefetch:a="none",relative:o,reloadDocument:c,replace:d,state:g,target:p,to:y,preventScrollReset:T,viewTransition:S,...A},C){let{basename:L}=j.useContext(Qi),G=typeof y=="string"&&XS.test(y),F,te=!1;if(typeof y=="string"&&G&&(F=y,YS))try{let R=new URL(window.location.href),M=y.startsWith("//")?new URL(R.protocol+y):new URL(y),O=ws(M.pathname,L);M.origin===R.origin&&O!=null?y=O+M.search+M.hash:te=!0}catch{Gi(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ne=MD(y,{relative:o}),[Q,le,ye]=mj(a,A),se=bj(y,{replace:d,state:g,target:p,preventScrollReset:T,relative:o,viewTransition:S});function N(R){e&&e(R),R.defaultPrevented||se(R)}let x=j.createElement("a",{...A,...ye,href:F||ne,onClick:te||c?e:N,ref:vj(C,le),target:p,"data-discover":!G&&n==="render"?"true":void 0});return Q&&!G?j.createElement(j.Fragment,null,x,j.createElement(pj,{page:ne})):x});Bc.displayName="Link";var Ej=j.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:a="",end:o=!1,style:c,to:d,viewTransition:g,children:p,...y},T){let S=qc(d,{relative:y.relative}),A=Da(),C=j.useContext(Pd),{navigator:L,basename:G}=j.useContext(Qi),F=C!=null&&Nj(S)&&g===!0,te=L.encodeLocation?L.encodeLocation(S).pathname:S.pathname,ne=A.pathname,Q=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||(ne=ne.toLowerCase(),Q=Q?Q.toLowerCase():null,te=te.toLowerCase()),Q&&G&&(Q=ws(Q,G)||Q);const le=te!=="/"&&te.endsWith("/")?te.length-1:te.length;let ye=ne===te||!o&&ne.startsWith(te)&&ne.charAt(le)==="/",se=Q!=null&&(Q===te||!o&&Q.startsWith(te)&&Q.charAt(te.length)==="/"),N={isActive:ye,isPending:se,isTransitioning:F},x=ye?e:void 0,R;typeof a=="function"?R=a(N):R=[a,ye?"active":null,se?"pending":null,F?"transitioning":null].filter(Boolean).join(" ");let M=typeof c=="function"?c(N):c;return j.createElement(Bc,{...y,"aria-current":x,className:R,ref:T,style:M,to:d,viewTransition:g},typeof p=="function"?p(N):p)});Ej.displayName="NavLink";var Tj=j.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:a,replace:o,state:c,method:d=Bh,action:g,onSubmit:p,relative:y,preventScrollReset:T,viewTransition:S,...A},C)=>{let L=xj(),G=Cj(g,{relative:y}),F=d.toLowerCase()==="get"?"get":"post",te=typeof g=="string"&&XS.test(g),ne=Q=>{if(p&&p(Q),Q.defaultPrevented)return;Q.preventDefault();let le=Q.nativeEvent.submitter,ye=le?.getAttribute("formmethod")||d;L(le||Q.currentTarget,{fetcherKey:e,method:ye,navigate:n,replace:o,state:c,relative:y,preventScrollReset:T,viewTransition:S})};return j.createElement("form",{ref:C,method:F,action:G,onSubmit:a?p:ne,...A,"data-discover":!te&&i==="render"?"true":void 0})});Tj.displayName="Form";function Sj(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function JS(i){let e=j.useContext($o);return ft(e,Sj(i)),e}function bj(i,{target:e,replace:n,state:a,preventScrollReset:o,relative:c,viewTransition:d}={}){let g=Ld(),p=Da(),y=qc(i,{relative:c});return j.useCallback(T=>{if(tj(T,e)){T.preventDefault();let S=n!==void 0?n:bc(p)===bc(y);g(i,{replace:S,state:a,preventScrollReset:o,relative:c,viewTransition:d})}},[p,g,y,n,a,e,i,o,c,d])}var Aj=0,wj=()=>`__${String(++Aj)}__`;function xj(){let{router:i}=JS("useSubmit"),{basename:e}=j.useContext(Qi),n=GD();return j.useCallback(async(a,o={})=>{let{action:c,method:d,encType:g,formData:p,body:y}=sj(a,e);if(o.navigate===!1){let T=o.fetcherKey||wj();await i.fetch(T,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||d,formEncType:o.encType||g,flushSync:o.flushSync})}else await i.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||d,formEncType:o.encType||g,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,n])}function Cj(i,{relative:e}={}){let{basename:n}=j.useContext(Qi),a=j.useContext(Cs);ft(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),c={...qc(i||".",{relative:e})},d=Da();if(i==null){c.search=d.search;let g=new URLSearchParams(c.search),p=g.getAll("index");if(p.some(T=>T==="")){g.delete("index"),p.filter(S=>S).forEach(S=>g.append("index",S));let T=g.toString();c.search=T?`?${T}`:""}}return(!i||i===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:_s([n,c.pathname])),bc(c)}function Nj(i,{relative:e}={}){let n=j.useContext(BS);ft(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=JS("useViewTransitionState"),o=qc(i,{relative:e});if(!n.isTransitioning)return!1;let c=ws(n.currentLocation.pathname,a)||n.currentLocation.pathname,d=ws(n.nextLocation.pathname,a)||n.nextLocation.pathname;return hd(o.pathname,d)!=null||hd(o.pathname,c)!=null}const ri={home:"/",login:"/login",register:"/register",dashboard:"/dashboard",clients:"/clientes",sales:"/vendas",stock:"/estoque"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ij=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,a)=>a?a.toUpperCase():n.toLowerCase()),WE=i=>{const e=Ij(i);return e.charAt(0).toUpperCase()+e.slice(1)},WS=(...i)=>i.filter((e,n,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===n).join(" ").trim(),Dj=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var jj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=j.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:o="",children:c,iconNode:d,...g},p)=>j.createElement("svg",{ref:p,...jj,width:e,height:e,stroke:i,strokeWidth:a?Number(n)*24/Number(e):n,className:WS("lucide",o),...!c&&!Dj(g)&&{"aria-hidden":"true"},...g},[...d.map(([y,T])=>j.createElement(y,T)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=(i,e)=>{const n=j.forwardRef(({className:a,...o},c)=>j.createElement(Oj,{ref:c,iconNode:e,className:WS(`lucide-${Rj(WE(i))}`,`lucide-${i}`,a),...o}));return n.displayName=WE(i),n};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ZS=we("arrow-right",Mj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],kj=we("ban",Vj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Lj=we("bell",Pj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],zj=we("building-2",Uj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Bj=we("calendar",qj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Hj=we("chart-column",Fj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],$j=we("chevron-left",Gj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Kj=we("chevron-right",Qj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],zd=we("circle-alert",Yj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Es=we("circle-check",Xj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],dd=we("circle-x",Jj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Tr=we("clock",Wj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],zp=we("dollar-sign",Zj);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],t4=we("download",e4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],qp=we("eye-off",n4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ac=we("eye",i4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ZE=we("file-text",s4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],zg=we("funnel",a4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],o4=we("house",r4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],c4=we("layout-dashboard",l4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Fc=we("loader-circle",u4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],eb=we("lock",h4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],f4=we("log-out",d4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],qg=we("mail",m4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],g4=we("map-pin",p4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],v4=we("menu",y4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],$i=we("package",_4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],tb=we("pen",E4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],nb=we("phone",T4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],b4=we("play",S4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Hc=we("plus",A4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],x4=we("receipt",w4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Gc=we("save",C4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],qd=we("search",N4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],I4=we("send",R4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],j4=we("shopping-cart",D4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],wc=we("square-check-big",O4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],$c=we("trash-2",M4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],ib=we("trending-down",V4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],sb=we("trending-up",k4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ab=we("triangle-alert",P4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],U4=we("upload",L4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],q4=we("user-check",z4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],e1=we("user-x",B4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Hh=we("user",F4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],rb=we("users",H4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],$4=we("wrench",G4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Dn=we("x",Q4);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Y4=we("zap",K4);function X4({isCollapsed:i,onToggle:e}){const n=Da(),a=[{path:"/dashboard",icon:c4,label:"Dashboard"},{path:"/clientes",icon:rb,label:"Clientes"},{path:"/vendas",icon:j4,label:"Vendas"},{path:"/estoque",icon:$i,label:"Estoque"},{path:"/ordens-servico",icon:$4,label:"Ordens de Servio"},{path:"/ocorrencias",icon:zd,label:"Ocorrncias"},{path:"/relatorios",icon:Hj,label:"Relatrios"}];return u.jsxs("aside",{className:`sidebar ${i?"collapsed":""}`,children:[u.jsxs("div",{className:"sidebar-header",children:[u.jsxs("div",{className:"sidebar-logo",children:[u.jsx("div",{className:"logo-icon",children:u.jsx(wc,{size:24,strokeWidth:2.5})}),!i&&u.jsx("span",{className:"logo-text",children:"Sistema Gesto"})]}),u.jsx("button",{className:"toggle-button",onClick:e,children:i?u.jsx(Kj,{size:20}):u.jsx($j,{size:20})})]}),u.jsx("nav",{className:"sidebar-nav",children:u.jsx("ul",{className:"nav-list",children:a.map(o=>{const c=o.icon,d=n.pathname===o.path;return u.jsx("li",{children:u.jsxs(Bc,{to:o.path,className:`nav-link ${d?"active":""}`,title:i?o.label:"",children:[u.jsx(c,{size:20}),!i&&u.jsx("span",{children:o.label})]})},o.path)})})}),u.jsxs("div",{className:"sidebar-footer",children:[u.jsx("div",{className:"footer-divider"}),!i&&u.jsx("div",{className:"footer-info",children:u.jsx("p",{className:"version",children:"Verso 1.0.0"})})]})]})}const xr=()=>{const i=j.useContext(VS);if(!i)throw new Error("useAuth deve ser usado dentro de um AuthProvider");return i};function J4({onMenuClick:i}){const{user:e,logOut:n}=xr(),[a,o]=j.useState(!1),[c,d]=j.useState(!1),g=Ld(),p=async()=>{try{await n(),g("/login")}catch(T){console.error("Erro ao fazer logout:",T)}},y=[{id:1,text:"Nova ordem de servio atribuda",time:"5 min atrs"},{id:2,text:"Cliente Joo Silva entrou em contato",time:"1h atrs"},{id:3,text:"Estoque baixo: Equipamento XYZ",time:"2h atrs"}];return u.jsxs("header",{className:"header",children:[u.jsxs("div",{className:"header-left",children:[u.jsx("button",{className:"menu-button",onClick:i,children:u.jsx(v4,{size:20})}),u.jsxs("div",{className:"search-container",children:[u.jsx(qd,{size:20,className:"search-icon"}),u.jsx("input",{type:"text",placeholder:"Buscar clientes, pedidos, equipamentos...",className:"search-input"})]})]}),u.jsxs("div",{className:"header-right",children:[u.jsxs("div",{className:"header-item notifications",children:[u.jsxs("button",{className:"icon-button",onClick:()=>d(!c),children:[u.jsx(Lj,{size:20}),u.jsx("span",{className:"notification-badge",children:"3"})]}),c&&u.jsxs("div",{className:"dropdown notifications-dropdown",children:[u.jsxs("div",{className:"dropdown-header",children:[u.jsx("h3",{children:"Notificaes"}),u.jsx("button",{className:"mark-read",children:"Marcar como lidas"})]}),u.jsx("ul",{className:"notification-list",children:y.map(T=>u.jsxs("li",{className:"notification-item",children:[u.jsx("div",{className:"notification-text",children:T.text}),u.jsx("div",{className:"notification-time",children:T.time})]},T.id))}),u.jsx("div",{className:"dropdown-footer",children:u.jsx("button",{className:"view-all",children:"Ver todas"})})]})]}),u.jsxs("div",{className:"header-item user-menu",children:[u.jsxs("button",{className:"user-button",onClick:()=>o(!a),children:[u.jsx("div",{className:"user-avatar",children:u.jsx(Hh,{size:20})}),u.jsxs("div",{className:"user-info",children:[u.jsx("span",{className:"user-name",children:e?.name||"Usurio"}),u.jsx("span",{className:"user-role",children:e?.role==="admin"?"Administrador":"Usurio"})]})]}),a&&u.jsxs("div",{className:"dropdown user-dropdown",children:[u.jsxs("div",{className:"dropdown-header",children:[u.jsx("div",{className:"user-avatar large",children:u.jsx(Hh,{size:24})}),u.jsxs("div",{children:[u.jsx("p",{className:"user-name-large",children:e?.name||"Usurio"}),u.jsx("p",{className:"user-email",children:e?.email||"usuario@email.com"})]})]}),u.jsxs("ul",{className:"dropdown-list",children:[u.jsx("li",{children:u.jsxs("button",{className:"dropdown-item",children:[u.jsx(Hh,{size:20}),u.jsx("span",{children:"Perfil"})]})}),u.jsx("li",{className:"divider"}),u.jsx("li",{children:u.jsxs("button",{className:"dropdown-item logout",onClick:p,children:[u.jsx(f4,{size:18}),u.jsx("span",{children:"Sair"})]})})]})]})]})]})]})}function Dh({children:i}){const[e,n]=j.useState(!1),[a,o]=j.useState(!1),c=()=>{n(!e)},d=()=>{o(!a)};return u.jsxs("div",{className:"layout",children:[u.jsx(X4,{isCollapsed:e,onToggle:c}),u.jsxs("div",{className:`layout-main ${e?"sidebar-collapsed":""}`,children:[u.jsx(J4,{onMenuClick:d}),u.jsx("main",{className:"layout-content",children:i})]}),a&&u.jsx("div",{className:"mobile-overlay",onClick:()=>o(!1)})]})}function W4(){const[i,e]=j.useState(""),[n,a]=j.useState(""),[o,c]=j.useState(!1),{login:d,loading:g,error:p,clearError:y}=xr(),T=Ld(),S=async A=>{A.preventDefault(),y();try{await d({email:i,password:n}),T(ri.dashboard)}catch(C){console.error("Erro no login:",C)}};return u.jsxs("div",{className:"login-container",children:[u.jsxs("div",{className:"login-background",children:[u.jsx("div",{className:"gradient-orb orb-1"}),u.jsx("div",{className:"gradient-orb orb-2"}),u.jsx("div",{className:"gradient-orb orb-3"})]}),u.jsxs("div",{className:"login-content",children:[u.jsxs("div",{className:"login-card",children:[u.jsxs("div",{className:"login-header",children:[u.jsxs("div",{className:"logo-container",children:[u.jsx("div",{className:"logo-icon",children:u.jsx(wc,{size:40,strokeWidth:2.5})}),u.jsx("h1",{children:"Sistema de Gesto"})]}),u.jsx("p",{className:"login-subtitle",children:"Faa login para acessar o sistema"})]}),p&&u.jsxs("div",{className:"error-message",children:[u.jsx(zd,{size:20}),u.jsx("span",{children:p})]}),u.jsxs("form",{onSubmit:S,className:"login-form",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"email",children:"E-mail"}),u.jsxs("div",{className:"input-wrapper",children:[u.jsx(qg,{className:"input-icon",size:20}),u.jsx("input",{id:"email",type:"email",value:i,onChange:A=>e(A.target.value),placeholder:"seu@email.com",required:!0,disabled:g,autoComplete:"email"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"password",children:"Senha"}),u.jsxs("div",{className:"input-wrapper",children:[u.jsx(eb,{className:"input-icon",size:20}),u.jsx("input",{id:"password",type:o?"text":"password",value:n,onChange:A=>a(A.target.value),placeholder:"",required:!0,disabled:g,autoComplete:"current-password"}),u.jsx("button",{type:"button",className:"toggle-password",onClick:()=>c(!o),tabIndex:-1,children:o?u.jsx(qp,{size:20}):u.jsx(Ac,{size:20})})]})]}),u.jsx("button",{type:"submit",className:"submit-button",disabled:g,children:g?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"spinner"}),"Entrando..."]}):u.jsxs(u.Fragment,{children:["Entrar",u.jsx(ZS,{size:20})]})})]}),u.jsx("div",{className:"login-footer",children:u.jsxs("p",{children:["No tem uma conta?"," ",u.jsx(Bc,{to:ri.register,className:"link",children:"Cadastre-se"})]})})]}),u.jsxs("div",{className:"login-info",children:[u.jsxs("div",{className:"info-card",children:[u.jsx("div",{className:"info-icon",children:u.jsx(wc,{size:24})}),u.jsx("h3",{children:"Gesto Completa"}),u.jsx("p",{children:"Controle total do ciclo de vida dos equipamentos"})]}),u.jsxs("div",{className:"info-card",children:[u.jsx("div",{className:"info-icon",children:u.jsx(Tr,{size:24})}),u.jsx("h3",{children:"Tempo Real"}),u.jsx("p",{children:"Acompanhe instalaes e manutenes instantaneamente"})]}),u.jsxs("div",{className:"info-card",children:[u.jsx("div",{className:"info-icon",children:u.jsx($i,{size:24})}),u.jsx("h3",{children:"Rastreabilidade"}),u.jsx("p",{children:"Histrico completo de cada equipamento e cliente"})]})]})]})]})}function Z4(){const[i,e]=j.useState(""),[n,a]=j.useState(""),[o,c]=j.useState(""),[d,g]=j.useState(""),[p,y]=j.useState(""),[T,S]=j.useState(!1),[A,C]=j.useState(!1),[L,G]=j.useState(""),[F,te]=j.useState(""),{register:ne,loading:Q,error:le,clearError:ye}=xr(),se=Ld(),N=()=>!i||!n||!d||!p?(G("Todos os campos obrigatrios devem ser preenchidos"),!1):d.length<6?(G("A senha deve ter pelo menos 6 caracteres"),!1):d!==p?(G("As senhas no coincidem"),!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)?!0:(G("E-mail invlido"),!1),x=async P=>{if(P.preventDefault(),G(""),te(""),ye(),!!N())try{await ne({name:i,email:n,password:d,phone:o||void 0,role:"user"}),te("Conta criada com sucesso! Redirecionando..."),setTimeout(()=>{se(ri.login)},2e3)}catch(I){console.error("Erro no registro:",I)}},R=P=>{const I=P.replace(/\D/g,"");return I.length<=11?I.replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{5})(\d)/,"$1-$2").replace(/(-\d{4})\d+?$/,"$1"):o},M=P=>{c(R(P))},O=L||le;return u.jsxs("div",{className:"register-container",children:[u.jsxs("div",{className:"register-background",children:[u.jsx("div",{className:"gradient-orb orb-1"}),u.jsx("div",{className:"gradient-orb orb-2"}),u.jsx("div",{className:"gradient-orb orb-3"})]}),u.jsx("div",{className:"register-content",children:u.jsxs("div",{className:"register-card",children:[u.jsxs("div",{className:"register-header",children:[u.jsxs("div",{className:"logo-container",children:[u.jsx("div",{className:"logo-icon",children:u.jsx(wc,{size:40,strokeWidth:2.5})}),u.jsx("h1",{children:"Criar Conta"})]}),u.jsx("p",{className:"register-subtitle",children:"Preencha os dados para criar sua conta"})]}),O&&u.jsxs("div",{className:"error-message",children:[u.jsx(zd,{size:20}),u.jsx("span",{children:O})]}),F&&u.jsxs("div",{className:"success-message",children:[u.jsx(Es,{size:20}),u.jsx("span",{children:F})]}),u.jsxs("form",{onSubmit:x,className:"register-form",children:[u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{htmlFor:"name",children:["Nome completo ",u.jsx("span",{className:"required",children:"*"})]}),u.jsxs("div",{className:"input-wrapper",children:[u.jsx(Hh,{className:"input-icon",size:20}),u.jsx("input",{id:"name",type:"text",value:i,onChange:P=>e(P.target.value),placeholder:"Joo Silva",required:!0,disabled:Q,autoComplete:"name"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{htmlFor:"email",children:["E-mail ",u.jsx("span",{className:"required",children:"*"})]}),u.jsxs("div",{className:"input-wrapper",children:[u.jsx(qg,{className:"input-icon",size:20}),u.jsx("input",{id:"email",type:"email",value:n,onChange:P=>a(P.target.value),placeholder:"seu@email.com",required:!0,disabled:Q,autoComplete:"email"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"phone",children:"Telefone (opcional)"}),u.jsxs("div",{className:"input-wrapper",children:[u.jsx(nb,{className:"input-icon",size:20}),u.jsx("input",{id:"phone",type:"tel",value:o,onChange:P=>M(P.target.value),placeholder:"(11) 99999-9999",disabled:Q,autoComplete:"tel"})]})]}),u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{htmlFor:"password",children:["Senha ",u.jsx("span",{className:"required",children:"*"})]}),u.jsxs("div",{className:"input-wrapper",children:[u.jsx(eb,{className:"input-icon",size:20}),u.jsx("input",{id:"password",type:T?"text":"password",value:d,onChange:P=>g(P.target.value),placeholder:"",required:!0,disabled:Q,autoComplete:"new-password"}),u.jsx("button",{type:"button",className:"toggle-password",onClick:()=>S(!T),tabIndex:-1,children:T?u.jsx(qp,{size:20}):u.jsx(Ac,{size:20})})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{htmlFor:"confirmPassword",children:["Confirmar senha ",u.jsx("span",{className:"required",children:"*"})]}),u.jsxs("div",{className:"input-wrapper",children:[u.jsx(wc,{className:"input-icon",size:20}),u.jsx("input",{id:"confirmPassword",type:A?"text":"password",value:p,onChange:P=>y(P.target.value),placeholder:"",required:!0,disabled:Q,autoComplete:"new-password"}),u.jsx("button",{type:"button",className:"toggle-password",onClick:()=>C(!A),tabIndex:-1,children:A?u.jsx(qp,{size:20}):u.jsx(Ac,{size:20})})]})]})]}),u.jsxs("div",{className:"password-requirements",children:[u.jsx("p",{className:"requirements-title",children:"Requisitos da senha:"}),u.jsxs("ul",{children:[u.jsx("li",{className:d.length>=6?"valid":"",children:"Mnimo de 6 caracteres"}),u.jsx("li",{className:d===p&&d?"valid":"",children:"As senhas devem coincidir"})]})]}),u.jsx("button",{type:"submit",className:"submit-button",disabled:Q,children:Q?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"spinner"}),"Criando conta..."]}):u.jsxs(u.Fragment,{children:["Criar conta",u.jsx(ZS,{size:20})]})})]}),u.jsx("div",{className:"register-footer",children:u.jsxs("p",{children:["J tem uma conta?"," ",u.jsx(Bc,{to:ri.login,className:"link",children:"Faa login"})]})})]})})]})}function eO({stats:i}){const e=[{label:"Total de Clientes",value:i.total,icon:rb,color:"blue"},{label:"Clientes Ativos",value:i.active,icon:q4,color:"green"},{label:"Residenciais",value:i.residential,icon:o4,color:"orange"},{label:"Comerciais",value:i.commercial,icon:zj,color:"cyan"},{label:"Pendentes",value:i.pending,icon:Tr,color:"yellow"},{label:"Inativos",value:i.inactive,icon:e1,color:"gray"},{label:"Bloqueados",value:i.blocked,icon:e1,color:"red"}];return u.jsx("div",{className:"client-stats",children:e.map(n=>{const a=n.icon;return u.jsxs("div",{className:`stat-card stat-${n.color}`,children:[u.jsx("div",{className:"stat-icon",children:u.jsx(a,{size:24})}),u.jsxs("div",{className:"stat-content",children:[u.jsx("p",{className:"stat-label",children:n.label}),u.jsx("p",{className:"stat-value",children:n.value})]})]},n.label)})})}function tO({clients:i,loading:e,onEdit:n,onDelete:a}){const o=p=>{const T={active:{label:"Ativo",icon:Es,className:"status-active"},inactive:{label:"Inativo",icon:dd,className:"status-inactive"},pending:{label:"Pendente",icon:Tr,className:"status-pending"},blocked:{label:"Bloqueado",icon:kj,className:"status-blocked"}}[p],S=T.icon;return u.jsxs("span",{className:`status-badge ${T.className}`,children:[u.jsx(S,{size:14}),T.label]})},c=p=>u.jsx("span",{className:`type-badge type-${p}`,children:p==="residential"?"Residencial":"Comercial"}),d=p=>{const y=p.replace(/\D/g,"");return y.length===11?`(${y.slice(0,2)}) ${y.slice(2,7)}-${y.slice(7)}`:p},g=(p,y)=>{const T=p.replace(/\D/g,"");return y==="cpf"&&T.length===11?`${T.slice(0,3)}.${T.slice(3,6)}.${T.slice(6,9)}-${T.slice(9)}`:y==="cnpj"&&T.length===14?`${T.slice(0,2)}.${T.slice(2,5)}.${T.slice(5,8)}/${T.slice(8,12)}-${T.slice(12)}`:p};return e?u.jsx("div",{className:"table-container",children:u.jsxs("div",{className:"table-loading",children:[u.jsx("div",{className:"spinner-large"}),u.jsx("p",{children:"Carregando clientes..."})]})}):i.length===0?u.jsx("div",{className:"table-container",children:u.jsxs("div",{className:"table-empty",children:[u.jsx("p",{children:"Nenhum cliente encontrado"}),u.jsx("span",{children:"Tente ajustar os filtros ou adicione um novo cliente"})]})}):u.jsx("div",{className:"table-container",children:u.jsx("div",{className:"table-wrapper",children:u.jsxs("table",{className:"clients-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Cliente"}),u.jsx("th",{children:"Contato"}),u.jsx("th",{children:"Documento"}),u.jsx("th",{children:"Tipo"}),u.jsx("th",{children:"Status"}),u.jsx("th",{children:"Plano"}),u.jsx("th",{children:"Aes"})]})}),u.jsx("tbody",{children:i.map(p=>u.jsxs("tr",{children:[u.jsx("td",{children:u.jsxs("div",{className:"client-info",children:[u.jsx("div",{className:"client-avatar",children:p.name.charAt(0).toUpperCase()}),u.jsxs("div",{className:"client-details",children:[u.jsx("p",{className:"client-name",children:p.name}),p.addresses[0]&&u.jsxs("p",{className:"client-location",children:[u.jsx(g4,{size:12}),p.addresses[0].city,", ",p.addresses[0].state]})]})]})}),u.jsx("td",{children:u.jsxs("div",{className:"contact-info",children:[u.jsxs("p",{className:"contact-item",children:[u.jsx(nb,{size:14}),d(p.phone)]}),u.jsxs("p",{className:"contact-item",children:[u.jsx(qg,{size:14}),p.email]})]})}),u.jsx("td",{children:u.jsx("span",{className:"document",children:g(p.document,p.documentType)})}),u.jsx("td",{children:c(p.type)}),u.jsx("td",{children:o(p.status)}),u.jsx("td",{children:p.currentPlan?u.jsxs("div",{className:"plan-info",children:[u.jsx("p",{className:"plan-name",children:p.currentPlan.name}),u.jsxs("p",{className:"plan-value",children:["R$ ",p.currentPlan.value.toFixed(2)]})]}):u.jsx("span",{className:"no-plan",children:"Sem plano"})}),u.jsx("td",{children:u.jsxs("div",{className:"action-buttons",children:[u.jsx("button",{className:"btn-action btn-edit",onClick:()=>n(p),title:"Editar",children:u.jsx(tb,{size:16})}),u.jsx("button",{className:"btn-action btn-delete",onClick:()=>a(p.id),title:"Excluir",children:u.jsx($c,{size:16})})]})})]},p.id))})]})})})}const fs="clients",vo=i=>({...i,createdAt:i.createdAt instanceof me?i.createdAt.toDate():i.createdAt,updatedAt:i.updatedAt instanceof me?i.updatedAt.toDate():i.updatedAt,lastServiceDate:i.lastServiceDate instanceof me?i.lastServiceDate.toDate():i.lastServiceDate,currentPlan:i.currentPlan?{...i.currentPlan,contractedAt:i.currentPlan.contractedAt instanceof me?i.currentPlan.contractedAt.toDate():i.currentPlan.contractedAt}:void 0}),Rn={async createClient(i){try{const e=st(Ft(De,fs)),n=me.now(),a={id:e.id,...i,status:i.status||"active",createdAt:n,updatedAt:n};return await fr(e,a),vo(a)}catch(e){throw console.error("Erro ao criar cliente:",e),new Error("No foi possvel criar o cliente. Tente novamente.")}},async getClientById(i){try{const e=st(De,fs,i),n=await Lt(e);return n.exists()?vo(n.data()):null}catch(e){throw console.error("Erro ao buscar cliente:",e),new Error("No foi possvel buscar o cliente. Tente novamente.")}},async getAllClients(){try{const i=Ft(De,fs),e=ki(i,Pi("createdAt","desc"));return(await li(e)).docs.map(a=>vo(a.data()))}catch(i){throw console.error("Erro ao buscar clientes:",i),new Error("No foi possvel buscar os clientes. Tente novamente.")}},async getClientsByFilters(i){try{const e=Ft(De,fs),n=[];i.status&&n.push(hr("status","==",i.status)),i.type&&n.push(hr("type","==",i.type)),i.hasActivePlan!==void 0&&i.hasActivePlan&&n.push(hr("currentPlan.status","==","active")),n.push(Pi("createdAt","desc"));const a=ki(e,...n);let c=(await li(a)).docs.map(d=>vo(d.data()));if(i.search){const d=i.search.toLowerCase();c=c.filter(g=>g.name.toLowerCase().includes(d)||g.email.toLowerCase().includes(d)||g.phone.includes(d)||g.document.includes(d))}return i.city&&(c=c.filter(d=>d.addresses.some(g=>g.city.toLowerCase()===i.city?.toLowerCase()))),i.state&&(c=c.filter(d=>d.addresses.some(g=>g.state.toLowerCase()===i.state?.toLowerCase()))),i.tags&&i.tags.length>0&&(c=c.filter(d=>i.tags?.some(g=>d.tags?.includes(g)))),i.createdAfter&&(c=c.filter(d=>(d.createdAt instanceof Date?d.createdAt:d.createdAt instanceof me?d.createdAt.toDate():new Date)>=i.createdAfter)),i.createdBefore&&(c=c.filter(d=>(d.createdAt instanceof Date?d.createdAt:d.createdAt instanceof me?d.createdAt.toDate():new Date)<=i.createdBefore)),c}catch(e){throw console.error("Erro ao buscar clientes com filtros:",e),new Error("No foi possvel buscar os clientes. Tente novamente.")}},async getClientsPaginated(i=1,e=10,n){try{if(n){const y=await this.getClientsByFilters(n),T=(i-1)*e,S=T+e;return{clients:y.slice(T,S),total:y.length,page:i,totalPages:Math.ceil(y.length/e),hasNext:S<y.length,hasPrevious:i>1}}const a=Ft(De,fs),o=ki(a,Pi("createdAt","desc"),eD(e)),d=(await li(o)).docs.map(y=>vo(y.data())),p=(await li(Ft(De,fs))).size;return{clients:d,total:p,page:i,totalPages:Math.ceil(p/e),hasNext:d.length===e,hasPrevious:i>1}}catch(a){throw console.error("Erro ao buscar clientes paginados:",a),new Error("No foi possvel buscar os clientes. Tente novamente.")}},async updateClient(i,e){try{const n=st(De,fs,i);if(!(await Lt(n)).exists())throw new Error("Cliente no encontrado");const o={...e,updatedAt:me.now()};await mr(n,o);const c=await Lt(n);return vo(c.data())}catch(n){throw console.error("Erro ao atualizar cliente:",n),new Error(n instanceof Error?n.message:"No foi possvel atualizar o cliente. Tente novamente.")}},async updateClientStatus(i,e){try{const n=st(De,fs,i);await mr(n,{status:e,updatedAt:me.now()})}catch(n){throw console.error("Erro ao atualizar status do cliente:",n),new Error("No foi possvel atualizar o status do cliente. Tente novamente.")}},async deleteClient(i){try{const e=st(De,fs,i);if(!(await Lt(e)).exists())throw new Error("Cliente no encontrado");await Mg(e)}catch(e){throw console.error("Erro ao deletar cliente:",e),new Error(e instanceof Error?e.message:"No foi possvel deletar o cliente. Tente novamente.")}},async getClientStats(){try{const i=await this.getAllClients();return{total:i.length,active:i.filter(n=>n.status==="active").length,inactive:i.filter(n=>n.status==="inactive").length,blocked:i.filter(n=>n.status==="blocked").length,pending:i.filter(n=>n.status==="pending").length,residential:i.filter(n=>n.type==="residential").length,commercial:i.filter(n=>n.type==="commercial").length,withActivePlan:i.filter(n=>n.currentPlan?.status==="active").length}}catch(i){throw console.error("Erro ao buscar estatsticas:",i),new Error("No foi possvel buscar as estatsticas. Tente novamente.")}},async searchClients(i){try{const e=await this.getAllClients(),n=i.toLowerCase();return e.filter(a=>a.name.toLowerCase().includes(n)||a.email.toLowerCase().includes(n)||a.phone.includes(n)||a.document.includes(n)||a.companyName?.toLowerCase().includes(n)||a.tradeName?.toLowerCase().includes(n))}catch(e){throw console.error("Erro ao buscar clientes:",e),new Error("No foi possvel buscar os clientes. Tente novamente.")}},validateDocument(i,e){const n=i.replace(/\D/g,"");return e==="cpf"?n.length===11:n.length===14},validateEmail(i){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)},validatePhone(i){const e=i.replace(/\D/g,"");return e.length>=10&&e.length<=11}};function nO({client:i,onClose:e,onSuccess:n,createdBy:a}){const o=!!i,[c,d]=j.useState(!1),[g,p]=j.useState(""),[y,T]=j.useState(i?.name||""),[S,A]=j.useState(i?.email||""),[C,L]=j.useState(i?.phone||""),[G,F]=j.useState(i?.alternativePhone||""),[te,ne]=j.useState(i?.document||""),[Q,le]=j.useState(i?.documentType||"cpf"),[ye,se]=j.useState(i?.type||"residential"),[N,x]=j.useState(i?.status||"active"),[R,M]=j.useState(i?.companyName||""),[O,P]=j.useState(i?.tradeName||""),[I,Ye]=j.useState(i?.addresses||[{street:"",number:"",complement:"",neighborhood:"",city:"",state:"",zipCode:"",isMainAddress:!0}]),[Oe,Y]=j.useState(i?.notes||""),re=ae=>{const fe=ae.replace(/\D/g,"");return fe.length<=11?fe.replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{5})(\d)/,"$1-$2").replace(/(-\d{4})\d+?$/,"$1"):C},ve=ae=>ae.replace(/\D/g,"").replace(/(\d{5})(\d)/,"$1-$2").slice(0,9),qe=(ae,fe)=>{const _e=ae.replace(/\D/g,"");return fe==="cpf"?_e.replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2").slice(0,14):_e.replace(/(\d{2})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1/$2").replace(/(\d{4})(\d{1,2})$/,"$1-$2").slice(0,18)},$e=()=>{Ye([...I,{street:"",number:"",complement:"",neighborhood:"",city:"",state:"",zipCode:"",isMainAddress:!1}])},k=ae=>{if(I.length===1){p(" necessrio ter pelo menos um endereo");return}Ye(I.filter((fe,_e)=>_e!==ae))},J=(ae,fe,_e)=>{const dt=[...I];dt[ae]={...dt[ae],[fe]:_e},Ye(dt)},ce=()=>{if(p(""),!y||!S||!C||!te)return p("Preencha todos os campos obrigatrios"),!1;if(!Rn.validateEmail(S))return p("E-mail invlido"),!1;if(!Rn.validatePhone(C))return p("Telefone invlido"),!1;if(!Rn.validateDocument(te,Q))return p(`${Q.toUpperCase()} invlido`),!1;const ae=I[0];return!ae.street||!ae.number||!ae.city||!ae.state||!ae.zipCode?(p("Preencha o endereo principal"),!1):Q==="cnpj"&&!R?(p("Razo social  obrigatria para pessoa jurdica"),!1):!0},he=async ae=>{if(ae.preventDefault(),!!ce())try{d(!0),p("");const fe={name:y,email:S,phone:C,alternativePhone:G||void 0,document:te,documentType:Q,type:ye,status:N,addresses:I,notes:Oe||void 0,companyName:R||void 0,tradeName:O||void 0,createdBy:a};o?await Rn.updateClient(i.id,fe):await Rn.createClient(fe),n()}catch(fe){p(fe instanceof Error?fe.message:"Erro ao salvar cliente")}finally{d(!1)}};return u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal-container",onClick:ae=>ae.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:o?"Editar Cliente":"Novo Cliente"}),u.jsx("button",{className:"modal-close",onClick:e,children:u.jsx(Dn,{size:24})})]}),u.jsxs("form",{onSubmit:he,className:"modal-form",children:[g&&u.jsx("div",{className:"form-error",children:u.jsx("span",{children:g})}),u.jsxs("div",{className:"form-section",children:[u.jsx("h3",{children:"Dados Bsicos"}),u.jsx("div",{className:"form-row",children:u.jsxs("div",{className:"form-group full",children:[u.jsx("label",{children:"Nome Completo *"}),u.jsx("input",{type:"text",value:y,onChange:ae=>T(ae.target.value),placeholder:"Nome do cliente",required:!0})]})}),u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"E-mail *"}),u.jsx("input",{type:"email",value:S,onChange:ae=>A(ae.target.value),placeholder:"email@exemplo.com",required:!0})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Telefone *"}),u.jsx("input",{type:"tel",value:C,onChange:ae=>L(re(ae.target.value)),placeholder:"(00) 00000-0000",required:!0})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Telefone Alternativo"}),u.jsx("input",{type:"tel",value:G,onChange:ae=>F(re(ae.target.value)),placeholder:"(00) 00000-0000"})]})]}),u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Tipo de Documento *"}),u.jsxs("select",{value:Q,onChange:ae=>{le(ae.target.value),ne("")},children:[u.jsx("option",{value:"cpf",children:"CPF"}),u.jsx("option",{value:"cnpj",children:"CNPJ"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{children:[Q.toUpperCase()," *"]}),u.jsx("input",{type:"text",value:te,onChange:ae=>ne(qe(ae.target.value,Q)),placeholder:Q==="cpf"?"000.000.000-00":"00.000.000/0000-00",required:!0})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Tipo de Cliente *"}),u.jsxs("select",{value:ye,onChange:ae=>se(ae.target.value),children:[u.jsx("option",{value:"residential",children:"Residencial"}),u.jsx("option",{value:"commercial",children:"Comercial"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Status *"}),u.jsxs("select",{value:N,onChange:ae=>x(ae.target.value),children:[u.jsx("option",{value:"active",children:"Ativo"}),u.jsx("option",{value:"inactive",children:"Inativo"}),u.jsx("option",{value:"pending",children:"Pendente"}),u.jsx("option",{value:"blocked",children:"Bloqueado"})]})]})]}),Q==="cnpj"&&u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Razo Social *"}),u.jsx("input",{type:"text",value:R,onChange:ae=>M(ae.target.value),placeholder:"Razo social da empresa",required:Q==="cnpj"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Nome Fantasia"}),u.jsx("input",{type:"text",value:O,onChange:ae=>P(ae.target.value),placeholder:"Nome fantasia"})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsxs("div",{className:"section-header",children:[u.jsx("h3",{children:"Endereos"}),u.jsxs("button",{type:"button",className:"btn-add",onClick:$e,children:[u.jsx(Hc,{size:16}),"Adicionar Endereo"]})]}),I.map((ae,fe)=>u.jsxs("div",{className:"address-card",children:[u.jsxs("div",{className:"address-header",children:[u.jsx("span",{className:"address-title",children:ae.isMainAddress?"Endereo Principal":`Endereo ${fe+1}`}),!ae.isMainAddress&&u.jsx("button",{type:"button",className:"btn-remove",onClick:()=>k(fe),children:u.jsx($c,{size:16})})]}),u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"CEP *"}),u.jsx("input",{type:"text",value:ae.zipCode,onChange:_e=>J(fe,"zipCode",ve(_e.target.value)),placeholder:"00000-000",required:!0})]}),u.jsxs("div",{className:"form-group wide",children:[u.jsx("label",{children:"Rua *"}),u.jsx("input",{type:"text",value:ae.street,onChange:_e=>J(fe,"street",_e.target.value),placeholder:"Nome da rua",required:!0})]}),u.jsxs("div",{className:"form-group small",children:[u.jsx("label",{children:"Nmero *"}),u.jsx("input",{type:"text",value:ae.number,onChange:_e=>J(fe,"number",_e.target.value),placeholder:"123",required:!0})]})]}),u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Complemento"}),u.jsx("input",{type:"text",value:ae.complement,onChange:_e=>J(fe,"complement",_e.target.value),placeholder:"Apto, Bloco, etc"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Bairro *"}),u.jsx("input",{type:"text",value:ae.neighborhood,onChange:_e=>J(fe,"neighborhood",_e.target.value),placeholder:"Nome do bairro",required:!0})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Cidade *"}),u.jsx("input",{type:"text",value:ae.city,onChange:_e=>J(fe,"city",_e.target.value),placeholder:"Nome da cidade",required:!0})]}),u.jsxs("div",{className:"form-group small",children:[u.jsx("label",{children:"UF *"}),u.jsx("input",{type:"text",value:ae.state,onChange:_e=>J(fe,"state",_e.target.value.toUpperCase()),placeholder:"SP",maxLength:2,required:!0})]})]})]},fe))]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h3",{children:"Observaes"}),u.jsx("div",{className:"form-group full",children:u.jsx("textarea",{value:Oe,onChange:ae=>Y(ae.target.value),placeholder:"Informaes adicionais sobre o cliente...",rows:4})})]}),u.jsxs("div",{className:"modal-footer",children:[u.jsx("button",{type:"button",className:"btn-secondary",onClick:e,disabled:c,children:"Cancelar"}),u.jsx("button",{type:"submit",className:"btn-submit",disabled:c,children:c?u.jsxs(u.Fragment,{children:[u.jsx(Fc,{size:18,className:"spinner"}),"Salvando..."]}):u.jsxs(u.Fragment,{children:[u.jsx(Gc,{size:18}),o?"Atualizar":"Cadastrar"]})})]})]})]})})}function iO({onFilterChange:i}){const[e,n]=j.useState(""),[a,o]=j.useState(!1),[c,d]=j.useState({}),g=S=>{n(S);const A={...c,search:S||void 0};d(A),i(A)},p=(S,A)=>{const C={...c,[S]:A||void 0};d(C),i(C)},y=()=>{n(""),d({}),i({})},T=Object.keys(c).some(S=>c[S]!==void 0);return u.jsxs("div",{className:"client-filters",children:[u.jsxs("div",{className:"filters-main",children:[u.jsxs("div",{className:"search-box",children:[u.jsx(qd,{size:20,className:"search-icon"}),u.jsx("input",{type:"text",placeholder:"Buscar por nome, email, telefone ou documento...",value:e,onChange:S=>g(S.target.value),className:"search-input"}),e&&u.jsx("button",{className:"clear-search",onClick:()=>g(""),children:u.jsx(Dn,{size:18})})]}),u.jsxs("button",{className:`filter-toggle ${a?"active":""}`,onClick:()=>o(!a),children:[u.jsx(zg,{size:20}),"Filtros"]}),T&&u.jsxs("button",{className:"clear-filters",onClick:y,children:[u.jsx(Dn,{size:18}),"Limpar"]})]}),a&&u.jsxs("div",{className:"filters-advanced",children:[u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Status"}),u.jsxs("select",{value:c.status||"",onChange:S=>p("status",S.target.value),children:[u.jsx("option",{value:"",children:"Todos"}),u.jsx("option",{value:"active",children:"Ativos"}),u.jsx("option",{value:"inactive",children:"Inativos"}),u.jsx("option",{value:"blocked",children:"Bloqueados"}),u.jsx("option",{value:"pending",children:"Pendentes"})]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Tipo"}),u.jsxs("select",{value:c.type||"",onChange:S=>p("type",S.target.value),children:[u.jsx("option",{value:"",children:"Todos"}),u.jsx("option",{value:"residential",children:"Residencial"}),u.jsx("option",{value:"commercial",children:"Comercial"})]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Plano Ativo"}),u.jsxs("select",{value:c.hasActivePlan===void 0?"":c.hasActivePlan?"true":"false",onChange:S=>p("hasActivePlan",S.target.value===""?void 0:S.target.value==="true"),children:[u.jsx("option",{value:"",children:"Todos"}),u.jsx("option",{value:"true",children:"Com Plano"}),u.jsx("option",{value:"false",children:"Sem Plano"})]})]})]})]})}function sO(){const{user:i}=xr(),[e,n]=j.useState([]),[a,o]=j.useState(null),[c,d]=j.useState(!0),[g,p]=j.useState(!1),[y,T]=j.useState(null),[S,A]=j.useState({});j.useEffect(()=>{(async()=>{try{d(!0);const le=await Rn.getClientsByFilters(S);n(le)}catch(le){console.error("Erro ao carregar clientes:",le)}finally{d(!1)}})()},[S]),j.useEffect(()=>{(async()=>{try{const le=await Rn.getClientStats();o(le)}catch(le){console.error("Erro ao carregar estatsticas:",le)}})()},[]);const C=()=>{T(null),p(!0)},L=Q=>{T(Q),p(!0)},G=async Q=>{if(window.confirm("Tem certeza que deseja excluir este cliente?"))try{await Rn.deleteClient(Q);const[le,ye]=await Promise.all([Rn.getClientsByFilters(S),Rn.getClientStats()]);n(le),o(ye)}catch(le){console.error("Erro ao deletar cliente:",le),alert("No foi possvel deletar o cliente. Tente novamente.")}},F=()=>{p(!1),T(null)},te=async()=>{const[Q,le]=await Promise.all([Rn.getClientsByFilters(S),Rn.getClientStats()]);n(Q),o(le),F()},ne=Q=>{A(Q)};return u.jsxs("div",{className:"clients-page",children:[u.jsxs("div",{className:"page-header",children:[u.jsxs("div",{className:"header-content",children:[u.jsx("h1",{children:"Clientes"}),u.jsx("p",{className:"page-description",children:"Gerencie todos os clientes do sistema"})]}),u.jsxs("button",{className:"btn-primary",onClick:C,children:[u.jsx(Hc,{size:20}),"Novo Cliente"]})]}),a&&u.jsx(eO,{stats:a}),u.jsxs("div",{className:"clients-content",children:[u.jsx(iO,{onFilterChange:ne}),u.jsx(tO,{clients:e,loading:c,onEdit:L,onDelete:G})]}),g&&u.jsx(nO,{client:y,onClose:F,onSuccess:te,createdBy:i?.uid||""})]})}function aO({stats:i}){const e=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a),n=[{label:"Total de Vendas",value:i.total,icon:x4,color:"blue"},{label:"Vendas Ativas",value:i.active,icon:Es,color:"green"},{label:"Em Andamento",value:i.inProgress,icon:Tr,color:"yellow"},{label:"Vendas Pendentes",value:i.pending,icon:Y4,color:"orange"},{label:"Receita Total",value:e(i.totalRevenue),icon:zp,color:"purple",isValue:!0},{label:"Ticket Mdio",value:e(i.averageTicket),icon:sb,color:"cyan",isValue:!0},{label:"Vendas Este Ms",value:i.thisMonthSales,icon:Bj,color:"indigo"},{label:"Receita do Ms",value:e(i.thisMonthRevenue),icon:zp,color:"green",isValue:!0}];return u.jsx("div",{className:"sale-stats",children:n.map(a=>{const o=a.icon;return u.jsxs("div",{className:`stat-card stat-${a.color}`,children:[u.jsx("div",{className:"stat-icon",children:u.jsx(o,{size:24})}),u.jsxs("div",{className:"stat-content",children:[u.jsx("p",{className:"stat-label",children:a.label}),u.jsx("p",{className:`stat-value ${a.isValue?"is-currency":""}`,children:a.value})]})]},a.label)})})}function rO({sales:i,loading:e,onView:n,onDelete:a}){const o=g=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(g),c=g=>new Intl.DateTimeFormat("pt-BR").format(g),d=g=>{const y={pending:{label:"Pendente",icon:Tr,className:"status-pending"},in_progress:{label:"Em Andamento",icon:zd,className:"status-active"},stock_separated:{label:"Estoque OK",icon:Es,className:"status-active"},dispatched:{label:"Despachado",icon:Es,className:"status-active"},installing:{label:"Instalando",icon:Tr,className:"status-pending"},active:{label:"Ativo",icon:Es,className:"status-active"},cancelled:{label:"Cancelado",icon:dd,className:"status-blocked"},suspended:{label:"Suspenso",icon:dd,className:"status-inactive"}}[g],T=y.icon;return u.jsxs("span",{className:`status-badge ${y.className}`,children:[u.jsx(T,{size:14}),y.label]})};return e?u.jsx("div",{className:"table-container",children:u.jsxs("div",{className:"table-loading",children:[u.jsx("div",{className:"spinner-large"}),u.jsx("p",{children:"Carregando vendas..."})]})}):i.length===0?u.jsx("div",{className:"table-container",children:u.jsxs("div",{className:"table-empty",children:[u.jsx("p",{children:"Nenhuma venda encontrada"}),u.jsx("span",{children:"Crie uma nova venda para comear"})]})}):u.jsx("div",{className:"table-container",children:u.jsx("div",{className:"table-wrapper",children:u.jsxs("table",{className:"clients-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"ID / Cliente"}),u.jsx("th",{children:"Plano"}),u.jsx("th",{children:"Valor Total"}),u.jsx("th",{children:"Data da Venda"}),u.jsx("th",{children:"Status"}),u.jsx("th",{children:"Pagamento"}),u.jsx("th",{children:"Aes"})]})}),u.jsx("tbody",{children:i.map(g=>u.jsxs("tr",{children:[u.jsx("td",{children:u.jsxs("div",{className:"client-info",children:[u.jsx("div",{className:"client-avatar",children:g.clientName.charAt(0).toUpperCase()}),u.jsxs("div",{className:"client-details",children:[u.jsx("p",{className:"client-name",children:g.clientName}),u.jsxs("p",{className:"client-location",style:{fontSize:"0.75rem",color:"#94a3b8"},children:["#",g.id.slice(0,8)]})]})]})}),u.jsx("td",{children:u.jsxs("div",{className:"plan-info",children:[u.jsx("p",{className:"plan-name",children:g.plan.name}),u.jsxs("p",{className:"plan-value",children:[o(g.plan.value),"/ms"]})]})}),u.jsx("td",{children:u.jsx("span",{className:"document",style:{fontWeight:600,color:"#059669"},children:o(g.payment.totalValue)})}),u.jsx("td",{children:u.jsx("span",{className:"document",children:c(g.saleDate)})}),u.jsx("td",{children:d(g.status)}),u.jsx("td",{children:u.jsx("span",{className:`status-badge ${g.payment.paymentStatus==="paid"?"status-active":g.payment.paymentStatus==="overdue"?"status-blocked":"status-pending"}`,children:g.payment.paymentStatus==="paid"?"Pago":g.payment.paymentStatus==="overdue"?"Atrasado":"Pendente"})}),u.jsx("td",{children:u.jsxs("div",{className:"action-buttons",children:[u.jsx("button",{className:"btn-action btn-edit",onClick:()=>n(g),title:"Ver Detalhes",children:u.jsx(Ac,{size:16})}),u.jsx("button",{className:"btn-action btn-delete",onClick:()=>a(g.id),title:"Excluir",children:u.jsx($c,{size:16})})]})})]},g.id))})]})})})}const up=[{id:"plan-replay-gold",name:"Replay Gold",description:"Plano premium com recursos avanados",value:199.9,installationFee:99.9,features:["Suporte 24/7","Equipamentos premium","Instalao grtis"]},{id:"plan-replay-silver",name:"Replay Silver",description:"Plano intermedirio com timo custo-benefcio",value:149.9,installationFee:79.9,features:["Suporte em horrio comercial","Equipamentos padro"]},{id:"plan-replay-bronze",name:"Replay Bronze",description:"Plano bsico ideal para iniciantes",value:99.9,installationFee:59.9,features:["Suporte por email","Equipamentos bsicos"]},{id:"plan-replay-business",name:"Replay Business",description:"Plano empresarial com recursos corporativos",value:299.9,installationFee:149.9,features:["Suporte dedicado","SLA garantido","Equipamentos empresariais"]}],t1={"plan-replay-gold":[{name:"Roteador Premium",model:"RT-5000",quantity:1,status:"pending"},{name:"Conversor ptico",model:"CO-300",quantity:1,status:"pending"},{name:"Cabo de Rede 10m",model:"CAT6",quantity:1,status:"pending"}],"plan-replay-silver":[{name:"Roteador Padro",model:"RT-3000",quantity:1,status:"pending"},{name:"Conversor ptico",model:"CO-200",quantity:1,status:"pending"}],"plan-replay-bronze":[{name:"Roteador Bsico",model:"RT-1000",quantity:1,status:"pending"}],"plan-replay-business":[{name:"Roteador Empresarial",model:"RT-7000",quantity:1,status:"pending"},{name:"Switch Gerencivel",model:"SW-24P",quantity:1,status:"pending"},{name:"Conversor ptico",model:"CO-500",quantity:2,status:"pending"},{name:"Cabo de Rede 15m",model:"CAT6A",quantity:2,status:"pending"}]},ms="stock_items",n1="stock_entries",i1="stock_dispatches",s1="stock_movements",hp="separation_orders",ai=i=>{const e={...i};return Object.keys(e).forEach(n=>{(e[n]instanceof me||e[n]?.toDate instanceof Function)&&(e[n]=e[n].toDate())}),e},an={async createItem(i){try{const e=st(Ft(De,ms)),n=me.now(),a={id:e.id,...i,status:i.status||"available",reservedQuantity:0,createdAt:n,updatedAt:n};return await fr(e,a),i.quantity>0&&await this.createMovement({itemId:a.id,itemName:a.name,type:"entry",quantity:i.quantity,description:"Entrada inicial no estoque",performedBy:i.createdBy,previousQuantity:0,newQuantity:i.quantity}),ai(a)}catch(e){throw console.error("Erro ao criar item:",e),new Error("No foi possvel criar o item.")}},async getItemById(i){try{const e=st(De,ms,i),n=await Lt(e);return n.exists()?ai(n.data()):null}catch(e){throw console.error("Erro ao buscar item:",e),new Error("No foi possvel buscar o item.")}},async getAllItems(){try{const i=Ft(De,ms),e=ki(i,Pi("name"));return(await li(e)).docs.map(a=>ai(a.data()))}catch(i){throw console.error("Erro ao buscar items:",i),new Error("No foi possvel buscar os items.")}},async getItemsByFilters(i){try{let e=await this.getAllItems();if(i.category&&(e=e.filter(n=>n.category===i.category)),i.status&&(e=e.filter(n=>n.status===i.status)),i.warehouse&&(e=e.filter(n=>n.location.warehouse===i.warehouse)),i.lowStock&&(e=e.filter(n=>n.quantity<=n.minimumStock)),i.search){const n=i.search.toLowerCase();e=e.filter(a=>a.name.toLowerCase().includes(n)||a.model.toLowerCase().includes(n)||a.manufacturer?.toLowerCase().includes(n))}return e}catch(e){throw console.error("Erro ao buscar items com filtros:",e),new Error("No foi possvel buscar os items.")}},async updateItem(i,e){try{const n=st(De,ms,i);if(!(await Lt(n)).exists())throw new Error("Item no encontrado");await mr(n,{...e,updatedAt:me.now()});const o=await Lt(n);return ai(o.data())}catch(n){throw console.error("Erro ao atualizar item:",n),new Error("No foi possvel atualizar o item.")}},async deleteItem(i){try{const e=st(De,ms,i);await Mg(e)}catch(e){throw console.error("Erro ao deletar item:",e),new Error("No foi possvel deletar o item.")}},async createEntry(i){try{const e=op(De),n=st(Ft(De,n1)),a=st(De,ms,i.itemId),o=await Lt(a);if(!o.exists())throw new Error("Item no encontrado");const c=o.data(),d=me.now(),g={id:n.id,itemId:i.itemId,itemName:c.name,quantity:i.quantity,unitPrice:i.unitPrice,totalPrice:i.quantity*i.unitPrice,supplier:i.supplier,invoiceNumber:i.invoiceNumber,invoiceDate:i.invoiceDate?me.fromDate(i.invoiceDate):void 0,receivedBy:i.createdBy,receivedDate:d,notes:i.notes,createdAt:d,createdBy:i.createdBy};e.set(n,g);const p=c.quantity+i.quantity;return e.update(a,{quantity:p,updatedAt:d}),await e.commit(),await this.createMovement({itemId:i.itemId,itemName:c.name,type:"entry",quantity:i.quantity,description:`Entrada de estoque - NF: ${i.invoiceNumber||"N/A"}`,performedBy:i.createdBy,previousQuantity:c.quantity,newQuantity:p,referenceId:n.id,referenceType:"entry"}),ai(g)}catch(e){throw console.error("Erro ao criar entrada:",e),new Error("No foi possvel criar a entrada.")}},async getAllEntries(){try{const i=Ft(De,n1),e=ki(i,Pi("createdAt","desc"));return(await li(e)).docs.map(a=>ai(a.data()))}catch(i){throw console.error("Erro ao buscar entradas:",i),new Error("No foi possvel buscar as entradas.")}},async createDispatch(i){try{const e=op(De),n=st(Ft(De,i1)),a=me.now(),o=await Promise.all(i.items.map(async d=>{const g=st(De,ms,d.itemId),p=await Lt(g);if(!p.exists())throw new Error(`Item ${d.itemId} no encontrado`);const y=p.data();if(y.quantity<d.quantity)throw new Error(`Quantidade insuficiente para ${y.name}`);return e.update(g,{quantity:y.quantity-d.quantity,updatedAt:a}),{itemId:d.itemId,itemName:y.name,quantity:d.quantity}})),c={id:n.id,items:o,saleId:i.saleId,clientId:i.clientId,clientName:i.clientId||"",destination:i.destination,dispatchDate:me.fromDate(i.dispatchDate),dispatchedBy:i.createdBy,technician:i.technician,technicianContact:i.technicianContact,status:"dispatched",trackingCode:i.trackingCode,estimatedDelivery:i.estimatedDelivery?me.fromDate(i.estimatedDelivery):void 0,notes:i.notes,createdAt:a,updatedAt:a,createdBy:i.createdBy};e.set(n,c),await e.commit();for(const d of i.items){const p=(await Lt(st(De,ms,d.itemId))).data();await this.createMovement({itemId:d.itemId,itemName:p.name,type:"exit",quantity:-d.quantity,description:`Despacho para ${i.destination}`,performedBy:i.createdBy,previousQuantity:p.quantity+d.quantity,newQuantity:p.quantity,referenceId:n.id,referenceType:"dispatch"})}return ai(c)}catch(e){throw console.error("Erro ao criar despacho:",e),new Error(e instanceof Error?e.message:"No foi possvel criar o despacho.")}},async getAllDispatches(){try{const i=Ft(De,i1),e=ki(i,Pi("createdAt","desc"));return(await li(e)).docs.map(a=>ai(a.data()))}catch(i){throw console.error("Erro ao buscar despachos:",i),new Error("No foi possvel buscar os despachos.")}},async createMovement(i){try{const e=st(Ft(De,s1)),n={...i,id:e.id,createdAt:me.now()};await fr(e,n)}catch(e){console.error("Erro ao criar movimentao:",e)}},async getMovementsByItem(i){try{const e=Ft(De,s1),n=ki(e,hr("itemId","==",i),Pi("createdAt","desc"));return(await li(n)).docs.map(o=>ai(o.data()))}catch(e){throw console.error("Erro ao buscar movimentaes:",e),new Error("No foi possvel buscar as movimentaes.")}},async createSeparationOrder(i,e,n,a,o,c,d){try{const g=st(Ft(De,hp)),p=me.now(),y={id:g.id,saleId:i,clientId:e,clientName:n,planName:a,items:o.map(T=>({...T,separated:!1})),status:"pending",deadline:d?me.fromDate(d):void 0,createdAt:p,createdBy:c};return await fr(g,y),ai(y)}catch(g){throw console.error("Erro ao criar ordem de separao:",g),new Error("No foi possvel criar a ordem de separao.")}},async getSeparationOrders(){try{const i=Ft(De,hp),e=ki(i,Pi("createdAt","desc"));return(await li(e)).docs.map(a=>ai(a.data()))}catch(i){throw console.error("Erro ao buscar ordens:",i),new Error("No foi possvel buscar as ordens.")}},async updateSeparationOrderStatus(i,e,n){try{const a=st(De,hp,i),o={status:e};e==="separating"&&(o.startedAt=me.now(),o.separatedBy=n),e==="ready"&&(o.completedAt=me.now()),await mr(a,o)}catch(a){throw console.error("Erro ao atualizar ordem:",a),new Error("No foi possvel atualizar a ordem.")}},async reserveItemsForSale(i){try{const e=op(De);for(const n of i){const a=st(De,ms,n.itemId),o=await Lt(a);if(o.exists()){const c=o.data();e.update(a,{reservedQuantity:c.reservedQuantity+n.quantity})}}await e.commit()}catch(e){throw console.error("Erro ao reservar items:",e),new Error("No foi possvel reservar os items.")}},async getStats(){try{const[i,e]=await Promise.all([this.getAllItems(),this.getSeparationOrders()]),n={totalItems:i.length,totalValue:i.reduce((o,c)=>o+(c.unitPrice||0)*c.quantity,0),lowStockItems:i.filter(o=>o.quantity<=o.minimumStock).length,availableItems:i.filter(o=>o.status==="available").length,reservedItems:i.filter(o=>o.status==="reserved").length,dispatchedItems:i.filter(o=>o.status==="dispatched").length,defectiveItems:i.filter(o=>o.status==="defective").length,pendingSeparations:e.filter(o=>o.status==="pending"||o.status==="separating").length,categories:[]},a=new Map;return i.forEach(o=>{a.set(o.category,(a.get(o.category)||0)+1)}),n.categories=Array.from(a.entries()).map(([o,c])=>({category:o,count:c})),n}catch(i){throw console.error("Erro ao buscar estatsticas:",i),new Error("No foi possvel buscar as estatsticas.")}}},la="sales",ec=i=>({...i,saleDate:i.saleDate instanceof me?i.saleDate.toDate():i.saleDate,estimatedInstallationDate:i.estimatedInstallationDate instanceof me?i.estimatedInstallationDate.toDate():i.estimatedInstallationDate,actualInstallationDate:i.actualInstallationDate instanceof me?i.actualInstallationDate.toDate():i.actualInstallationDate,activationDate:i.activationDate instanceof me?i.activationDate.toDate():i.activationDate,createdAt:i.createdAt instanceof me?i.createdAt.toDate():i.createdAt,updatedAt:i.updatedAt instanceof me?i.updatedAt.toDate():i.updatedAt,payment:{...i.payment,firstPaymentDate:i.payment.firstPaymentDate instanceof me?i.payment.firstPaymentDate.toDate():i.payment.firstPaymentDate},timeline:i.timeline.map(e=>({...e,createdAt:e.createdAt instanceof me?e.createdAt.toDate():e.createdAt})),documents:i.documents.map(e=>({...e,uploadedAt:e.uploadedAt instanceof me?e.uploadedAt.toDate():e.uploadedAt}))}),oi={async createSale(i){try{const e=st(Ft(De,la)),n=me.now(),a={id:`event-${Date.now()}`,status:"pending",description:"Venda registrada no sistema",createdAt:n,createdBy:i.createdBy},o={id:e.id,...i,status:"pending",payment:{...i.payment,paymentStatus:i.payment.paymentStatus||"pending"},saleDate:n,documents:[],timeline:[a],createdAt:n,updatedAt:n};await fr(e,o);try{const c=new Date;c.setDate(c.getDate()+3),await an.createSeparationOrder(e.id,i.clientId,i.clientName,i.plan.name,i.equipments.map(d=>({itemId:d.id,itemName:d.name,model:d.model,quantity:d.quantity})),i.createdBy,c)}catch(c){console.error("Erro ao criar ordem de separao:",c)}return ec(o)}catch(e){throw console.error("Erro ao criar venda:",e),new Error("No foi possvel criar a venda. Tente novamente.")}},async getSaleById(i){try{const e=st(De,la,i),n=await Lt(e);return n.exists()?ec(n.data()):null}catch(e){throw console.error("Erro ao buscar venda:",e),new Error("No foi possvel buscar a venda. Tente novamente.")}},async getAllSales(){try{const i=Ft(De,la),e=ki(i,Pi("createdAt","desc"));return(await li(e)).docs.map(a=>ec(a.data()))}catch(i){throw console.error("Erro ao buscar vendas:",i),new Error("No foi possvel buscar as vendas. Tente novamente.")}},async getSalesByFilters(i){try{const e=Ft(De,la),n=[];i.status&&n.push(hr("status","==",i.status)),i.paymentStatus&&n.push(hr("payment.paymentStatus","==",i.paymentStatus)),i.clientId&&n.push(hr("clientId","==",i.clientId)),n.push(Pi("createdAt","desc"));const a=ki(e,...n);let c=(await li(a)).docs.map(d=>ec(d.data()));if(i.search){const d=i.search.toLowerCase();c=c.filter(g=>g.clientName.toLowerCase().includes(d)||g.plan.name.toLowerCase().includes(d)||g.id.toLowerCase().includes(d))}return i.minValue!==void 0&&(c=c.filter(d=>d.payment.totalValue>=i.minValue)),i.maxValue!==void 0&&(c=c.filter(d=>d.payment.totalValue<=i.maxValue)),i.dateFrom&&(c=c.filter(d=>(d.saleDate instanceof Date?d.saleDate:d.saleDate instanceof me?d.saleDate.toDate():new Date)>=i.dateFrom)),i.dateTo&&(c=c.filter(d=>(d.saleDate instanceof Date?d.saleDate:d.saleDate instanceof me?d.saleDate.toDate():new Date)<=i.dateTo)),c}catch(e){throw console.error("Erro ao buscar vendas com filtros:",e),new Error("No foi possvel buscar as vendas. Tente novamente.")}},async updateSale(i,e){try{const n=st(De,la,i);if(!(await Lt(n)).exists())throw new Error("Venda no encontrada");const o={...e,updatedAt:me.now()};await mr(n,o);const c=await Lt(n);return ec(c.data())}catch(n){throw console.error("Erro ao atualizar venda:",n),new Error(n instanceof Error?n.message:"No foi possvel atualizar a venda. Tente novamente.")}},async updateSaleStatus(i,e,n,a){try{const o=st(De,la,i),c=await Lt(o);if(!c.exists())throw new Error("Venda no encontrada");const d=c.data(),g={id:`event-${Date.now()}`,status:e,description:this.getStatusDescription(e),createdAt:me.now(),createdBy:a,notes:n};await mr(o,{status:e,timeline:[...d.timeline,g],updatedAt:me.now()})}catch(o){throw console.error("Erro ao atualizar status:",o),new Error(o instanceof Error?o.message:"No foi possvel atualizar o status. Tente novamente.")}},async addDocument(i,e,n){try{const a=st(De,la,i),o=await Lt(a);if(!o.exists())throw new Error("Venda no encontrada");const c=o.data(),d={...e,id:`doc-${Date.now()}`,uploadedAt:me.now(),uploadedBy:n};await mr(a,{documents:[...c.documents,d],updatedAt:me.now()})}catch(a){throw console.error("Erro ao adicionar documento:",a),new Error("No foi possvel adicionar o documento. Tente novamente.")}},async deleteSale(i){try{const e=st(De,la,i);if(!(await Lt(e)).exists())throw new Error("Venda no encontrada");await Mg(e)}catch(e){throw console.error("Erro ao deletar venda:",e),new Error(e instanceof Error?e.message:"No foi possvel deletar a venda. Tente novamente.")}},async getSaleStats(){try{const i=await this.getAllSales(),e=new Date,n=new Date(e.getFullYear(),e.getMonth(),1),a=i.filter(d=>(d.saleDate instanceof Date?d.saleDate:d.saleDate instanceof me?d.saleDate.toDate():new Date)>=n),o=i.reduce((d,g)=>d+g.payment.totalValue,0),c=a.reduce((d,g)=>d+g.payment.totalValue,0);return{total:i.length,pending:i.filter(d=>d.status==="pending").length,inProgress:i.filter(d=>d.status==="in_progress"||d.status==="stock_separated"||d.status==="dispatched"||d.status==="installing").length,active:i.filter(d=>d.status==="active").length,cancelled:i.filter(d=>d.status==="cancelled").length,totalRevenue:o,averageTicket:i.length>0?o/i.length:0,thisMonthSales:a.length,thisMonthRevenue:c}}catch(i){throw console.error("Erro ao buscar estatsticas:",i),new Error("No foi possvel buscar as estatsticas. Tente novamente.")}},getStatusDescription(i){return{pending:"Aguardando processamento",in_progress:"Venda em andamento",stock_separated:"Equipamentos separados no estoque",dispatched:"Equipamentos despachados para instalao",installing:"Instalao em andamento",active:"Instalao concluda - Cliente ativo",cancelled:"Venda cancelada",suspended:"Servio suspenso"}[i]},formatCurrency(i){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i)},formatDate(i){const e=i instanceof me?i.toDate():i;return new Intl.DateTimeFormat("pt-BR").format(e)}};function oO({onClose:i,onSuccess:e,createdBy:n}){const[a,o]=j.useState(!1),[c,d]=j.useState(""),[g,p]=j.useState([]),[y,T]=j.useState(""),[S,A]=j.useState(""),[C,L]=j.useState(0),[G,F]=j.useState("");j.useEffect(()=>{(async()=>{try{const le=await Rn.getAllClients();p(le.filter(ye=>ye.status==="active"))}catch(le){console.error("Erro ao carregar clientes:",le)}})()},[]);const te=async Q=>{if(Q.preventDefault(),!y||!S){d("Selecione um cliente e um plano");return}try{o(!0),d("");const le=g.find(x=>x.id===y),ye=up.find(x=>x.id===S);if(!le||!ye)return;const se=(t1[S]||[]).map((x,R)=>({...x,id:`eq-${Date.now()}-${R}`})),N={clientId:le.id,clientName:le.name,plan:ye,equipments:se,payment:{totalValue:ye.value+C,installationFee:C,paymentStatus:"pending"},installationAddress:le.addresses[0],notes:G,createdBy:n};await oi.createSale(N),e()}catch(le){d(le instanceof Error?le.message:"Erro ao criar venda")}finally{o(!1)}},ne=up.find(Q=>Q.id===S);return u.jsx("div",{className:"sale-modal-overlay",onClick:i,children:u.jsxs("div",{className:"sale-modal-container",onClick:Q=>Q.stopPropagation(),children:[u.jsxs("div",{className:"sale-modal-header",children:[u.jsx("h2",{children:"Nova Venda"}),u.jsx("button",{className:"sale-modal-close",onClick:i,children:u.jsx(Dn,{size:24})})]}),u.jsxs("form",{onSubmit:te,className:"sale-modal-form",children:[c&&u.jsx("div",{className:"sale-form-error",children:u.jsx("span",{children:c})}),u.jsxs("div",{className:"sale-form-section",children:[u.jsx("h3",{children:"Selecionar Cliente"}),u.jsx("div",{className:"sale-form-group",children:u.jsxs("select",{value:y,onChange:Q=>T(Q.target.value),required:!0,children:[u.jsx("option",{value:"",children:"Selecione um cliente..."}),g.map(Q=>u.jsxs("option",{value:Q.id,children:[Q.name," - ",Q.email]},Q.id))]})})]}),u.jsxs("div",{className:"sale-form-section",children:[u.jsx("h3",{children:"Escolher Plano"}),u.jsx("div",{className:"plan-cards-grid",children:up.map(Q=>u.jsxs("div",{className:`plan-card ${S===Q.id?"selected":""}`,onClick:()=>{A(Q.id),L(Q.installationFee||0)},children:[u.jsx("h4",{className:"plan-card-name",children:Q.name}),u.jsx("p",{className:"plan-card-description",children:Q.description}),u.jsxs("p",{className:"plan-card-price",children:["R$ ",Q.value.toFixed(2),"/ms"]})]},Q.id))})]}),ne&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"sale-form-section",children:[u.jsx("h3",{children:"Taxa de Instalao"}),u.jsx("div",{className:"sale-form-group",children:u.jsx("input",{type:"number",value:C,onChange:Q=>L(Number(Q.target.value)),step:"0.01",min:"0"})})]}),u.jsxs("div",{className:"sale-form-section",children:[u.jsx("h3",{children:"Equipamentos Inclusos"}),u.jsx("ul",{className:"equipment-list",children:(t1[S]||[]).map((Q,le)=>u.jsxs("li",{className:"equipment-item",children:[" ",Q.name," (",Q.model,") - Qtd: ",Q.quantity]},le))})]}),u.jsxs("div",{className:"sale-form-section",children:[u.jsx("h3",{children:"Observaes"}),u.jsx("div",{className:"sale-form-group",children:u.jsx("textarea",{value:G,onChange:Q=>F(Q.target.value),placeholder:"Observaes sobre a venda...",rows:3})})]}),u.jsxs("div",{className:"sale-summary",children:[u.jsxs("div",{className:"summary-row",children:[u.jsx("span",{children:"Plano Mensal:"}),u.jsxs("strong",{children:["R$ ",ne.value.toFixed(2)]})]}),u.jsxs("div",{className:"summary-row",children:[u.jsx("span",{children:"Taxa de Instalao:"}),u.jsxs("strong",{children:["R$ ",C.toFixed(2)]})]}),u.jsxs("div",{className:"summary-total",children:[u.jsx("span",{className:"summary-total-label",children:"Total Inicial:"}),u.jsxs("span",{className:"summary-total-value",children:["R$ ",(ne.value+C).toFixed(2)]})]})]})]}),u.jsxs("div",{className:"sale-modal-footer",children:[u.jsx("button",{type:"button",className:"sale-btn-secondary",onClick:i,disabled:a,children:"Cancelar"}),u.jsx("button",{type:"submit",className:"sale-btn-submit",disabled:a,children:a?u.jsxs(u.Fragment,{children:[u.jsx(Fc,{size:18,className:"sale-spinner"}),"Criando..."]}):u.jsxs(u.Fragment,{children:[u.jsx(Gc,{size:18}),"Criar Venda"]})})]})]})]})})}function lO({sale:i,onClose:e,onUpdate:n}){const{user:a}=xr(),[o,c]=j.useState("info"),[d,g]=j.useState(!1),[p,y]=j.useState(""),T=async C=>{try{g(!0),await oi.updateSaleStatus(i.id,C,`Atualizado para: ${C}`,a?.uid||""),n()}catch(L){console.error("Erro ao atualizar status",L),alert("Erro ao atualizar status")}finally{g(!1)}},S=async()=>{if(p)try{const C={name:p,type:"other",url:`https://mock-storage.com/${Date.now()}-${p}`,uploadedBy:a?.uid||""};await oi.addDocument(i.id,C,a?.uid||""),y(""),n()}catch(C){console.error("Erro ao adicionar documento",C),alert("Erro ao adicionar documento")}},A=C=>new Intl.DateTimeFormat("pt-BR",{dateStyle:"short",timeStyle:"short"}).format(C);return u.jsx("div",{className:"detail-modal-overlay",onClick:e,children:u.jsxs("div",{className:"detail-modal-container",onClick:C=>C.stopPropagation(),children:[u.jsxs("div",{className:"detail-modal-header",children:[u.jsxs("div",{className:"detail-modal-header-content",children:[u.jsx("h2",{children:"Detalhes da Venda"}),u.jsxs("p",{className:"detail-modal-sale-id",children:["#",i.id.slice(0,12)]})]}),u.jsx("button",{className:"detail-modal-close",onClick:e,children:u.jsx(Dn,{size:24})})]}),u.jsx("div",{className:"detail-modal-tabs",children:["info","timeline","documents"].map(C=>u.jsx("button",{onClick:()=>c(C),className:`detail-tab-button ${o===C?"active":""}`,children:C==="info"?"Informaes":C==="timeline"?"Jornada":"Documentos"},C))}),u.jsxs("div",{className:"detail-modal-content",children:[o==="info"&&u.jsxs("div",{className:"detail-info-section",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"detail-section-title",children:"Cliente"}),u.jsx("p",{className:"detail-client-name",children:i.clientName})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"detail-section-title",children:"Plano"}),u.jsxs("div",{className:"detail-plan-card",children:[u.jsx("p",{className:"detail-plan-name",children:i.plan.name}),u.jsx("p",{className:"detail-plan-description",children:i.plan.description}),u.jsxs("p",{className:"detail-plan-value",children:["R$ ",i.plan.value.toFixed(2),"/ms"]})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"detail-section-title",children:"Equipamentos"}),i.equipments.map(C=>u.jsxs("div",{className:"detail-equipment-item",children:[u.jsxs("span",{className:"detail-equipment-name",children:[C.name," - ",C.model]}),u.jsxs("span",{className:"detail-equipment-quantity",children:["Qtd: ",C.quantity]})]},C.id))]}),u.jsxs("div",{children:[u.jsx("h3",{className:"detail-section-title",children:"Atualizar Status"}),u.jsxs("select",{onChange:C=>T(C.target.value),disabled:d,value:i.status,className:"detail-status-select",children:[u.jsx("option",{value:"pending",children:"Pendente"}),u.jsx("option",{value:"in_progress",children:"Em Andamento"}),u.jsx("option",{value:"stock_separated",children:"Estoque Separado"}),u.jsx("option",{value:"dispatched",children:"Despachado"}),u.jsx("option",{value:"installing",children:"Instalando"}),u.jsx("option",{value:"active",children:"Ativo"}),u.jsx("option",{value:"cancelled",children:"Cancelado"})]})]})]}),o==="timeline"&&u.jsxs("div",{children:[u.jsx("h3",{className:"detail-section-title",children:"Jornada da Venda"}),u.jsx("div",{className:"detail-timeline",children:i.timeline.map((C,L)=>u.jsxs("div",{className:"detail-timeline-item",children:[L<i.timeline.length-1&&u.jsx("div",{className:"detail-timeline-line"}),u.jsx("div",{className:"detail-timeline-dot"}),u.jsxs("div",{className:"detail-timeline-card",children:[u.jsxs("div",{className:"detail-timeline-header",children:[u.jsx("strong",{className:"detail-timeline-title",children:C.description}),u.jsx("span",{className:"detail-timeline-date",children:A(C.createdAt)})]}),C.notes&&u.jsx("p",{className:"detail-timeline-notes",children:C.notes})]})]},C.id))})]}),o==="documents"&&u.jsxs("div",{children:[u.jsx("h3",{className:"detail-section-title",children:"Documentos Anexados"}),u.jsxs("div",{className:"detail-upload-area",children:[u.jsxs("p",{className:"detail-upload-info",children:[u.jsx("strong",{children:"Upload Simulado:"})," Os arquivos no so salvos no servidor"]}),u.jsxs("div",{className:"detail-upload-form",children:[u.jsx("input",{type:"text",placeholder:"Nome do documento...",value:p,onChange:C=>y(C.target.value),className:"detail-upload-input"}),u.jsx("button",{onClick:S,disabled:!p,className:"detail-upload-button",children:u.jsx(U4,{size:18})})]})]}),i.documents.length===0?u.jsxs("div",{className:"detail-empty-state",children:[u.jsx(ZE,{size:48,className:"detail-empty-icon"}),u.jsx("p",{children:"Nenhum documento anexado"})]}):u.jsx("div",{className:"detail-documents-list",children:i.documents.map(C=>u.jsxs("div",{className:"detail-document-item",children:[u.jsx(ZE,{size:24,color:"#6366f1",className:"detail-document-icon"}),u.jsxs("div",{className:"detail-document-info",children:[u.jsx("p",{className:"detail-document-name",children:C.name}),u.jsx("p",{className:"detail-document-date",children:A(C.uploadedAt)})]}),u.jsx("a",{href:C.url,target:"_blank",rel:"noopener noreferrer",className:"detail-document-link",children:"Ver Documento"})]},C.id))})]})]}),u.jsx("div",{className:"detail-modal-footer",children:u.jsx("button",{className:"detail-btn-close",onClick:e,children:"Fechar"})})]})})}function cO({onFilterChange:i}){const[e,n]=j.useState(""),[a,o]=j.useState(!1),[c,d]=j.useState({}),g=S=>{n(S);const A={...c,search:S||void 0};d(A),i(A)},p=(S,A)=>{const C={...c,[S]:A||void 0};d(C),i(C)},y=()=>{n(""),d({}),i({})},T=Object.keys(c).some(S=>c[S]!==void 0);return u.jsxs("div",{className:"client-filters",children:[u.jsxs("div",{className:"filters-main",children:[u.jsxs("div",{className:"search-box",children:[u.jsx(qd,{size:20,className:"search-icon"}),u.jsx("input",{type:"text",placeholder:"Buscar por cliente, plano ou ID...",value:e,onChange:S=>g(S.target.value),className:"search-input"}),e&&u.jsx("button",{className:"clear-search",onClick:()=>g(""),children:u.jsx(Dn,{size:18})})]}),u.jsxs("button",{className:`filter-toggle ${a?"active":""}`,onClick:()=>o(!a),children:[u.jsx(zg,{size:20}),"Filtros"]}),T&&u.jsxs("button",{className:"clear-filters",onClick:y,children:[u.jsx(Dn,{size:18}),"Limpar"]})]}),a&&u.jsxs("div",{className:"filters-advanced",children:[u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Status"}),u.jsxs("select",{value:c.status||"",onChange:S=>p("status",S.target.value),children:[u.jsx("option",{value:"",children:"Todos"}),u.jsx("option",{value:"pending",children:"Pendentes"}),u.jsx("option",{value:"in_progress",children:"Em Andamento"}),u.jsx("option",{value:"stock_separated",children:"Estoque Separado"}),u.jsx("option",{value:"dispatched",children:"Despachado"}),u.jsx("option",{value:"installing",children:"Instalando"}),u.jsx("option",{value:"active",children:"Ativo"}),u.jsx("option",{value:"cancelled",children:"Cancelado"})]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Status Pagamento"}),u.jsxs("select",{value:c.paymentStatus||"",onChange:S=>p("paymentStatus",S.target.value),children:[u.jsx("option",{value:"",children:"Todos"}),u.jsx("option",{value:"pending",children:"Pendente"}),u.jsx("option",{value:"paid",children:"Pago"}),u.jsx("option",{value:"overdue",children:"Atrasado"}),u.jsx("option",{value:"cancelled",children:"Cancelado"})]})]})]})]})}function uO(){const{user:i}=xr(),[e,n]=j.useState([]),[a,o]=j.useState(null),[c,d]=j.useState(!0),[g,p]=j.useState(!1),[y,T]=j.useState(null),[S,A]=j.useState(!1),[C,L]=j.useState({});j.useEffect(()=>{(async()=>{try{d(!0);const N=await oi.getSalesByFilters(C);n(N)}catch(N){console.error("Erro ao carregar vendas:",N)}finally{d(!1)}})()},[C]),j.useEffect(()=>{(async()=>{try{const N=await oi.getSaleStats();o(N)}catch(N){console.error("Erro ao carregar estatsticas:",N)}})()},[]);const G=()=>{T(null),p(!0)},F=se=>{T(se),A(!0)},te=async se=>{if(window.confirm("Tem certeza que deseja excluir esta venda?"))try{await oi.deleteSale(se);const[N,x]=await Promise.all([oi.getSalesByFilters(C),oi.getSaleStats()]);n(N),o(x)}catch(N){console.error("Erro ao deletar venda:",N),alert("No foi possvel deletar a venda. Tente novamente.")}},ne=()=>{p(!1),T(null)},Q=()=>{A(!1),T(null)},le=async()=>{const[se,N]=await Promise.all([oi.getSalesByFilters(C),oi.getSaleStats()]);n(se),o(N),ne(),Q()},ye=se=>{L(se)};return u.jsxs("div",{className:"sales-page",children:[u.jsxs("div",{className:"page-header",children:[u.jsxs("div",{className:"header-content",children:[u.jsx("h1",{children:"Vendas & Contratos"}),u.jsx("p",{className:"page-description",children:"Gerencie vendas, planos e acompanhe a jornada completa"})]}),u.jsxs("button",{className:"btn-primary",onClick:G,children:[u.jsx(Hc,{size:20}),"Nova Venda"]})]}),a&&u.jsx(aO,{stats:a}),u.jsxs("div",{className:"sales-content",children:[u.jsx(cO,{onFilterChange:ye}),u.jsx(rO,{sales:e,loading:c,onView:F,onDelete:te})]}),g&&u.jsx(oO,{onClose:ne,onSuccess:le,createdBy:i?.uid||""}),S&&y&&u.jsx(lO,{sale:y,onClose:Q,onUpdate:le})]})}function hO({stats:i}){const e=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a),n=[{label:"Total de Itens",value:i.totalItems,icon:$i,color:"blue"},{label:"Valor Total",value:e(i.totalValue),icon:zp,color:"green",isValue:!0},{label:"Ordens Pendentes",value:i.pendingSeparations,icon:Tr,color:"purple"},{label:"Disponveis",value:i.availableItems,icon:Es,color:"green"},{label:"Estoque Baixo",value:i.lowStockItems,icon:ib,color:"orange"},{label:"Defeituosos",value:i.defectiveItems,icon:ab,color:"red"}];return u.jsx("div",{className:"client-stats",children:n.map(a=>{const o=a.icon;return u.jsxs("div",{className:`stat-card stat-${a.color}`,children:[u.jsx("div",{className:"stat-icon",children:u.jsx(o,{size:24})}),u.jsxs("div",{className:"stat-content",children:[u.jsx("p",{className:"stat-label",children:a.label}),u.jsx("p",{className:`stat-value ${a.isValue?"is-currency":""}`,children:a.value})]})]},a.label)})})}const Bd={router:"Roteador",switch:"Switch",converter:"Conversor",cable:"Cabo",camera:"Cmera",accessory:"Acessrio",other:"Outros"},ob={available:"Disponvel",reserved:"Reservado",separated:"Separado",dispatched:"Despachado",in_maintenance:"Em Manuteno",defective:"Defeituoso"},dO={entry:"Entrada",exit:"Sada",transfer:"Transferncia",adjustment:"Ajuste",return:"Retorno",loss:"Perda/Avaria"};function fO({onFilterChange:i}){const[e,n]=j.useState(""),[a,o]=j.useState(!1),[c,d]=j.useState({}),g=S=>{n(S);const A={...c,search:S||void 0};d(A),i(A)},p=(S,A)=>{const C={...c,[S]:A||void 0};d(C),i(C)},y=()=>{n(""),d({}),i({})},T=Object.keys(c).some(S=>c[S]!==void 0);return u.jsxs("div",{className:"client-filters",children:[u.jsxs("div",{className:"filters-main",children:[u.jsxs("div",{className:"search-box",children:[u.jsx(qd,{size:20,className:"search-icon"}),u.jsx("input",{type:"text",placeholder:"Buscar por nome, modelo ou fabricante...",value:e,onChange:S=>g(S.target.value),className:"search-input"}),e&&u.jsx("button",{className:"clear-search",onClick:()=>g(""),children:u.jsx(Dn,{size:18})})]}),u.jsxs("button",{className:`filter-toggle ${a?"active":""}`,onClick:()=>o(!a),children:[u.jsx(zg,{size:20}),"Filtros"]}),T&&u.jsxs("button",{className:"clear-filters",onClick:y,children:[u.jsx(Dn,{size:18}),"Limpar"]})]}),a&&u.jsxs("div",{className:"filters-advanced",children:[u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Categoria"}),u.jsxs("select",{value:c.category||"",onChange:S=>p("category",S.target.value),children:[u.jsx("option",{value:"",children:"Todas"}),Object.entries(Bd).map(([S,A])=>u.jsx("option",{value:S,children:A},S))]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Status"}),u.jsxs("select",{value:c.status||"",onChange:S=>p("status",S.target.value),children:[u.jsx("option",{value:"",children:"Todos"}),u.jsx("option",{value:"available",children:"Disponvel"}),u.jsx("option",{value:"reserved",children:"Reservado"}),u.jsx("option",{value:"separated",children:"Separado"}),u.jsx("option",{value:"dispatched",children:"Despachado"}),u.jsx("option",{value:"in_maintenance",children:"Em Manuteno"}),u.jsx("option",{value:"defective",children:"Defeituoso"})]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Estoque Baixo"}),u.jsx("input",{type:"checkbox",checked:c.lowStock||!1,onChange:S=>p("lowStock",S.target.checked)})]})]})]})}function mO({items:i,onEdit:e,onDelete:n,onViewDetail:a}){const o=c=>{const g={available:{className:"status-active"},reserved:{className:"status-pending"},separated:{className:"status-active"},dispatched:{className:"status-active"},in_maintenance:{className:"status-inactive"},defective:{className:"status-blocked"}}[c];return u.jsx("span",{className:`status-badge ${g.className}`,children:ob[c]})};return i.length===0?u.jsx("div",{className:"table-container",children:u.jsxs("div",{className:"table-empty",children:[u.jsx($i,{size:48}),u.jsx("p",{children:"Nenhum item no estoque"}),u.jsx("span",{children:"Adicione itens para comear"})]})}):u.jsx("div",{className:"table-container",children:u.jsx("div",{className:"table-wrapper",children:u.jsxs("table",{className:"clients-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Item / Modelo"}),u.jsx("th",{children:"Categoria"}),u.jsx("th",{children:"Localizao"}),u.jsx("th",{children:"Quantidade"}),u.jsx("th",{children:"Status"}),u.jsx("th",{children:"Aes"})]})}),u.jsx("tbody",{children:i.map(c=>{const d=c.quantity<=c.minimumStock;return u.jsxs("tr",{children:[u.jsx("td",{children:u.jsxs("div",{className:"client-info",children:[u.jsx("div",{className:"client-avatar",children:u.jsx($i,{size:20})}),u.jsxs("div",{className:"client-details",children:[u.jsx("p",{className:"client-name",children:c.name}),u.jsx("p",{className:"client-location",children:c.model})]})]})}),u.jsx("td",{children:u.jsx("span",{className:"document",children:Bd[c.category]})}),u.jsx("td",{children:u.jsxs("div",{children:[u.jsx("p",{className:"client-name",children:c.location.warehouse}),c.location.shelf&&u.jsxs("p",{className:"client-location",children:[c.location.shelf,c.location.position&&` - ${c.location.position}`]})]})}),u.jsx("td",{children:u.jsxs("div",{children:[u.jsxs("p",{className:"client-name",children:[c.quantity," un.",d&&u.jsx(ab,{size:16,style:{marginLeft:"0.5rem",color:"#f59e0b"}})]}),u.jsxs("p",{className:"client-location",children:["Mn: ",c.minimumStock,c.reservedQuantity>0&&` | Reservado: ${c.reservedQuantity}`]})]})}),u.jsx("td",{children:o(c.status)}),u.jsx("td",{children:u.jsxs("div",{className:"action-buttons",children:[u.jsx("button",{className:"btn-action btn-view",onClick:()=>a(c),title:"Ver Detalhes",children:u.jsx(Ac,{size:16})}),u.jsx("button",{className:"btn-action btn-edit",onClick:()=>e(c),title:"Editar",children:u.jsx(tb,{size:16})}),u.jsx("button",{className:"btn-action btn-delete",onClick:()=>n(c.id),title:"Excluir",children:u.jsx($c,{size:16})})]})})]},c.id)})})]})})})}function pO({orders:i,onUpdateStatus:e}){const n=o=>{const d={pending:{label:"Pendente",className:"status-pending"},separating:{label:"Separando",className:"status-active"},ready:{label:"Pronto",className:"status-active"},dispatched:{label:"Despachado",className:"status-active"},cancelled:{label:"Cancelado",className:"status-blocked"}}[o];return u.jsx("span",{className:`status-badge ${d.className}`,children:d.label})},a=o=>new Intl.DateTimeFormat("pt-BR",{dateStyle:"short"}).format(o);return i.length===0?u.jsx("div",{className:"table-container",children:u.jsxs("div",{className:"table-empty",children:[u.jsx(Es,{size:48}),u.jsx("p",{children:"Nenhuma ordem pendente"}),u.jsx("span",{children:"Todas as vendas foram separadas"})]})}):u.jsx("div",{className:"table-container",children:u.jsx("div",{className:"table-wrapper",children:u.jsxs("table",{className:"clients-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Venda / Cliente"}),u.jsx("th",{children:"Plano"}),u.jsx("th",{children:"Equipamentos"}),u.jsx("th",{children:"Data"}),u.jsx("th",{children:"Status"}),u.jsx("th",{children:"Aes"})]})}),u.jsx("tbody",{children:i.map(o=>u.jsxs("tr",{children:[u.jsx("td",{children:u.jsxs("div",{className:"client-info",children:[u.jsx("div",{className:"client-avatar",children:u.jsx($i,{size:20})}),u.jsxs("div",{className:"client-details",children:[u.jsx("p",{className:"client-name",children:o.clientName}),u.jsxs("p",{className:"client-location",children:["ID: #",o.saleId.slice(0,8)]})]})]})}),u.jsx("td",{children:u.jsx("span",{className:"document",children:o.planName})}),u.jsx("td",{children:u.jsx("div",{children:o.items.map((c,d)=>u.jsxs("p",{style:{margin:"0.25rem 0",fontSize:"0.9rem",color:c.separated?"#059669":"#64748b"},children:[c.separated?"":""," ",c.itemName," x",c.quantity]},d))})}),u.jsx("td",{children:u.jsx("span",{className:"document",children:a(o.createdAt)})}),u.jsx("td",{children:n(o.status)}),u.jsx("td",{children:u.jsxs("div",{className:"action-buttons",children:[o.status==="pending"&&u.jsx("button",{className:"btn-action btn-edit",onClick:()=>e(o.id,"separating"),title:"Iniciar Separao",children:u.jsx(b4,{size:16})}),o.status==="separating"&&u.jsx("button",{className:"btn-action btn-view",onClick:()=>e(o.id,"ready"),title:"Marcar como Pronto",children:u.jsx(Es,{size:16})}),o.status!=="cancelled"&&o.status!=="dispatched"&&u.jsx("button",{className:"btn-action btn-delete",onClick:()=>e(o.id,"cancelled"),title:"Cancelar",children:u.jsx(dd,{size:16})})]})})]},o.id))})]})})})}function gO({item:i,onClose:e,onSuccess:n,createdBy:a}){const[o,c]=j.useState(!1),[d,g]=j.useState(""),[p,y]=j.useState({name:"",model:"",category:"router",manufacturer:"",quantity:0,minimumStock:5,warehouse:"Almoxarifado Principal",shelf:"",position:"",status:"available",unitPrice:0,supplier:"",notes:""});j.useEffect(()=>{i&&y({name:i.name,model:i.model,category:i.category,manufacturer:i.manufacturer||"",quantity:i.quantity,minimumStock:i.minimumStock,warehouse:i.location.warehouse,shelf:i.location.shelf||"",position:i.location.position||"",status:i.status,unitPrice:i.unitPrice||0,supplier:i.supplier||"",notes:i.notes||""})},[i]);const T=async S=>{if(S.preventDefault(),!p.name||!p.model){g("Preencha todos os campos obrigatrios");return}try{if(c(!0),g(""),i){const A={name:p.name,model:p.model,category:p.category,manufacturer:p.manufacturer||void 0,minimumStock:p.minimumStock,location:{warehouse:p.warehouse,shelf:p.shelf||void 0,position:p.position||void 0},status:p.status,unitPrice:p.unitPrice||void 0,supplier:p.supplier||void 0,notes:p.notes||void 0};await an.updateItem(i.id,A)}else{const A={name:p.name,model:p.model,category:p.category,manufacturer:p.manufacturer||void 0,quantity:p.quantity,minimumStock:p.minimumStock,location:{warehouse:p.warehouse,shelf:p.shelf||void 0,position:p.position||void 0},status:p.status,unitPrice:p.unitPrice||void 0,supplier:p.supplier||void 0,notes:p.notes||void 0,createdBy:a};await an.createItem(A)}n()}catch(A){g(A instanceof Error?A.message:"Erro ao salvar item")}finally{c(!1)}};return u.jsx("div",{className:"sale-modal-overlay",onClick:e,children:u.jsxs("div",{className:"sale-modal-container",onClick:S=>S.stopPropagation(),style:{maxWidth:"800px"},children:[u.jsxs("div",{className:"sale-modal-header",children:[u.jsx("h2",{children:i?"Editar Item":"Novo Item de Estoque"}),u.jsx("button",{className:"sale-modal-close",onClick:e,children:u.jsx(Dn,{size:24})})]}),u.jsxs("form",{onSubmit:T,className:"sale-modal-form",children:[d&&u.jsx("div",{className:"sale-form-error",children:u.jsx("span",{children:d})}),u.jsxs("div",{className:"sale-form-section",children:[u.jsx("h3",{children:"Informaes Bsicas"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Nome *"}),u.jsx("input",{type:"text",value:p.name,onChange:S=>y({...p,name:S.target.value}),required:!0})]}),u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Modelo *"}),u.jsx("input",{type:"text",value:p.model,onChange:S=>y({...p,model:S.target.value}),required:!0})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Categoria *"}),u.jsx("select",{value:p.category,onChange:S=>y({...p,category:S.target.value}),required:!0,children:Object.entries(Bd).map(([S,A])=>u.jsx("option",{value:S,children:A},S))})]}),u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Fabricante"}),u.jsx("input",{type:"text",value:p.manufacturer,onChange:S=>y({...p,manufacturer:S.target.value})})]})]})]}),u.jsxs("div",{className:"sale-form-section",children:[u.jsx("h3",{children:"Quantidade e Preo"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[!i&&u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Quantidade Inicial *"}),u.jsx("input",{type:"number",value:p.quantity,onChange:S=>y({...p,quantity:Number(S.target.value)}),min:"0",required:!0})]}),u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Estoque Mnimo *"}),u.jsx("input",{type:"number",value:p.minimumStock,onChange:S=>y({...p,minimumStock:Number(S.target.value)}),min:"0",required:!0})]}),u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Preo Unitrio (R$)"}),u.jsx("input",{type:"number",value:p.unitPrice,onChange:S=>y({...p,unitPrice:Number(S.target.value)}),min:"0",step:"0.01"})]})]})]}),u.jsxs("div",{className:"sale-form-section",children:[u.jsx("h3",{children:"Localizao"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr",gap:"1rem"},children:[u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Almoxarifado *"}),u.jsx("input",{type:"text",value:p.warehouse,onChange:S=>y({...p,warehouse:S.target.value}),required:!0})]}),u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Prateleira"}),u.jsx("input",{type:"text",value:p.shelf,onChange:S=>y({...p,shelf:S.target.value}),placeholder:"Ex: A1"})]}),u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Posio"}),u.jsx("input",{type:"text",value:p.position,onChange:S=>y({...p,position:S.target.value}),placeholder:"Ex: 3"})]})]})]}),u.jsxs("div",{className:"sale-form-section",children:[u.jsx("h3",{children:"Informaes Adicionais"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Status"}),u.jsxs("select",{value:p.status,onChange:S=>y({...p,status:S.target.value}),children:[u.jsx("option",{value:"available",children:"Disponvel"}),u.jsx("option",{value:"reserved",children:"Reservado"}),u.jsx("option",{value:"separated",children:"Separado"}),u.jsx("option",{value:"dispatched",children:"Despachado"}),u.jsx("option",{value:"in_maintenance",children:"Em Manuteno"}),u.jsx("option",{value:"defective",children:"Defeituoso"})]})]}),u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Fornecedor"}),u.jsx("input",{type:"text",value:p.supplier,onChange:S=>y({...p,supplier:S.target.value})})]})]}),u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Observaes"}),u.jsx("textarea",{value:p.notes,onChange:S=>y({...p,notes:S.target.value}),rows:3,placeholder:"Observaes sobre o item..."})]})]}),u.jsxs("div",{className:"sale-modal-footer",children:[u.jsx("button",{type:"button",className:"sale-btn-secondary",onClick:e,disabled:o,children:"Cancelar"}),u.jsx("button",{type:"submit",className:"sale-btn-submit",disabled:o,children:o?u.jsxs(u.Fragment,{children:[u.jsx(Fc,{size:18,className:"sale-spinner"}),"Salvando..."]}):u.jsxs(u.Fragment,{children:[u.jsx(Gc,{size:18}),i?"Atualizar":"Criar Item"]})})]})]})]})})}function yO({onClose:i,onSuccess:e,createdBy:n}){const[a,o]=j.useState(!1),[c,d]=j.useState(""),[g,p]=j.useState([]),[y,T]=j.useState({itemId:"",quantity:0,unitPrice:0,supplier:"",invoiceNumber:"",invoiceDate:"",notes:""});j.useEffect(()=>{(async()=>{try{const G=await an.getAllItems();p(G)}catch(G){console.error("Erro ao carregar items:",G)}})()},[]);const S=async L=>{if(L.preventDefault(),!y.itemId||y.quantity<=0){d("Selecione um item e informe a quantidade");return}try{o(!0),d(""),await an.createEntry({itemId:y.itemId,quantity:y.quantity,unitPrice:y.unitPrice,supplier:y.supplier,invoiceNumber:y.invoiceNumber||void 0,invoiceDate:y.invoiceDate?new Date(y.invoiceDate):void 0,notes:y.notes||void 0,createdBy:n}),e()}catch(G){d(G instanceof Error?G.message:"Erro ao registrar entrada")}finally{o(!1)}},A=g.find(L=>L.id===y.itemId),C=y.quantity*y.unitPrice;return u.jsx("div",{className:"sale-modal-overlay",onClick:i,children:u.jsxs("div",{className:"sale-modal-container",onClick:L=>L.stopPropagation(),children:[u.jsxs("div",{className:"sale-modal-header",children:[u.jsx("h2",{children:"Entrada de Equipamentos"}),u.jsx("button",{className:"sale-modal-close",onClick:i,children:u.jsx(Dn,{size:24})})]}),u.jsxs("form",{onSubmit:S,className:"sale-modal-form",children:[c&&u.jsx("div",{className:"sale-form-error",children:u.jsx("span",{children:c})}),u.jsxs("div",{className:"sale-form-section",children:[u.jsx("h3",{children:"Selecionar Item"}),u.jsx("div",{className:"sale-form-group",children:u.jsxs("select",{value:y.itemId,onChange:L=>{const G=g.find(F=>F.id===L.target.value);T({...y,itemId:L.target.value,unitPrice:G?.unitPrice||0})},required:!0,children:[u.jsx("option",{value:"",children:"Selecione um item..."}),g.map(L=>u.jsxs("option",{value:L.id,children:[L.name," - ",L.model," (Estoque atual: ",L.quantity,")"]},L.id))]})})]}),u.jsxs("div",{className:"sale-form-section",children:[u.jsx("h3",{children:"Quantidade e Valor"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Quantidade *"}),u.jsx("input",{type:"number",value:y.quantity,onChange:L=>T({...y,quantity:Number(L.target.value)}),min:"1",required:!0})]}),u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Preo Unitrio (R$) *"}),u.jsx("input",{type:"number",value:y.unitPrice,onChange:L=>T({...y,unitPrice:Number(L.target.value)}),min:"0",step:"0.01",required:!0})]})]})]}),u.jsxs("div",{className:"sale-form-section",children:[u.jsx("h3",{children:"Fornecedor e Nota Fiscal"}),u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Fornecedor *"}),u.jsx("input",{type:"text",value:y.supplier,onChange:L=>T({...y,supplier:L.target.value}),required:!0})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Nmero da NF"}),u.jsx("input",{type:"text",value:y.invoiceNumber,onChange:L=>T({...y,invoiceNumber:L.target.value})})]}),u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Data da NF"}),u.jsx("input",{type:"date",value:y.invoiceDate,onChange:L=>T({...y,invoiceDate:L.target.value})})]})]})]}),u.jsxs("div",{className:"sale-form-section",children:[u.jsx("h3",{children:"Observaes"}),u.jsx("div",{className:"sale-form-group",children:u.jsx("textarea",{value:y.notes,onChange:L=>T({...y,notes:L.target.value}),rows:3,placeholder:"Observaes sobre a entrada..."})})]}),A&&y.quantity>0&&u.jsxs("div",{className:"sale-summary",children:[u.jsxs("div",{className:"summary-row",children:[u.jsx("span",{children:"Item:"}),u.jsx("strong",{children:A.name})]}),u.jsxs("div",{className:"summary-row",children:[u.jsx("span",{children:"Estoque Atual:"}),u.jsxs("strong",{children:[A.quantity," un."]})]}),u.jsxs("div",{className:"summary-row",children:[u.jsx("span",{children:"Nova Quantidade:"}),u.jsxs("strong",{children:[A.quantity+y.quantity," un."]})]}),u.jsxs("div",{className:"summary-total",children:[u.jsx("span",{className:"summary-total-label",children:"Valor Total:"}),u.jsxs("span",{className:"summary-total-value",children:["R$ ",C.toFixed(2)]})]})]}),u.jsxs("div",{className:"sale-modal-footer",children:[u.jsx("button",{type:"button",className:"sale-btn-secondary",onClick:i,disabled:a,children:"Cancelar"}),u.jsx("button",{type:"submit",className:"sale-btn-submit",disabled:a,children:a?u.jsxs(u.Fragment,{children:[u.jsx(Fc,{size:18,className:"sale-spinner"}),"Registrando..."]}):u.jsxs(u.Fragment,{children:[u.jsx(Gc,{size:18}),"Registrar Entrada"]})})]})]})]})})}function vO({onClose:i,onSuccess:e,createdBy:n}){const[a,o]=j.useState(!1),[c,d]=j.useState(""),[g,p]=j.useState([]),[y,T]=j.useState([]),[S,A]=j.useState(""),[C,L]=j.useState({destination:"",dispatchDate:new Date().toISOString().split("T")[0],technician:"",technicianContact:"",trackingCode:"",estimatedDelivery:"",notes:""}),[G,F]=j.useState([{itemId:"",quantity:0}]);j.useEffect(()=>{(async()=>{try{const[N,x]=await Promise.all([an.getAllItems(),an.getSeparationOrders()]);p(N.filter(R=>R.status==="available")),T(x.filter(R=>R.status==="ready"))}catch(N){console.error("Erro ao carregar dados:",N)}})()},[]);const te=se=>{A(se);const N=y.find(x=>x.id===se);N&&(F(N.items.map(x=>({itemId:x.itemId,quantity:x.quantity}))),L({...C,destination:`Cliente: ${N.clientName}`}))},ne=()=>{F([...G,{itemId:"",quantity:0}])},Q=se=>{F(G.filter((N,x)=>x!==se))},le=(se,N,x)=>{const R=[...G];R[se]={...R[se],[N]:x},F(R)},ye=async se=>{if(se.preventDefault(),!C.destination){d("Informe o destino");return}const N=G.filter(x=>x.itemId&&x.quantity>0);if(N.length===0){d("Adicione pelo menos um item");return}try{if(o(!0),d(""),await an.createDispatch({items:N,destination:C.destination,dispatchDate:new Date(C.dispatchDate),technician:C.technician||void 0,technicianContact:C.technicianContact||void 0,trackingCode:C.trackingCode||void 0,estimatedDelivery:C.estimatedDelivery?new Date(C.estimatedDelivery):void 0,notes:C.notes||void 0,createdBy:n}),S){const x=y.find(R=>R.id===S);await an.updateSeparationOrderStatus(S,"dispatched",n),x&&await oi.updateSaleStatus(x.saleId,"dispatched","Equipamentos despachados para instalao",n)}e()}catch(x){d(x instanceof Error?x.message:"Erro ao criar despacho")}finally{o(!1)}};return u.jsx("div",{className:"sale-modal-overlay",onClick:i,children:u.jsxs("div",{className:"sale-modal-container",onClick:se=>se.stopPropagation(),style:{maxWidth:"900px"},children:[u.jsxs("div",{className:"sale-modal-header",children:[u.jsx("h2",{children:"Despacho de Equipamentos"}),u.jsx("button",{className:"sale-modal-close",onClick:i,children:u.jsx(Dn,{size:24})})]}),u.jsxs("form",{onSubmit:ye,className:"sale-modal-form",children:[c&&u.jsx("div",{className:"sale-form-error",children:u.jsx("span",{children:c})}),y.length>0&&u.jsxs("div",{className:"sale-form-section",children:[u.jsx("h3",{children:"Vincular a Ordem de Separao (Opcional)"}),u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Ordem Pronta para Despacho"}),u.jsxs("select",{value:S,onChange:se=>te(se.target.value),children:[u.jsx("option",{value:"",children:"Despacho avulso (sem ordem)"}),y.map(se=>u.jsxs("option",{value:se.id,children:[se.clientName," - ",se.planName," (",se.items.length," itens)"]},se.id))]}),S&&u.jsxs("div",{style:{marginTop:"0.75rem",padding:"1rem",background:"#f0fdf4",border:"1px solid #86efac",borderRadius:"8px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#16a34a",fontWeight:600,marginBottom:"0.5rem"},children:[u.jsx($i,{size:16}),"Ordem vinculada"]}),u.jsx("p",{style:{margin:0,fontSize:"0.9rem",color:"#166534"},children:"Os itens desta ordem foram carregados automaticamente"})]})]})]}),u.jsxs("div",{className:"sale-form-section",children:[u.jsx("h3",{children:"Itens para Despacho"}),G.map((se,N)=>{const x=g.find(M=>M.id===se.itemId),R=x&&se.quantity>x.quantity;return u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr auto",gap:"1rem",marginBottom:"1rem",alignItems:"start"},children:[u.jsxs("div",{className:"sale-form-group",children:[u.jsxs("label",{children:["Item ",N+1]}),u.jsxs("select",{value:se.itemId,onChange:M=>le(N,"itemId",M.target.value),required:!0,children:[u.jsx("option",{value:"",children:"Selecione..."}),g.map(M=>u.jsxs("option",{value:M.id,children:[M.name," - ",M.model," (Disp: ",M.quantity,")"]},M.id))]})]}),u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Quantidade"}),u.jsx("input",{type:"number",value:se.quantity,onChange:M=>le(N,"quantity",Number(M.target.value)),min:"1",max:x?.quantity||void 0,required:!0,style:{borderColor:R?"#ef4444":void 0}}),R&&u.jsx("span",{style:{color:"#ef4444",fontSize:"0.85rem"},children:"Quantidade excede o estoque"})]}),G.length>1&&u.jsx("button",{type:"button",onClick:()=>Q(N),style:{marginTop:"1.7rem",padding:"0.75rem",background:"#ef4444",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:u.jsx($c,{size:18})})]},N)}),u.jsxs("button",{type:"button",onClick:ne,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.25rem",background:"#f1f5f9",border:"2px dashed #cbd5e1",borderRadius:"8px",color:"#64748b",fontWeight:600,cursor:"pointer",width:"100%",justifyContent:"center"},children:[u.jsx(Hc,{size:18}),"Adicionar Item"]})]}),u.jsxs("div",{className:"sale-form-section",children:[u.jsx("h3",{children:"Destino e Data"}),u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Endereo de Destino *"}),u.jsx("input",{type:"text",value:C.destination,onChange:se=>L({...C,destination:se.target.value}),placeholder:"Endereo completo",required:!0})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Data do Despacho *"}),u.jsx("input",{type:"date",value:C.dispatchDate,onChange:se=>L({...C,dispatchDate:se.target.value}),required:!0})]}),u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Previso de Entrega"}),u.jsx("input",{type:"date",value:C.estimatedDelivery,onChange:se=>L({...C,estimatedDelivery:se.target.value})})]})]})]}),u.jsxs("div",{className:"sale-form-section",children:[u.jsx("h3",{children:"Responsvel pela Instalao"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Tcnico"}),u.jsx("input",{type:"text",value:C.technician,onChange:se=>L({...C,technician:se.target.value})})]}),u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Contato do Tcnico"}),u.jsx("input",{type:"text",value:C.technicianContact,onChange:se=>L({...C,technicianContact:se.target.value}),placeholder:"Telefone ou email"})]})]})]}),u.jsxs("div",{className:"sale-form-section",children:[u.jsx("h3",{children:"Rastreamento e Observaes"}),u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Cdigo de Rastreamento"}),u.jsx("input",{type:"text",value:C.trackingCode,onChange:se=>L({...C,trackingCode:se.target.value})})]}),u.jsxs("div",{className:"sale-form-group",children:[u.jsx("label",{children:"Observaes"}),u.jsx("textarea",{value:C.notes,onChange:se=>L({...C,notes:se.target.value}),rows:3,placeholder:"Observaes sobre o despacho..."})]})]}),u.jsxs("div",{className:"sale-modal-footer",children:[u.jsx("button",{type:"button",className:"sale-btn-secondary",onClick:i,disabled:a,children:"Cancelar"}),u.jsx("button",{type:"submit",className:"sale-btn-submit",disabled:a,children:a?u.jsxs(u.Fragment,{children:[u.jsx(Fc,{size:18,className:"sale-spinner"}),"Despachando..."]}):u.jsxs(u.Fragment,{children:[u.jsx(Gc,{size:18}),"Criar Despacho"]})})]})]})]})})}function _O({item:i,onClose:e}){const[n,a]=j.useState("info"),[o,c]=j.useState([]),[d,g]=j.useState(!1);j.useEffect(()=>{n==="movements"&&(async()=>{try{g(!0);const A=await an.getMovementsByItem(i.id);c(A)}catch(A){console.error("Erro ao carregar movimentaes:",A)}finally{g(!1)}})()},[n,i.id]);const p=S=>new Intl.DateTimeFormat("pt-BR",{dateStyle:"short",timeStyle:"short"}).format(S),y=S=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(S),T=i.quantity<=i.minimumStock;return u.jsx("div",{className:"detail-modal-overlay",onClick:e,children:u.jsxs("div",{className:"detail-modal-container",onClick:S=>S.stopPropagation(),children:[u.jsxs("div",{className:"detail-modal-header",children:[u.jsxs("div",{className:"detail-modal-header-content",children:[u.jsx("h2",{children:"Detalhes do Item"}),u.jsxs("p",{className:"detail-modal-sale-id",children:[i.name," - ",i.model]})]}),u.jsx("button",{className:"detail-modal-close",onClick:e,children:u.jsx(Dn,{size:24})})]}),u.jsx("div",{className:"detail-modal-tabs",children:["info","movements"].map(S=>u.jsx("button",{onClick:()=>a(S),className:`detail-tab-button ${n===S?"active":""}`,children:S==="info"?"Informaes":"Histrico"},S))}),u.jsxs("div",{className:"detail-modal-content",children:[n==="info"&&u.jsxs("div",{className:"detail-info-section",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"detail-section-title",children:"Informaes Gerais"}),u.jsx("div",{className:"detail-plan-card",children:u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[u.jsxs("div",{children:[u.jsx("p",{style:{margin:"0 0 0.25rem 0",fontSize:"0.85rem",color:"#64748b"},children:"Nome"}),u.jsx("p",{className:"detail-plan-name",children:i.name})]}),u.jsxs("div",{children:[u.jsx("p",{style:{margin:"0 0 0.25rem 0",fontSize:"0.85rem",color:"#64748b"},children:"Modelo"}),u.jsx("p",{className:"detail-plan-name",children:i.model})]}),u.jsxs("div",{children:[u.jsx("p",{style:{margin:"0 0 0.25rem 0",fontSize:"0.85rem",color:"#64748b"},children:"Categoria"}),u.jsx("p",{className:"detail-plan-name",children:Bd[i.category]})]}),i.manufacturer&&u.jsxs("div",{children:[u.jsx("p",{style:{margin:"0 0 0.25rem 0",fontSize:"0.85rem",color:"#64748b"},children:"Fabricante"}),u.jsx("p",{className:"detail-plan-name",children:i.manufacturer})]})]})})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"detail-section-title",children:"Estoque"}),u.jsxs("div",{className:"detail-plan-card",children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[u.jsxs("div",{children:[u.jsx("p",{style:{margin:"0 0 0.25rem 0",fontSize:"0.85rem",color:"#64748b"},children:"Quantidade"}),u.jsxs("p",{className:"detail-plan-value",style:{color:T?"#f59e0b":"#059669"},children:[i.quantity," un."]})]}),u.jsxs("div",{children:[u.jsx("p",{style:{margin:"0 0 0.25rem 0",fontSize:"0.85rem",color:"#64748b"},children:"Reservado"}),u.jsxs("p",{className:"detail-plan-value",style:{color:"#6366f1"},children:[i.reservedQuantity," un."]})]}),u.jsxs("div",{children:[u.jsx("p",{style:{margin:"0 0 0.25rem 0",fontSize:"0.85rem",color:"#64748b"},children:"Estoque Mnimo"}),u.jsxs("p",{className:"detail-plan-value",style:{color:"#64748b"},children:[i.minimumStock," un."]})]})]}),T&&u.jsx("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#fef3c7",borderRadius:"8px",color:"#92400e",fontSize:"0.9rem"},children:" Estoque abaixo do mnimo!"})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"detail-section-title",children:"Localizao"}),u.jsxs("div",{className:"detail-plan-card",children:[u.jsx("p",{className:"detail-plan-name",children:i.location.warehouse}),i.location.shelf&&u.jsxs("p",{className:"detail-plan-description",children:["Prateleira: ",i.location.shelf,i.location.position&&` - Posio: ${i.location.position}`]})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"detail-section-title",children:"Informaes Adicionais"}),u.jsxs("div",{className:"detail-plan-card",children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[u.jsxs("div",{children:[u.jsx("p",{style:{margin:"0 0 0.25rem 0",fontSize:"0.85rem",color:"#64748b"},children:"Status"}),u.jsx("p",{className:"detail-plan-name",children:ob[i.status]})]}),i.unitPrice&&u.jsxs("div",{children:[u.jsx("p",{style:{margin:"0 0 0.25rem 0",fontSize:"0.85rem",color:"#64748b"},children:"Preo Unitrio"}),u.jsx("p",{className:"detail-plan-value",children:y(i.unitPrice)})]}),i.supplier&&u.jsxs("div",{children:[u.jsx("p",{style:{margin:"0 0 0.25rem 0",fontSize:"0.85rem",color:"#64748b"},children:"Fornecedor"}),u.jsx("p",{className:"detail-plan-name",children:i.supplier})]})]}),i.notes&&u.jsxs("div",{style:{marginTop:"1rem"},children:[u.jsx("p",{style:{margin:"0 0 0.25rem 0",fontSize:"0.85rem",color:"#64748b"},children:"Observaes"}),u.jsx("p",{style:{margin:0,color:"#334155"},children:i.notes})]})]})]})]}),n==="movements"&&u.jsxs("div",{children:[u.jsx("h3",{className:"detail-section-title",children:"Histrico de Movimentaes"}),d?u.jsx("div",{className:"detail-empty-state",children:u.jsx("p",{children:"Carregando movimentaes..."})}):o.length===0?u.jsxs("div",{className:"detail-empty-state",children:[u.jsx($i,{size:48,className:"detail-empty-icon"}),u.jsx("p",{children:"Nenhuma movimentao registrada"})]}):u.jsx("div",{className:"detail-timeline",children:o.map((S,A)=>u.jsxs("div",{className:"detail-timeline-item",children:[A<o.length-1&&u.jsx("div",{className:"detail-timeline-line"}),u.jsx("div",{className:"detail-timeline-dot",style:{background:S.quantity>0?"#059669":"#ef4444"}}),u.jsxs("div",{className:"detail-timeline-card",children:[u.jsxs("div",{className:"detail-timeline-header",children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[S.quantity>0?u.jsx(sb,{size:18,color:"#059669"}):u.jsx(ib,{size:18,color:"#ef4444"}),u.jsx("strong",{className:"detail-timeline-title",children:dO[S.type]})]}),u.jsx("span",{className:"detail-timeline-date",children:p(S.createdAt)})]}),u.jsx("p",{className:"detail-timeline-notes",children:S.description}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.5rem",marginTop:"0.75rem",fontSize:"0.85rem"},children:[u.jsxs("div",{children:[u.jsxs("span",{style:{color:"#64748b"},children:["Quantidade:"," "]}),u.jsxs("strong",{style:{color:S.quantity>0?"#059669":"#ef4444"},children:[S.quantity>0?"+":"",S.quantity," un."]})]}),u.jsxs("div",{children:[u.jsx("span",{style:{color:"#64748b"},children:"Anterior: "}),u.jsxs("strong",{children:[S.previousQuantity," un."]})]}),u.jsxs("div",{children:[u.jsx("span",{style:{color:"#64748b"},children:"Novo: "}),u.jsxs("strong",{children:[S.newQuantity," un."]})]})]})]})]},S.id))})]})]}),u.jsx("div",{className:"detail-modal-footer",children:u.jsx("button",{className:"detail-btn-close",onClick:e,children:"Fechar"})})]})})}function EO(){const{user:i}=xr(),[e,n]=j.useState(!0),[a,o]=j.useState("items"),[c,d]=j.useState([]),[g,p]=j.useState([]),[y,T]=j.useState([]),[S,A]=j.useState(null),[C,L]=j.useState(!1),[G,F]=j.useState(!1),[te,ne]=j.useState(!1),[Q,le]=j.useState(!1),[ye,se]=j.useState(null),N=async()=>{try{n(!0);const[Oe,Y,re]=await Promise.all([an.getAllItems(),an.getSeparationOrders(),an.getStats()]);d(Oe),p(Oe),T(Y.filter(ve=>ve.status!=="dispatched")),A(re)}catch(Oe){console.error("Erro ao carregar dados:",Oe)}finally{n(!1)}};j.useEffect(()=>{N()},[]);const x=async Oe=>{try{if(Object.keys(Oe).length===0)p(c);else{const Y=await an.getItemsByFilters(Oe);p(Y)}}catch(Y){console.error("Erro ao filtrar:",Y)}},R=async Oe=>{if(confirm("Tem certeza que deseja excluir este item?"))try{await an.deleteItem(Oe),N()}catch(Y){console.error("Erro ao deletar item:",Y),alert("No foi possvel deletar o item")}},M=Oe=>{se(Oe),L(!0)},O=Oe=>{se(Oe),le(!0)},P=()=>{L(!1),F(!1),ne(!1),se(null),N()},I=()=>{L(!1),F(!1),ne(!1),le(!1),se(null)},Ye=async(Oe,Y)=>{try{await an.updateSeparationOrderStatus(Oe,Y,i?.uid||""),N()}catch(re){console.error("Erro ao atualizar status:",re),alert("No foi possvel atualizar o status")}};return u.jsxs("div",{className:"stock-page",children:[u.jsxs("div",{className:"page-header",children:[u.jsxs("div",{className:"header-content",children:[u.jsx("h1",{children:"Estoque / Almoxarifado"}),u.jsx("p",{className:"page-description",children:"Gerencie equipamentos, entradas e sadas"})]}),u.jsxs("div",{className:"header-actions",children:[u.jsxs("button",{className:"btn-secondary",onClick:()=>F(!0),children:[u.jsx(t4,{size:18}),"Entrada"]}),u.jsxs("button",{className:"btn-secondary",onClick:()=>ne(!0),children:[u.jsx(I4,{size:18}),"Despacho"]}),u.jsxs("button",{className:"btn-primary",onClick:()=>{se(null),L(!0)},children:[u.jsx(Hc,{size:18}),"Novo Item"]})]})]}),S&&u.jsx(hO,{stats:S}),u.jsxs("div",{className:"stock-tabs",children:[u.jsxs("button",{className:`stock-tab ${a==="items"?"active":""}`,onClick:()=>o("items"),children:[u.jsx($i,{size:18}),"Itens de Estoque"]}),u.jsxs("button",{className:`stock-tab ${a==="orders"?"active":""}`,onClick:()=>o("orders"),children:[u.jsx($i,{size:18}),"Ordens de Separao",y.length>0&&u.jsx("span",{className:"tab-badge",children:y.length})]})]}),a==="items"&&u.jsxs(u.Fragment,{children:[u.jsx(fO,{onFilterChange:x}),e?u.jsxs("div",{className:"loading-container",children:[u.jsx("div",{className:"spinner-large"}),u.jsx("p",{children:"Carregando estoque..."})]}):u.jsx(mO,{items:g,onEdit:M,onDelete:R,onViewDetail:O})]}),a==="orders"&&u.jsx(u.Fragment,{children:e?u.jsxs("div",{className:"loading-container",children:[u.jsx("div",{className:"spinner-large"}),u.jsx("p",{children:"Carregando ordens..."})]}):u.jsx(pO,{orders:y,onUpdateStatus:Ye})}),C&&u.jsx(gO,{item:ye,onClose:I,onSuccess:P,createdBy:i?.uid||""}),G&&u.jsx(yO,{onClose:I,onSuccess:P,createdBy:i?.uid||""}),te&&u.jsx(vO,{onClose:I,onSuccess:P,createdBy:i?.uid||""}),Q&&ye&&u.jsx(_O,{item:ye,onClose:I})]})}function TO(){function i(){return u.jsx(Dh,{children:u.jsx("div",{children:"Dashboard"})})}return u.jsx(_j,{children:u.jsxs(XD,{children:[u.jsx(ca,{path:ri.home,element:u.jsx(i,{})}),u.jsx(ca,{path:ri.login,element:u.jsx(W4,{})}),u.jsx(ca,{path:ri.register,element:u.jsx(Z4,{})}),u.jsx(ca,{path:ri.dashboard,element:u.jsx(i,{})}),u.jsx(ca,{path:ri.clients,element:u.jsx(Dh,{children:u.jsx(sO,{})})}),u.jsx(ca,{path:ri.sales,element:u.jsx(Dh,{children:u.jsx(uO,{})})}),u.jsx(ca,{path:ri.stock,element:u.jsx(Dh,{children:u.jsx(EO,{})})})]})})}function SO(){return u.jsx(rD,{children:u.jsx(TO,{})})}QA.createRoot(document.getElementById("root")).render(u.jsx(j.StrictMode,{children:u.jsx(SO,{})}));
